define.Class("ecommerce.converters.EcomCartConverter",function(a){var b=a;b.binds(["convertCart"]),b.utilize(["ecommerce.converters.EcomProductItemConverter","ecommerce.converters.EcomShippingConverter"]),b.statics({NULL_CART_ID:"nullCartId"}),b.methods({initialize:function(){this._productConverter=new this.imports.EcomProductItemConverter,this._shippingConverter=new this.imports.EcomShippingConverter},convertCart:function(a){if(!a)return this._getDummyData();var b={_type:"Cart",totalPrice:a.cart.total,subTotal:a.cart.subTotal||"",id:a.cart.cartId,items:[],hasCoupon:a.cart.hasCoupon||!1,coupon:{_type:"Coupon",couponCode:"",couponName:"",discountAmount:"",validationMessage:""},hasFees:a.cart.hasFees||!1,fees:{_type:"Fees",destination:{_type:"Destination",shippable:!1},shippingFees:"",taxFees:""},emptyCartImage:{_type:"wix:Image",title:"Cart",src:"images/empty_cart.png",width:70,height:60},hasProductsOptions:!1,hasExternalCheckoutUrl:a.cart.hasCheckout||!1};return b.itemsCount=this._populateCartItems(a.productCartItems,b),this._setCouponData(a,b),this._setFeesData(a,b),b},_getDummyData:function(){return{_type:"Cart",totalPrice:"",subTotal:"",id:this.NULL_CART_ID,items:[],itemsCount:0,hasCoupon:!1,coupon:{},hasFees:!1,fees:{},emptyCartImage:{_type:"wix:Image",title:"Cart",src:"images/empty_cart.png",width:70,height:60},hasProductsOptions:!1,hasExternalCheckoutUrl:!1}},_setCouponData:function(a,b){var c=a.cart.coupon;b.hasCoupon&&c&&(c.name&&(b.coupon.couponName=c.name),b.coupon.discountAmount=c.discountAmount)},_setFeesData:function(a,b){var c=a.cart.fees;b.hasFees&&c&&(b.fees.shippingFees=c.shipping&&c.shipping.cost||"",b.fees.taxFees=c.tax&&c.tax.cost||"",b.fees.destination=this._shippingConverter.convertCartDestination(c.destination),"unresolved"==c.destination.type&&(b.preloadShipping=!0))},_populateCartItems:function(a,b){for(var c=0,d=0;d<a.length;d++){var e=this._productConverter.convertFromCartProduct(a[d]);e&&(b.items.push(e),c+=e.quantity,!b.hasProductsOptions&&e.optionsDescription.length&&(b.hasProductsOptions=!0))}return c}})}),define.Class("ecommerce.converters.EcomCategoryConverter",function(a){var b=a;b.binds(["convertCategoriesList"]),b.utilize(["ecommerce.converters.EcomProductItemConverter"]),b.methods({convertCategoriesList:function(a){var b={_type:"ItemsList",items:[]};return b.items=a.map(function(a){return this.convertCategoryItem(a)},this),b},convertCategoryItem:function(a){return{value:a.wixId,label:a.title}}})}),define.Class("ecommerce.converters.EcomOptionListConverter",function(a){var b=a;b.binds(["convertOptionsList"]),b.statics({optionsType:{PRODUCT_SIZE_OPTION:"text",PRODUCT_COLOR_OPTION:"color",PRODUCT_COMBOBOX_OPTION:"combo",PRODUCT_TEXTAREA_OPTION:"simpleText"},NON_OPTION_VALUE:-1}),b.methods({convertOptionsList:function(a){var b={optionType:this.optionsType[a.wixType],id:a.id,title:a.title,isSelectableList:!0,isMandatory:a.isMandatory,selectedValue:this.NON_OPTION_VALUE};switch(b.optionType){case"simpleText":b._type="EcomTextOption",b.text="",b.isSelectableList=!1;break;case"combo":b._type="ComboOptionsList",b.items=a.selectionsList.map(this.convertOption);break;default:b._type="OptionsList",b.items=a.selectionsList.map(function(a){return this.convertOption(a,b.optionType)}.bind(this))}return b},convertOption:function(a,b){var c=a.value;if("color"===b){var d=parseInt(c,10);for(c=d.toString(16);c.length<6;)c="0"+c;c="#"+c}return{_type:"Option",text:c,value:a.id,description:a.description,enabled:!0}}})}),define.Class("ecommerce.converters.EcomProductBundleConverter",function(a){var b=a;b.binds(["convertProductBundleList","convertProductBundle"]),b.utilize(["ecommerce.converters.EcomProductItemConverter","ecommerce.converters.EcomProductMediaConverter","ecommerce.converters.EcomOptionListConverter"]),b.methods({initialize:function(){this._productItemConverter=new this.imports.EcomProductItemConverter,this._optionListConverter=new this.imports.EcomOptionListConverter,this._mediaConverter=new this.imports.EcomProductMediaConverter},convertProductBundleList:function(a){for(var b=a.length,c={},d={_type:"ItemsList",items:[],emptyGalleryLabel:""},e=0;b>e;e++)if(a[e]){var f=this.convertProductBundle(a[e]);d.items.push(f),c[f.id]=f}return{idToItemMap:c,rootItem:d}},convertProductBundle:function(a){var b={_type:"ProductBundle",id:a.id,title:a.title||"<br/>",ribbon:a.ribbon||"",price:a.priceFormatted||"<br/>",retailPrice:a.retailPriceFormatted||"<br/>",options:a.optionsList&&a.optionsList.map(this._optionListConverter.convertOptionsList)||[],outOfStock:!1};return this._addImagesToProduct(a,b),b.productItems=this._getProductItems(a.productsItemsList),b.details=(a.details||"").replace(/\n/g,"<br/>"),b.overview=(a.overview||"").replace(/\n/g,"<br/>"),b.origPrice=b.price,b},_addImagesToProduct:function(a,b){b.imageList=[],b.mediaItems=[];var c=this;a.mediaList.forEach(function(a){var d={_type:"wix:Image",width:a.mediaWidth,height:a.mediaHeight};switch(a.mediaType){case"PHOTO_MEDIA":d.src=a.mediaURL,b.mediaItems.push(d);break;case"VIDEO_MEDIA":d.src=a.mediaIconURL;var e=c._mediaConverter.convertVideoUrl(a.mediaURL);b.mediaItems.push(e);break;default:throw"EcomProductBundleConverter._addImagesToProduct - unsupported media type"}b.imageList.push(d)}),b.mediaItems.length>0?(b.productMedia=b.mediaItems[0],b.currentImage=b.imageList[0]):(b.productMedia={_type:"MediaItem"},b.currentImage=""),b.imagesCount=b.imageList.length},_getProductItems:function(a){for(var b=[],c=0;c<a.length;c++){var d=this._productItemConverter.convertFromProductBundle(a[c]);d&&b.push(d)}return b}})}),define.Class("ecommerce.converters.EcomProductItemConverter",function(a){var b=a;b.statics({MAX_ITEMS:9999}),b.methods({convertFromCartProduct:function(a){var b={_type:"ProductItem",id:a.id,title:a.title,quantity:a.quantity,origQuantity:a.quantity,inventory:a.inventory||this.MAX_ITEMS,optionsDescription:a.selectedOptionsList.map(function(a){return{title:a.title||"",description:a.description||""}}),options:[],price:a.calculatedPrice,isInStock:!0};return b.image=this._createItemImage(a.mediaItem),b.quantityRange={_type:"wix:NumberInRange",value:a.quantity,minValue:1,maxValue:b.inventory},b},convertFromProductBundle:function(a){var b={_type:"ProductItem",id:a.id,title:a.title||"",quantity:1,origQuantity:1,inventory:0,quantityRange:"",optionsDescription:[],options:a.optionSelectionList||a.options,price:a.totalPrice||a.price,image:a.currentImage||"",isInStock:!a.isInventoryManaged||a.inventory>0};return b},_createItemImage:function(a){var b="";if(a&&a.mediaType){var c="";switch(a.mediaType){case"PHOTO_MEDIA":c=a.mediaURL;break;case"VIDEO_MEDIA":c=a.mediaIconURL;break;default:throw"EcomProductItemConverter._createItemImage - unsupported media type"}c&&(b={_type:"wix:Image",src:c,width:a.mediaWidth,height:a.mediaHeight})}return b}})}),define.Class("ecommerce.converters.EcomProductMediaConverter",function(a){var b=a;b.traits(["wysiwyg.viewer.components.traits.VideoUtils"]),b.methods({convertVideoUrl:function(a){var b=this._getVideoDataFromVideoUrl(a);return b&&b.videoId&&b.videoType?(b._type="wix:Video",b):{_type:"MediaItem"}}})}),define.Class("ecommerce.converters.EcomShippingConverter",function(a){var b=a;b.binds(["convertCountriesList"]),b.methods({convertCountriesList:function(a){var b=this._getDestinationDataObj();return b.countries.items=a.map(function(a){return this._convertCountryItem(a)},this),b},convertCartDestination:function(a){var b=null;switch(a.type){case"resolved":b={_type:"PredefinedDestination",name:a.name,shippable:!0};break;case"unresolved":b=this._getDestinationDataObj();break;default:b={_type:"Destination",shippable:!1}}return b},_getDestinationDataObj:function(){return{countries:{_type:"ComboOptionsList",selectedValue:-1,items:[]},regions:{_type:"ComboOptionsList",selectedValue:-1,items:[]},shippable:!0,_type:"AdvancedDestination"}},_convertCountryItem:function(a){var b={_type:"Option",value:a.id,text:a.name,regions:{_type:"ComboOptionsList",selectedValue:-1,items:[]}};return a.regions&&(b.regions.items=a.regions.map(function(a){return{_type:"Option",value:a.id,text:a.name}})),b}})}),define.Class("ecommerce.core.EcomCartAPI",function(a){var b=a;b.inherits("bootstrap.utils.Events"),b.binds(["sendRequestsToMagento","_onRequestSuccess","_onRequestFail"]),b.resources(["W.Commands"]),b.utilize(["ecommerce.core.EcomDataProvider","ecommerce.core.EcomMagentoClient","ecommerce.converters.EcomCartConverter","ecommerce.core.EcomLogger","ecommerce.core.EcomMessagesController","ecommerce.core.EcomCartItemProcessor"]),b.fields({_requestsMap:{}}),b.methods({initialize:function(a,b){this._magentoClient=new this.imports.EcomMagentoClient(a.getStoreId(),b),this._dataProvider=a,this._logger=new this.imports.EcomLogger,this._msgCtrl=new this.imports.EcomMessagesController,this._localizer=b},addProduct:function(a,b){if(this._checkValidParams(a,1,"add")){var c=this._getProductUpdateParams(a,1);c.options=b,this._requestsMap[c.productId]={qty:1,action:"add",func:this._magentoClient.addProductToCart,params:c},this.sendRequestsToMagento()}},updateProduct:function(a){var b=a.getChildValue("id"),c=a.getChildValue("quantityRange").value,d=a.getChildValue("origQuantity");if(this._checkValidParams(b,c,"update",d)){var e=null;e=this._requestsMap[b]&&"update"==this._requestsMap[b].action?this._requestsMap[b].processor:new this.imports.EcomCartItemProcessor,e.updateProductItem(this.sendRequestsToMagento);var f=this._getProductUpdateParams(b,c);this._requestsMap[b]={qty:c,action:"update",func:this._magentoClient.updateProductInCart,params:f,processor:e}}},removeProduct:function(a){if(this._checkValidParams(a,0,"remove")){this._requestsMap[a]&&"update"==this._requestsMap[a].action&&(this._requestsMap[a].processor&&this._requestsMap[a].processor.cancelTimer(),delete this._requestsMap[a]);var b=this._dataProvider.getCartId();this._requestsMap[a]={qty:0,action:"remove",func:this._magentoClient.removeProductFromCart,params:{productId:a,cartId:b}},this.sendRequestsToMagento()}},addRandomProducts:function(){this._magentoClient.getSampleCart(this._dataProvider.getCartId(),this._onRequestSuccess,this._onRequestFail)},sendRequestsToMagento:function(){if(!this._isProductsMapEmpty()){this._showLoadingSign();for(var a in this._requestsMap){var b=this._requestsMap[a],c=b.func;b.isProccessing||(b.isProccessing=!0,b.processor&&b.processor.cancelTimer(),c.apply(this._magentoClient,[b.params,this._onRequestSuccess,this._onRequestFail]))}}},_isProductsMapEmpty:function(){return 0===Object.keys(this._requestsMap).length},_getProductUpdateParams:function(a,b){var c={options:[],quantity:b,productId:a},d=this._dataProvider.getCartId();return d&&d!=this.imports.EcomCartConverter.NULL_CART_ID&&(c.cartId=d),c},_checkValidParams:function(a,b,c,d){var e=this._requestsMap[a];if(e){if(e.qty==b&&e.action==c||"remove"==e.action&&"update"==c)return!1;if(d&&d==b&&"update"==e.action)return e.processor.cancelTimer(),delete this._requestsMap[a],!1}return d&&d==b?!1:!0},_onRequestSuccess:function(a){"true"==a.cart.clearCart?(this._emptyRequestsMap(),this._dataProvider.clearCartId(),this._dataProvider.setCart(null),this._hideLoadingSign(!1)):this._clearMap(a.cart.productId)&&(this._dataProvider.setCart(a),this._hideLoadingSign(!1))},_onRequestFail:function(a,b){switch(a.payload.code){case 1e3:this._msgCtrl.showError(this._localizer.localize("ECOM_SHOPPING_CART_INSUFFICIENT_STOCK_ERR_TITLE"),this._localizer.localize("ECOM_SHOPPING_CART_INSUFFICIENT_STOCK_ERR_DESC"));break;case 1007:this._msgCtrl.showError(this._localizer.localize("ECOM_SHOPPING_CART_UNAVAILABLE_PRODUCT_ERR_TITLE"),this._localizer.localize("ECOM_SHOPPING_CART_UNAVAILABLE_PRODUCT_ERR_DESC"));break;default:this._msgCtrl.showError(this._localizer.localize("ECOM_OOPS_ERR_TITLE"),this._localizer.localize("ECOM_CHECKOUT_API_REQUEST_FAIL_ERR_DESC")+b)}this._emptyRequestsMap(),this._hideLoadingSign(!1),this.fireEvent("EcomCartAPI.requestError")},_clearMap:function(a){return delete this._requestsMap[a],this._isProductsMapEmpty()},_emptyRequestsMap:function(){for(var a in this._requestsMap)this._requestsMap[a].isProccessing&&delete this._requestsMap[a]},_showLoadingSign:function(){var a=this.resources.W.Commands.registerCommand("Apps.Ecommerce.ShowLoadingSign",!0);a.execute()},_hideLoadingSign:function(a){var b=this.resources.W.Commands.registerCommand("Apps.Ecommerce.HideLoadingSign",!0);b.execute(a)}})}),define.Class("ecommerce.core.EcomCartIdHolder",function(a){var b=a;b.resources(["W.Utils","W.Config","W.CookiesManager"]),b.statics({CART_KEY:"eCommerce_"}),b.methods({initialize:function(){var a=this.resources.W.Config.getSiteId();this._cartIdKey=this.CART_KEY+a},setCartId:function(a){this._useLocalStorage()?this.resources.W.Utils.LocalStorageUtils.setItem(this._cartIdKey,a):this._setCartIdCookie(a)},getCartId:function(){var a="";return this._useLocalStorage()?(a=this.resources.W.Utils.LocalStorageUtils.getItem(this._cartIdKey),a||(a=this._getCartIdCookie(),this.resources.W.Utils.LocalStorageUtils.setItem(this._cartIdKey,a))):a=this._getCartIdCookie(),a},clearCartId:function(){this._deleteCartIdCookie(),this.resources.W.Utils.LocalStorageUtils.removeItem(this._cartIdKey)},_getCartIdCookie:function(){var a=this.resources.W.CookiesManager.getCookieParams(this._cartIdKey);return a&&a.length?a[0]:""},_setCartIdCookie:function(a,b){var c=this._cartIdKey+"="+a,d="."+location.host;b=b||"",this.resources.W.CookiesManager.writeCookie(c,b,d,"")},_deleteCartIdCookie:function(){var a=this._getCartIdCookie();if(a){var b=-864e5;this._setCartIdCookie("",b)}},_useLocalStorage:function(){return this.resources.W.Config.env.$isPublicViewerFrame&&-1!=document.domain.indexOf("wix.com")}})}),define.Class("ecommerce.core.EcomCartItemProcessor",function(a){var b=a;b.fields({_delayBeforeUpdate:1500,_isTimerRunning:!1}),b.methods({initialize:function(){},updateProductItem:function(a){this.cancelTimer(),this._timeoutId=setTimeout(a,this._delayBeforeUpdate),this._isTimerRunning=!0},cancelTimer:function(){this._isTimerRunning&&(this._isTimerRunning=!1,clearTimeout(this._timeoutId))}})}),define.Class("ecommerce.core.EcomCheckoutAPI",function(a){var b=a;b.binds(["getCheckoutURL","getExternalCheckoutURL","_getBaseURL","isTemplateViewer"]),b.resources(["W.Config","W.Utils","W.CookiesManager"]),b.utilize(["ecommerce.core.EcomLogger","ecommerce.core.EcomMessagesController"]),b.statics({API_URL_SEGMENT:"/apps/ecommerce/api/checkout?",CHECKOUT_RESULT:"f_checkoutResult",CHECKOUT_ERROR_ID:"f_checkoutErrorId",_isErrorProcessed:!1,_checkoutSuccessUrl:""}),b.methods({initialize:function(a){this._logger=new this.imports.EcomLogger,this._msgCtrl=new this.imports.EcomMessagesController,this._localizer=a,this._processCheckoutError()},getCheckoutURL:function(a,b){var c=this._getBaseURL();return c+=this._getCheckoutURLParams(a,b)},getExternalCheckoutURL:function(a,b){var c=this.resources.W.Config.getServiceTopologyProperty("ecommerceCheckoutUrl");c.match("/$")||(c+="/");var d=this.resources.W.Config.getSiteId();return c+="payment?",c+=this._getCheckoutURLParams(a,b,d)},_getCheckoutURLParams:function(a,b,c){var d="storeId="+b;return d+="&cartId="+a,d+="&metaSiteId="+this.resources.W.Config.getMetaSiteId(),c&&(d+="&siteId="+c),this.resources.W.Config.env.$isPublicViewerFrame&&(d+="&svSession="+this.resources.W.Config.getSvSession()),d+="&successURL="+this._getSuccessURL(),d+="&returnToURL="+this._getCurrentPageURL()},_getCurrentPageURL:function(){var a=this._getWindowURL();return a&&(a=this._removeQueryParam(this.CHECKOUT_RESULT,a),a=this._removeQueryParam(this.CHECKOUT_ERROR_ID,a)),encodeURIComponent(a)},setCheckoutSuccessUrl:function(a){this.$class.prototype._checkoutSuccessUrl=a},getCheckoutSuccessUrl:function(){return this.$class.prototype._checkoutSuccessUrl},_getSuccessURL:function(){return this._checkoutSuccessUrl?encodeURIComponent(this._checkoutSuccessUrl):this._getCurrentPageURL()},isTemplateViewer:function(){return this.resources.W.Config.env.isInTemplatePublicViewer()},_getBaseURL:function(){var a=this.resources.W.Config.getCurrentOrigin();return a+=this.API_URL_SEGMENT},_getWindowURL:function(){return this.resources.W.Config.env.$isPublicViewerFrame?window.location.href:""},_removeQueryParam:function(a,b){var c=this.resources.W.Utils.getQueryParam(a,b);if(c){var d=b.split("?")[1].split("#")[0],e=d.split("&");e.length>1?(e.splice(e.indexOf(a+"="+c),1),b=b.replace(d,e.join("&"))):b=b.replace("?"+d,"")}return b},isNonPremiumSiteOwnerViewer:function(){try{return this.resources.W.Config.env.$isPublicViewerFrame&&(-1!=document.domain.indexOf("wix.com")||-1!=document.domain.indexOf("wixpress.com"))&&this.isSiteOwner()&&!this.isEcomPremium()}catch(a){}return!1},isSiteOwner:function(){var a=window.siteHeader&&window.siteHeader.userId,b=this.resources.W.CookiesManager.getCookie("wixClient");return b&&a?_.find(b.split("|"),function(b){return b==a}):!1},isEcomPremium:function(){var a=this.resources.W.Config.getPremiumFeatures();return a.contains("HasECommerce")},isSiteOwnerOnWixDomain:function(){try{return this.isSiteOwner()&&(-1!=document.domain.indexOf("wix.com")||-1!=document.domain.indexOf("wixpress.com"))}catch(a){return!1}},_processCheckoutError:function(){if(!this._isErrorProcessed){this.$class.prototype._isErrorProcessed=!0;var a=this.resources.W.Utils.getQueryParam(this.CHECKOUT_RESULT);if("cancel"==a){var b=this.resources.W.Utils.getQueryParam(this.CHECKOUT_ERROR_ID);if(b){var c="";if(this.resources.W.Config.env.$isPublicViewerFrame)this._msgCtrl.showError(this._localizer.localize("ECOM_OH_OH_ERR_TITLE"),this._localizer.localize("ECOM_CHECKOUT_API_REQUEST_FAIL_ERR_DESC")+b);else switch(b){case"1008":c=this._localizer.localize("ECOM_GOOGLE_CHECKOUT_PAYMENT_METHOD_ERR_TITLE"),this._msgCtrl.showError(c,this._localizer.localize("ECOM_GOOGLE_CHECKOUT_PAYMENT_METHOD_ERR_DESC"));break;case"1127":c=this._localizer.localize("ECOM_CHECKOUT_PAYMENT_METHOD_NOT_CONFIGURED_ERR_DESC"),this._msgCtrl.showError(this._localizer.localize("ECOM_CHECKOUT_PAYMENT_METHOD_NOT_CONFIGURED_ERR_TITLE"),c);break;default:c=this._localizer.localize("ECOM_CHECKOUT_API_FAILED_ERR_TITLE"),this._msgCtrl.showError(c,this._localizer.localize("ECOM_CHECKOUT_API_FAILED_ERR_DESC")+b)}this._logger.sendEcomError(b,c,"EcomCheckoutAPI","_processCheckoutError")}}}}})}),define.Class("ecommerce.core.EcomCouponAPI",function(a){var b=a;b.binds(["_onRequestSuccess","_onRequestFail"]),b.resources(["W.Commands"]),b.utilize(["ecommerce.core.EcomMagentoClient"]),b.methods({initialize:function(a,b){this._dataProvider=a,this._magentoClient=new this.imports.EcomMagentoClient(a.getStoreId(),b),this._localizer=b},setEcomCoupon:function(a){this._sendRequest(this._magentoClient.setCoupon,{cartId:this._dataProvider.getCartId(),couponCode:a})},clearEcomCoupon:function(){var a=this._dataProvider.getCartId();this._sendRequest(this._magentoClient.clearCoupon,{cartId:a})},_sendRequest:function(a,b){this._showLoadingSign(),a.apply(this._magentoClient,[b,this._onRequestSuccess,this._onRequestFail])},_onRequestSuccess:function(a){this._dataProvider.setCart(a),this._hideLoadingSign(!0)},_onRequestFail:function(a){var b=this.resources.W.Commands.registerCommand("Apps.Ecommerce.CouponError",!0);b.execute(this._localizer.localize("ECOM_COUPON_API_FAILED_ERR_DESC")+" ("+a.payload.code+")."),this._hideLoadingSign(!1)},_showLoadingSign:function(){var a=this.resources.W.Commands.registerCommand("Apps.Ecommerce.ShowLoadingSign",!0);a.execute()},_hideLoadingSign:function(a){var b=this.resources.W.Commands.registerCommand("Apps.Ecommerce.HideLoadingSign",!0);b.execute(a)}})}),define.Class("ecommerce.core.EcomDataProvider",function(a){var b=a;b.resources(["W.Viewer","W.Config","W.Utils","W.Commands","W.CookiesManager"]),b.utilize(["ecommerce.core.EcomMagentoClient","ecommerce.converters.EcomProductBundleConverter","ecommerce.converters.EcomCartConverter","ecommerce.converters.EcomCategoryConverter","ecommerce.converters.EcomShippingConverter"]),b.statics({allCategoriesId:"ALL_CATEGORIES",allProductsId:"ALL_PRODUCTS",allShippingDestinations:"ALL_SHIPPING_DESTINATIONS",paymentSucceededQueryParam:"f_checkoutResult",paymentSucceededQueryParamSuccessValue:"success",cartIdProperty:"cartId",isCartDeletedProperty:"isCartDeleted",DEFAULT_STORE_ID:-1}),b.methods({initialize:function(a){this._environment=a,this._dataFactory=a.getDataItemFactory(),this._typesManager=a.getTypesManager(),this._itemsCache=a.getItemCache(),this._magentoClient=new this.imports.EcomMagentoClient(this.getStoreId(),this._environment.getAppInstance().getLocalizer()),this._productBundleConverter=new this.imports.EcomProductBundleConverter,this._cartConverter=new this.imports.EcomCartConverter,this._categoryConverter=new this.imports.EcomCategoryConverter,this._shippingConverter=new this.imports.EcomShippingConverter;var b=this.resources.W.Config.getSiteId();this._cartIdCookieName="eCommerce_"+b,this._isCreatingCartId=!0,this._runningRequests={},this._deleteCartIfNeeded()},getCategories:function(a){this._getData(this.allCategoriesId,this._magentoClient.getStoreCategories,this._categoryConverter.convertCategoriesList,a)},getProducts:function(a){this._getData(this.allProductsId,this._magentoClient.getStoreProducts,this._productBundleConverter.convertProductBundleList,a)},getCategoryProducts:function(a,b){this._getData(a,this._magentoClient.getCategoryProducts,this._productBundleConverter.convertProductBundleList,b)},getProductBundle:function(a,b){this._getData(a,this._magentoClient.getProduct,this._productBundleConverter.convertProductBundle,b)},getShipping:function(a){this._getData(this.allShippingDestinations,this._magentoClient.getShipping,this._shippingConverter.convertCountriesList,a)},getCart:function(a){var b=this,c=this.getCartId(),d=c?this._magentoClient.getCart:function(a,b){b(null)};c=c||this._cartConverter.NULL_CART_ID,this._getData(c,d,function(a){a&&a.cart&&a.cart.clearCart&&(b._deleteCartCookie(),a=null);var c=b._cartConverter.convertCart(a);return b._setCartId(c.id),c},a)},setCart:function(a){var b=this._cartConverter.convertCart(a),c=function(){var a=!this.getCartId();if(this._setCartId(b.id),this._itemsCache.put(this.getCartId(),b),a){var c=this.resources.W.Commands.registerCommand("Apps.Ecommerce.NewCartCreated",!0);c.execute()}}.bind(this);b.preloadShipping?this.getShipping(function(a){b.fees.destination=a.getValue(),c()}):c()},_fetchShippingData:function(a){if(a.preloadShipping){var b=this._itemsCache.get(this.allShippingDestinations);b&&(a.shipping=b.getValue())}},reloadAllData:function(){this.cleanDataCache();var a=this.resources.W.Commands.registerCommand("Apps.Ecommerce.ReloadAllData",!0);a.execute()},cleanDataCache:function(){this._itemsCache.removeAll();for(var a in this._runningRequests)delete this._runningRequests[a]},getStoreId:function(){return this._environment.getAppInstance().getMagentoStoreId()},isDirtyCartEmpty:function(){var a=this.getCartId();if(!a)return!0;var b=this._itemsCache.get(a);if(b){var c=b.getChildValue("itemsCount");return 0===c}return!1},getCartId:function(){var a=this._itemsCache.get(this.cartIdProperty)&&this._itemsCache.get(this.cartIdProperty).getValue();if(!a){var b=this.resources.W.CookiesManager.getCookieParams(this._cartIdCookieName);b&&b.length&&(a=b[0],this._itemsCache.put(this.cartIdProperty,a))}return a},_setCartId:function(a){a!=this._cartConverter.NULL_CART_ID&&this.getCartId()!=a&&(this.resources.W.Config.env.$isPublicViewerFrame&&this._writeCartCookie(a,""),this._itemsCache.put(this.cartIdProperty,a))},_deleteCartIfNeeded:function(){if(!this._itemsCache.get("isCartDeleted")||!this._itemsCache.get("isCartDeleted").getValue()){var a=this.resources.W.Utils.getQueryParam(this.paymentSucceededQueryParam);a&&a===this.paymentSucceededQueryParamSuccessValue&&this._deleteCartCookie()}},clearCartId:function(){this._itemsCache.remove(this.cartIdProperty),this._deleteCartCookie()},_deleteCartCookie:function(){var a=-864e5;this.resources.W.CookiesManager.writeCookie(this._cartIdCookieName,a,"",""),this._writeCartCookie("",a),this._itemsCache.put("isCartDeleted",!0)},_writeCartCookie:function(a,b){var c=this._cartIdCookieName+"="+a,d="."+location.host;this.resources.W.CookiesManager.writeCookie(c,b,d,"")},_getData:function(a,b,c,d){if(this._runningRequests[a]&&this._runningRequests[a].running)return this._runningRequests[a].callbacks.push(d),void 0;var e=this._itemsCache.get(a);if(e){var f=d.success||d;f(e)}else this._getNonCachedData(a,b,c,d);return e},_getNonCachedData:function(a,b,c,d){this._runningRequests[a]={running:!0},this._runningRequests[a].callbacks=[d];var e,f=this;b(a,function(b){e=c(b),e=f._putItemsIntoCache(a,e),f._runningRequests[a]&&(f._runningRequests[a].running=!1,f._runningRequests[a].callbacks.forEach(function(a){var b=a.success||a;b(e)}),delete f._runningRequests[a])},d.fail)},clearRunningRequests:function(a){this._runningRequests[a]&&(this._runningRequests[a].running=!1,delete this._runningRequests[a])},_putItemsIntoCache:function(a,b){var c;if(b.rootItem){c=this._itemsCache.put(a,b.rootItem);for(var d in b.idToItemMap)this._itemsCache.put(d,b.idToItemMap[d])}else c=this._itemsCache.put(a,b);return c}})}),define.Class("ecommerce.core.EcomLogger",function(a){var b=a;b.statics({type:{error:10,timing:20,funnel:30,userAction:40},category:{editor:1,viewer:2,core:3,server:4},errorCategory:{flashSite:1,htmlSite:2,ecommerceStoreManage:3},issue:{serverEditorError:0,serverViewerError:1,clientEditorError:2,clientViewerError:4},severity:{recoverable:10,warning:20,error:30,fatal:40},ABSENT_STORE_ID_BLOCKED_CHECKOUT:{id:32,desc:"Can't proceed to checkout - no store id found"},PRODUCT_PAGE_VIEWED_BY_USER:{id:33,desc:"Product page viewed by the user"},DATA_SELECTION_DIALOG_GO_TO_MANAGE_STORE:{id:34,desc:"Click on 'Go to manage store' link in data selection dialog"},PRODUCTS_LIST_SELECTED_COLLECTION_CHANGED:{id:35,desc:"Products list selected collection changed"},VIEW_CART_LINK_CHANGED:{id:36,desc:"View cart linked to page"},CHECKOUT_BLOCKED_FOR_NON_PREMIUM_USER:{id:37,desc:"Checkout blocked for non premium user in viewer"},CHECKOUT_BLOCKED_FROM_TEMPLATE_VIEWER:{id:70,desc:"Checkout blocked from template viewer"},CHECKOUT_BLOCKED_FOR_NON_ECOMMERCE_PREMIUM_USER:{id:71,desc:"Checkout blocked for non ecommerce premium user"},USER_PROCEEDED_TO_CHECKOUT:{id:72,desc:"User proceeded to checkout"},CHANGE_SHIPPING_FOR_PRESELECTED_DESTINATION:{id:73,desc:"Change shipping for preselected destination"},CHANGE_SHIPPING_FOR_UNSUPPORTED_DESTINATION:{id:74,desc:"Change shipping for unsupported destination"},PRODUCT_PAGE_VIEW_FROM_REFERRAL:{id:75,desc:"Product page viewed from referral"},USER_SHARED_PRODUCT_PAGE:{id:76,desc:"User shared product page"},PRODUCT_PAGE_ADD_PRODUCT_TO_CART:{id:77,desc:"User added product to cart from product page"},ADD_TO_CART_BTN_ADD_PRODUCT_TO_CART:{id:78,desc:"User added product to cart from add to cart button"},CHECKOUT_MESSAGE_DISPLAYED:{id:79,desc:"Show checkout blocked message for non premium site owner with wix domain in viewer"},CHECKOUT_MESSAGE_UPGRADE_BUTTON_CLICK:{id:81,desc:"User clicked on upgrade button in checkout dialog."},CHECKOUT_MESSAGE_TRY_CHECKOUT_BUTTON_CLICK:{id:82,desc:"User clicked on try checkout button in checkout dialog."},GALLERY_RELOAD_ATTEMPT_AFTER_FIRST_SAVE:{id:83,desc:"Reload gallery data after save with no redirect"},FEEDBACK_MSG_CONTINUE_SHOPPING_BTN_CLICKED:{id:84,desc:"Feedback message - continue shopping button clicked"},FEEDBACK_MSG_CHECKOUT_BTN_CLICKED:{id:85,desc:"Feedback message - checkout button clicked"},ADD_THANK_YOU_PAGE_BUTTON_CLICKED:{id:86,desc:"User clicked 'Add thank you page' button in cart settings panel"},DESIGN_THANK_YOU_PAGE_BUTTON_CLICKED:{id:87,desc:"User clicked 'Design thank you page' button in cart settings panel"},MAGENTO_CLIENT_SUCCESS:{id:88,desc:"Measure success rate of all magento calls"}}),b.methods({initialize:function(){},sendEcomError:function(a,b,c,d){var e=this._getError();e.errorCode=a,LOG.reportError(e,c,d,{src:30,desc:b})},sendEcomEvent:function(a,b){var c=this._getEvent();c.biEventId=a.id,c.desc=a.desc,b=b||{},b.src=30,LOG.reportEvent(c,b)},sendEcomPageEvent:function(a){a&&LOG.reportPageEvent(a)},_getError:function(){return{desc:"Ecommerce - server returned an error",type:this.type.error,category:this.errorCategory.htmlSite,issue:void 0!==window.top?this.issue.serverEditorError:this.issue.serverViewerError,severity:this.severity.error}},_getEvent:function(){return{type:this.type.userAction,category:this.category.viewer,biAdapter:"ec2"}}})}),define.Class("ecommerce.core.EcomMagentoClient",function(a){var b=a;b.binds(["getStoreCategories","getCategoryProducts","getProduct","getCart","getStoreId","getStoreProducts","setCoupon","clearCoupon","getShipping","setShipping"]),b.resources(["W.Config","W.Apps"]),b.utilize(["core.managers.serverfacade.RESTClient","ecommerce.core.EcomLogger","ecommerce.core.EcomMessagesController"]),b.statics({API_URL_SEGMENT:"/apps/ecommerce/api/json",JSONRPC_METHOD:"frontend",actions:{GET_PRODUCT:"dynamicstore_product.getProductById",GET_CATEGORY:"dynamicstore_category.getCategoryProductsByWixId",GET_CATEGORIES:"dynamicstore_website.getStoreCategoriesTree",GET_STORE_PRODUCTS:"dynamicstore_website.getSimpleProducts",GET_CART:"dynamicstore_order_cart.getCart",GET_SAMPLE_CART:"dynamicstore_order_cart.getSampleCart",ADD_PRODUCT_TO_CART:"dynamicstore_order_cart.addProduct",UPDATE_PRODUCT_IN_CART:"dynamicstore_order_cart.updateProduct",REMOVE_PRODUCT_FROM_CART:"dynamicstore_order_cart.removeProduct",ADD_RANDOM_PRODUCT_TO_CART:"dynamicstore_order_cart.addRandomProduct",SET_COUPON:"dynamicstore_order_cart.setCoupon",CLEAR_COUPON:"dynamicstore_order_cart.clearCoupon",SET_SHIPPING:"dynamicstore_order_cart.setDestination",GET_SHIPPING:"dynamicstore_order_cart.getCountries"},errorCodes:{GET_PRODUCT_ERROR:"2020",GET_CATEGORY_ERROR:"2021",GET_CATEGORIES_ERROR:"2022",GET_STORE_PRODUCTS_ERROR:"2023",GET_CART_ERROR:"2024",GET_SAMPLE_CART_ERROR:"2025",ADD_PRODUCT_TO_CART_ERROR:"2026",UPDATE_PRODUCT_IN_CART_ERROR:"2027",REMOVE_PRODUCT_FROM_CART_ERROR:"2028",ADD_RANDOM_PRODUCT_TO_CART_ERROR:"2029",SET_COUPON_ERROR:"2030",CLEAR_COUPON_ERROR:"2031",SET_SHIPPING_ERROR:"2032",GET_SHIPPING_ERROR:"2033"}}),b.methods({initialize:function(a,b){this._restClient=new this.imports.RESTClient,this._storeId=a,this._logger=new this.imports.EcomLogger,this._msgCtrl=new this.imports.EcomMessagesController,this._localizer=b},getStoreCategories:function(a,b,c){this._sendRequest(this._getParams(this.actions.GET_CATEGORIES),b,c,this.errorCodes.GET_CATEGORIES_ERROR)},getStoreProducts:function(a,b,c){this._sendRequest(this._getParams(this.actions.GET_STORE_PRODUCTS),b,c,this.errorCodes.GET_STORE_PRODUCTS_ERROR)},getCategoryProducts:function(a,b,c){var d=this._getParams(this.actions.GET_CATEGORY,{wixId:a}),e=this._getApiUrl()+"&ro=true";this._sendRequest(d,b,c,this.errorCodes.GET_CATEGORY_ERROR,e)},getProduct:function(a,b,c){var d=this._getParams(this.actions.GET_PRODUCT,{productId:a});this._sendRequest(d,b,c,this.errorCodes.GET_PRODUCT_ERROR)},getCart:function(a,b,c){var d=this._getParams(this.actions.GET_CART,{cartId:a});this._sendRequest(d,b,c,this.errorCodes.GET_CART_ERROR)},getSampleCart:function(a,b,c){var d=a?{cartId:a}:{},e=this._getParams(this.actions.GET_SAMPLE_CART,d);this._sendRequest(e,b,c,this.errorCodes.GET_SAMPLE_CART_ERROR)},getStoreId:function(){return this.resources.W.Apps.getAppByPackageName("ecommerce").getMagentoStoreId()},setStoreId:function(a){this._storeId=a},addProductToCart:function(a,b,c){var d=this._getParams(this.actions.ADD_PRODUCT_TO_CART,a);this._sendRequest(d,b,c,this.errorCodes.ADD_PRODUCT_TO_CART_ERROR)},updateProductInCart:function(a,b,c){a=this._getParams(this.actions.UPDATE_PRODUCT_IN_CART,a),this._sendRequest(a,b,c,this.errorCodes.UPDATE_PRODUCT_IN_CART_ERROR)},removeProductFromCart:function(a,b,c){a=this._getParams(this.actions.REMOVE_PRODUCT_FROM_CART,a),this._sendRequest(a,b,c,this.errorCodes.REMOVE_PRODUCT_FROM_CART_ERROR)
},setCoupon:function(a,b,c){a=this._getParams(this.actions.SET_COUPON,a),this._sendRequest(a,b,c,this.errorCodes.SET_COUPON_ERROR)},clearCoupon:function(a,b,c){a=this._getParams(this.actions.CLEAR_COUPON,a),this._sendRequest(a,b,c,this.errorCodes.CLEAR_COUPON_ERROR)},getShipping:function(a,b,c){this._sendRequest(this._getParams(this.actions.GET_SHIPPING),b,c,this.errorCodes.GET_SHIPPING_ERROR)},setShipping:function(a,b,c){a=this._getParams(this.actions.SET_SHIPPING,a),this._sendRequest(a,b,c,this.errorCodes.SET_SHIPPING_ERROR)},_sendRequest:function(a,b,c,d,e){var f=e||this._getApiUrl();this._restClient.jsonrpc(f,this.JSONRPC_METHOD,a,{onSuccess:function(){var a=arguments[0],c=a[0];this._logger.sendEcomEvent(this._logger.MAGENTO_CLIENT_SUCCESS,{c1:c});var d=arguments[1];b(d)}.bind(this,a),onError:function(){var a=arguments[0],b=arguments[1],d=arguments[2];if("object"!=typeof d){var e=arguments[3],f=arguments[4];d={errorCode:e,payload:{code:e,data:f,message:d},errorDescription:d}}var g=a[0];this._logger.sendEcomError(d.payload.code,d.payload.message,"EcomMagentoClient","_onRequestFail:"+g),c?c(d,b):this._msgCtrl.showError(this._localizer.localize("ECOM_SOMETHING_WENT_WRONG_ERR_TITLE"),this._localizer.localize("ECOM_MAGENTO_REQUEST_FAILED_ERR_DESC")+b)}.bind(this,a,d)})},_getApiUrl:function(){var a=this.resources.W.Config.getCurrentOrigin()+this.API_URL_SEGMENT+"?metaSiteId="+this.resources.W.Config.getMetaSiteId();return this.resources.W.Config.env.$isPublicViewerFrame&&(a+="&svSession="+this.resources.W.Config.getSvSession()),a},_getParams:function(a,b){b=b||{};var c=[a];return b.storeId=this.getStoreId(),c.push([b]),c}})}),define.Class("ecommerce.core.EcomMessagesController",function(a){var b=a;b.resources(["W.Config"]),b.binds(["_closeMessageDialog"]),b.methods({showError:function(a,b){if(this.resources.W.Config.env.isInDeactivatedViewer()){var c=window.top.W.EditorDialogs;c.openPromptDialog(a,b,"",c.DialogButtonSet.OK)}else W.MessagesController.showError(a,b)},showCheckoutMsgDialog:function(a,b,c){W.Components.createComponent("ecommerce.viewer.dialogs.EcomCheckoutMessageDialog","ecommerce.skins.viewer.dialogs.EcomCheckoutMessageDialogSkin",null,null,function(d){this._messageBox=d.getViewNode(),this._messageBox.insertInto(document.body),d.addEvent("complete",this._closeMessageDialog),this._messageBox.getLogic().showMessage(a,b,c)}.bind(this))},hideCheckoutMsgDialog:function(){this._messageBox.getLogic().closeView()},_closeMessageDialog:function(){this._messageBox&&(this._messageBox.dispose(),this._messageBox.removeFromDOM(),this._messageBox=null)},showMessage:function(a,b,c){if(this.resources.W.Config.env.isInDeactivatedViewer()){var d=window.top.W.EditorDialogs;d.openPromptDialog(a,b,"",d.DialogButtonSet.OK_CANCEL,c)}else W.MessagesController.showMessage(a,b,c)}})}),define.Class("ecommerce.core.EcomOptionsItemsRelations",function(a){var b=a;b.utilize(["ecommerce.converters.EcomOptionListConverter"]),b.fields({_selectedOptions:[],_optionListsWithoutSelection:[],_possibleOptionsListIndexes:[]}),b.methods({initializeOptionsData:function(a,b){var c=a.getChildByRef("options").getChildren();this._selectableListCount=0;for(var d=0;d<c.length;d++)c[d].getChildValue("isSelectableList")?(this._possibleOptionsListIndexes.push(d),this._optionListsWithoutSelection.push(d),this._cleanSelectedOptionFromData(a,d),this._selectableListCount++):b||c[d].getChildByRef("text").setValue("");a.getChildByRef("possibleOptionsMap")||this.addPossibleOptionsToItemsMapToProduct(a),this._optionListsWithoutSelection.forEach(function(b){this.setOptionsAvailability(b,[],a)},this),a.getChildByRef("price").setValue(a.getChildValue("origPrice"))},selectOption:function(a,b,c){return 0===this._optionListsWithoutSelection.length&&this._selectableListCount>1?this._findExistingProductItem(a,b,c):this._selectSingleOption(a,b,c)},_selectSingleOption:function(a,b,c){var d=null;if(this._cleanPrevSelection(a,b),0>c)return this.initializeOptionsData(a,!0),null;this._selectedOptions.push({listIndex:b,selectedOptionId:c}),d=this._selectedOptions.map(function(a){return a.selectedOptionId}),this._optionListsWithoutSelection.erase(b),this._optionListsWithoutSelection.forEach(function(b){this.setOptionsAvailability(b,d,a),this._cleanSelectedOptionFromData(a,b)},this);var e=null;return 0===this._optionListsWithoutSelection.length&&(e=this.getProductItem(a,d)),e},_findExistingProductItem:function(a,b,c){var d=null;if(this._cleanExistingSelection(a,b),0>c)return this._cleanSelectedOptionFromData(a,b),this._optionListsWithoutSelection.push(b),null;var e=this._selectedOptions.length>0?this._selectedOptions[0].listIndex:b;this.setOptionsAvailability(e,[c],a),this._selectedOptions.push({listIndex:b,selectedOptionId:c}),d=this._selectedOptions.map(function(a){return a.selectedOptionId});var f=this.getProductItem(a,d);return f||this._cleanSelectedOptionFromData(a,e),f},_cleanSelectedOptionFromData:function(a,b){var c=this.imports.EcomOptionListConverter.NON_OPTION_VALUE;a.getChildByRef("options").getChildByIndex(b).getChildByRef("selectedValue").setValue(c)},_cleanPrevSelection:function(a,b){var c=this._selectedOptions.getIndexByField("listIndex",b);if(c>=0)for(var d=this._selectedOptions.length-1;d>=c;d--)this._optionListsWithoutSelection.push(this._selectedOptions[d].listIndex),this._selectedOptions.pop()},_cleanExistingSelection:function(a,b){var c=this._selectedOptions.getIndexByField("listIndex",b);c>=0&&this._selectedOptions.splice(c,1)},addPossibleOptionsToItemsMapToProduct:function(a){if(0===this._possibleOptionsListIndexes.length)return a.addChild(0,"possibleOptionsMap"),void 0;var b=a.getChildByRef("productItems").getValue(),c={};b.forEach(function(a,b){if(a.isInStock){var d=a.options;this._buildOptionsMapForItemRecursively(c,d||[],b)}},this),a.addChild(c,"possibleOptionsMap")},_buildOptionsMapForItemRecursively:function(a,b,c){if(b.length<=1)var d=!0;b.forEach(function(e){if(d)return a[e]=c,void 0;a[e]=a[e]||{};var f=b.clone().erase(e);this._buildOptionsMapForItemRecursively(a[e],f,c)},this)},getProductItem:function(a,b){for(var c=a.getChildByRef("possibleOptionsMap").getValue(),d=0;d<b.length;d++){var e=c[b[d]];if("number"!=typeof e&&!e)return null;c=e}return"number"!=typeof c?null:a.getChildByRef("productItems").getChildByIndex(c)},setOptionsAvailability:function(a,b,c){for(var d=c.getChildByRef("options").getChildByIndex(a),e=c.getChildByRef("possibleOptionsMap").getValue(),f=e,g=0;g<b.length;g++){var h=f[b[g]];if(!h)throw{name:"wrong args passed",message:"one of selected options passed is wrong"};f=h}d.getChildByRef("items").getChildren().forEach(function(a){var b=a.getChildByRef("value").getValue(),c=!!f[b]||0===f[b];a.getChildByRef("enabled").setValue(c)})}})}),define.Class("ecommerce.core.EcomShippingAPI",function(a){var b=a;b.binds(["_onRequestSuccess","_onRequestFail"]),b.resources(["W.Commands"]),b.utilize(["ecommerce.core.EcomMagentoClient","ecommerce.core.EcomLogger","ecommerce.core.EcomMessagesController"]),b.methods({initialize:function(a,b){this._dataProvider=a,this._localizer=b,this._logger=new this.imports.EcomLogger,this._msgCtrl=new this.imports.EcomMessagesController,this._magentoClient=new this.imports.EcomMagentoClient(a.getStoreId(),b)},getShipping:function(a){this._showLoadingSign();var b=function(b){this._hideLoadingSign(!1),a(b)}.bind(this);this._dataProvider.getShipping({success:b,fail:this._onRequestFail})},setShipping:function(a,b){var c=this._dataProvider.getCartId(),d={countryId:a,regionId:b};this._sendRequest(this._magentoClient.setShipping,{cartId:c,destination:d},this._onRequestSuccess)},_sendRequest:function(a,b,c){this._showLoadingSign(),a.apply(this._magentoClient,[b,c,this._onRequestFail])},_onRequestSuccess:function(a){this._dataProvider.setCart(a),this._hideLoadingSign(!0)},_onRequestFail:function(a,b){this._msgCtrl.showError(this._localizer.localize("ECOM_OOPS_ERR_TITLE"),this._localizer.localize("ECOM_CHECKOUT_API_REQUEST_FAIL_ERR_DESC")+b),this._hideLoadingSign(!1)},_showLoadingSign:function(){var a=this.resources.W.Commands.registerCommand("Apps.Ecommerce.ShowLoadingSign",!0);a.execute()},_hideLoadingSign:function(a){var b=this.resources.W.Commands.registerCommand("Apps.Ecommerce.HideLoadingSign",!0);b.execute(a)}})}),define.Class("ecommerce.core.InfrastructureUtils",function(a){var b=a;b.resources(["W.Viewer"]),b.methods({createDataItem:function(a,b){var c=b.getDataItemFactory(),d=b.getTypesManager(),e=c.createDataItem(a);return d.applyDefaults(e),e},getZoomParams:function(a,b,c,d){c=c||"title",d=d||"_iid";var e=b.getChildByRef(d).getValue(),f=a.getValue().map(function(a){return{id:a[d],title:a[c]}}),g=f.getIndexByField("id",e);return{list:f,selectedIndex:g}},getSitePages:function(){var a,b=[{label:"",value:""}],c=this.resources.W.Viewer.getPagesData();if(c){for(a in c){var d=c[a],e=d.get("title");b.push({label:e,value:a})}return b}}})}),define.Class("ecommerce.core.ThankYouPageConfiguration",function(a){var b=a;b.resources(["W.EditorDialogs","W.AppsEditor"]),b.inherits("wysiwyg.editor.utils.PageConfiguration"),b.methods({handlePastePage:function(){var a=this.resources.W.AppsEditor.localize("ECOM_THANK_YOU_PAGE_ADDED_TITLE"),b=this.resources.W.AppsEditor.localize("ECOM_THANK_YOU_PAGE_ADDED_DESCRIPTION");this.resources.W.EditorDialogs.openPromptDialog(a,b,"",this.resources.W.EditorDialogs.DialogButtonSet.OK,function(){})}})}),define.Class("ecommerce.core.ThankYouPageController",function(a){var b=a;b.resources(["W.Viewer","W.Config"]),b.utilize(["ecommerce.core.EcomLogger"]),b.methods({initialize:function(a){this._environment=a,this._localizer=this._environment.getAppInstance().getLocalizer(),this._logger=new this.imports.EcomLogger},getThankYouPageUrl:function(){var a="",b=this._getPageData();if(b){a=this.resources.W.Config.getExternalBaseUrl();var c=b.get("id");if("mainPage"!=c){var d=b.get("pageUriSEO");a+="#!"+d+"/"+c}}return a},updateSettingsPanel:function(a){var b=this._getPageDef(),c=b&&this._getThankYouPageByGUID(b.id),d=c&&c.get("id");d?this._addGoToThankYouPageBtn(a,d):this._addAddThankYouPageBtn(a,b)},_addGoToThankYouPageBtn:function(a,b){var c=this,d=this._localizer.localize("ECOM_GO_TO_THANK_YOU_PAGE_LABEL_PANEL"),e=this._localizer.localize("ECOM_GO_TO_THANK_YOU_PAGE_BTN_PANEL");a.addBreakLine("20px"),a.addButtonField(d,e).addEvent("click",function(){c._logger.sendEcomEvent(c._logger.DESIGN_THANK_YOU_PAGE_BUTTON_CLICKED),c.resources.W.Viewer.goToPage(b)})},_addAddThankYouPageBtn:function(a,b){var c=this,d=this._environment.getAppInstance().getIdInMetasite(),e={appInnerID:d,pageName:b.name,pageId:b.id,showOnCreation:b.showOnCreation},f=this._localizer.localize("ECOM_ADD_THANK_YOU_PAGE_LABEL_PANEL"),g=this._localizer.localize("ECOM_ADD_THANK_YOU_PAGE_BTN_PANEL");a.addBreakLine("20px"),a.addButtonField(f,g).addEvent("click",function(){c._logger.sendEcomEvent(c._logger.ADD_THANK_YOU_PAGE_BUTTON_CLICKED),a.injects().AppsEditor.addSingleApplicationPage(e)})},_getPageData:function(){var a,b=this._getPageDef();return b&&(a=this._getThankYouPageByGUID(b.id)),a},_getPageDef:function(){var a,b=this._environment.getAppPart().getPartDef(),c=b&&b.childPage;if(c){var d=this._environment.getAppInstance();a=d.getPageDefinition(c)}return a},_getThankYouPageByGUID:function(a){var b=this.resources.W.Viewer.getPagesData();if(b)for(var c in b){var d=b[c];if(d.get("appPageId")==a)return d}return null}})}),define.resource("ecommerceDescriptor",{id:"55a88716-958a-4b91-b666-6c1118abdee4",packageName:"ecommerce",name:"eCommerce",version:1,appIcon:"http://4.bp.blogspot.com/-3K1D8kTtZn8/T43eKPyYG5I/AAAAAAAAK3U/TYE2y6QmM-w/s1600/lushfabglam-win-our-$25-visa-gift-card-and-go-shoping7.jpg",pictures:["http://www.stealsanddealstv.com/wp-content/uploads/2012/04/online-retailers-shopping-bags.jpg"],description:"Turns your website into an online store",experiments:{},pages:[{id:"72b9eddf-3e36-4763-92a7-fb39dc9bcb7b",name:"Thank You page",description:"Users will be redirected here after a successful purchase",widgetIcon:"images/product.png",pictures:[],defaultWidth:400,defaultHeight:400,showOnCreation:!0,dontCreatePageOnAppAdd:!0,logic:{display:{type:"wixapps.core.logics.page.PageLogicBase",options:{}},seo:{}},pageSettings:{pageConfigurationType:"ecommerce.core.ThankYouPageConfiguration",canBeDeleted:!0,canBeDuplicated:!1,showSeoSettings:!0,canBeHidden:!0,canBeReordered:!0,canHaveChildren:!1,canBeAddedFromMenu:!1,canBeSetAsHomePage:!0,showBasicSettings:!0}}],parts:[{id:"30b4a102-7649-47d9-a60b-bfd89dcca135",name:"@ECOM_GALLERY_PART_NAME@",description:"@ECOM_GALLERY_PART_DESCRIPTION@",widgetIcon:"images/product.png",pictures:["http://www.packagingsource.com/catalog/images/Metallic-Shopping-Bags.jpg"],defaultWidth:960,defaultHeight:585,helpId:"/node/8915",allowHeightResize:!0,configByFormat:{Mobile:{allowHeightResize:!1}},logic:{display:{type:"ecommerce.parts_logic.EcomProductsListLogic",options:{}},seo:{type:"EComProductsList",options:{suppressSchemaOrg:!0}}},allowZoomCustomization:!0,zoomPartName:"f72a3898-8520-4b60-8cd6-24e4e20d483d",views:["SimpleClean","Polaroid","Gallery","PicsOnly"],customizationsViewMapping:{Default_DefTxtLayout:"Default",SimpleClean_DefTxtLayout:"SimpleClean",Polaroid_DefTxtLayout:"Polaroid",Default_AltTxtLayout:"Default",SimpleClean_AltTxtLayout:"SimpleClean",Polaroid_AltTxtLayout:"Polaroid",DefaultRibbon:"Default",SimpleCleanRibbon:"Default",PolaroidRibbon:"Default",PicsOnlyMouseOver:"Default",PicsOnly:"Default",Default:"Default",SimpleClean:"SimpleClean",Polaroid:"Polaroid",Gallery:"Gallery",GalleryRibbon:"ProductGalleryRibbon"}},{id:"adbeffec-c7df-4908-acd0-cdd23155a817",name:"@ECOM_SHOPPING_CART_PART_NAME@",description:"@ECOM_SHOPPING_CART_PART_DESCRIPTION@",widgetIcon:"images/shoppingcart.png",pictures:[],defaultWidth:500,defaultHeight:150,helpId:"/node/8916",logic:{display:{type:"ecommerce.parts_logic.EcomCartLogic",options:{}},seo:{type:"StaticHtml",options:{html:"<h5>Shopping Cart</h5><span>Your shopping cart is empty</span>"}}},views:["Full"]},{id:"f72a3898-8520-4b60-8cd6-24e4e20d483d",name:"@ECOM_PRODUCT_PAGE_PART_NAME@",description:"@ECOM_PRODUCT_PAGE_PART_DESCRIPTION@",widgetIcon:"images/menu-icon.png",pictures:[],defaultHeight:600,helpId:"/node/8915",logic:{display:{type:"ecommerce.parts_logic.ProductBundleLogic",options:{}},seo:{type:"EComProductBundle",options:{}}},zoomParams:{urlIdPrefix:"prd",urlTitle:"product",itemIdParamName:"itemId"},mobileZoomExtraParams:{hideNextPrevBtns:!0,enableSwipe:!1,enableScroll:!0,disableRerender:!0,zoomPartSkin:"ecommerce.skins.mcom.MobileZoomPartSkin"},views:["Zoom","ZoomImageCenterWide","ZoomImageCenter","ZoomImageLeft","ZoomGalleryLeft"],zoomCustomizations:{types:["ProductBundle"],styleEditLabel:" ",typeSelectionLabel:" ",itemNavigationLabel:"@ECOM_ZOOM_NAVIGATION_LABEL@",prevBtnLabel:"@ECOM_ZOOM_NAVIGATION_PREV_BTN_LABEL@",nextBtnLabel:"@ECOM_ZOOM_NAVIGATION_NEXT_BTN_LABEL@"}},{id:"c029b3fd-e8e4-44f1-b1f0-1f83e437d45c",name:"@ECOM_VIEW_CART_PART_NAME@",description:"@ECOM_VIEW_CART_PART_DESCRIPTION@",widgetIcon:"images/viewcart.png",pictures:[],defaultWidth:200,defaultHeight:50,allowHeightResize:!0,helpId:"/node/8918",logic:{display:{type:"ecommerce.parts_logic.EcomViewCartLogic",options:{}},seo:{type:"StaticHtml",options:{html:"<button type='button' onclick='javascript:foo()'>View Cart</button>"}}},views:["General"]},{id:"cd54a28f-e3c9-4522-91c4-15e6dd5bc514",name:"@ECOM_CHECKOUT_BUTTON_PART_NAME@",description:"@ECOM_CHECKOUT_BUTTON_PART_DESCRIPTION@",widgetIcon:"images/checkout.png",pictures:[],defaultWidth:200,defaultHeight:50,allowHeightResize:!0,helpId:"/node/8917",logic:{display:{type:"ecommerce.parts_logic.EcomCheckoutButtonLogic",options:{}},seo:{type:"StaticHtml",options:{html:"<button type='button' onclick='javascript:foo()'>Checkout</button>"}}},views:["Compact"]},{id:"c614fb79-dbec-4ac7-b9b0-419669fadecc",name:"@ECOM_ADD_TO_CART_BUTTON_PART_NAME@",description:"@ECOM_ADD_TO_CART_BUTTON_PART_DESCRIPTION@",widgetIcon:"images/checkout.png",pictures:[],defaultWidth:200,defaultHeight:50,allowHeightResize:!0,helpId:"/node/9957",logic:{display:{type:"ecommerce.parts_logic.EcomAddToCartButtonLogic",options:{}},seo:{type:"StaticHtml",options:{html:"<button type='button' onclick='javascript:foo()'>Add To Cart</button>"}}},views:["Simple"]},{id:"5fca0e8b-a33c-4c18-b8eb-da50d7f31e4a",name:"@ECOM_JOINED_CART_PART_NAME@",description:"@ECOM_JOINED_CART_PART_DESCRIPTION@",widgetIcon:"images/shoppingcart.png",pictures:[],defaultWidth:800,defaultHeight:150,minWidth:725,helpId:"/node/8916",childPage:"72b9eddf-3e36-4763-92a7-fb39dc9bcb7b",configByFormat:{Mobile:{minWidth:0}},logic:{display:{type:"ecommerce.parts_logic.EcomJoinedCartLogic",options:{}},seo:{type:"EComJoinedCartLogic",options:{}}},forceFlexCompute:!0,views:["Joined"]},{id:"ae674d74-b30b-47c3-aba0-0bd220e25a69",name:"Coupon",description:"Add coupons to your cart",widgetIcon:"images/shoppingcart.png",pictures:[],defaultWidth:220,defaultHeight:150,helpId:"/node/8916",logic:{display:{type:"ecommerce.parts_logic.EcomCouponLogic",options:{}},seo:{type:"StaticHtml",options:{}}},views:["Summary"]},{id:"fbd55289-7136-4c7d-955c-3088974c1f93",name:"Shipping",description:"Add shipping to your cart",widgetIcon:"images/shoppingcart.png",pictures:[],defaultWidth:220,defaultHeight:150,helpId:"/node/8916",logic:{display:{type:"ecommerce.parts_logic.EcomShippingLogic",options:{}},seo:{type:"StaticHtml",options:{}}},views:["Selectable"]}],viewDescriptions:[{id:"General",name:"@ECOM_VIEW_CART_GENERAL_VIEW_NAME@",description:"Will display data",icon:"generalviews/matrix.png"},{id:"Simple",name:"@ECOM_ADD_TO_CART_BUTTON_SIMPLE_VIEW_NAME@",description:"Will display data",icon:"generalviews/matrix.png"},{id:"Full",name:"@ECOM_SHOPPING_CART_FULL_VIEW_NAME@",description:"Will be used to display populated cart component",icon:"generalviews/matrix.png"},{id:"Empty",name:"@ECOM_SHOPPING_CART_EMPTY_VIEW_NAME@",description:"Will be used to display empty cart",icon:"generalviews/matrix.png"},{id:"ZoomGalleryLeft",name:"@ECOM_PRODUCT_PAGE_GALLERY_LEFT_VIEW_NAME@",description:"Will display data",icon:"images/thumbnails/productBundle/galleryLeft.png"},{id:"ZoomImageCenterWide",name:"@ECOM_PRODUCT_PAGE_CENTER_WIDE_VIEW_NAME@",description:"Will display data",icon:"images/thumbnails/productBundle/centerWide.png"},{id:"ZoomImageCenter",name:"@ECOM_PRODUCT_PAGE_CENTER_VIEW_NAME@",description:"Will display data",icon:"images/thumbnails/productBundle/center.png"},{id:"ZoomImageLeft",name:"@ECOM_PRODUCT_PAGE_IMAGE_LEFT_VIEW_NAME@",description:"ECOM_PRODUCT_PAGE_IMAGE_LEFT_VIEW_NAME",icon:"images/thumbnails/productBundle/imageLeft.png"},{id:"Zoom",name:"@ECOM_PRODUCT_PAGE_CLASSIC_VIEW_NAME@",description:"Will display data",icon:"images/thumbnails/productBundle/classic.png"},{id:"Gallery",name:"@ECOM_GALLERY_GALLERY_VIEW_NAME@",description:"Will be used to display empty cart",icon:"generalviews/gallery.png"},{id:"Default",name:"@ECOM_GALLERY_DEFAULT_VIEW_NAME@",description:"Default",icon:"generalviews/gallery.png"},{id:"SimpleClean",name:"@ECOM_GALLERY_SIMPLE_CLEAN_VIEW_NAME@",description:"Simple and Clean",icon:"generalviews/clean_simple.png"},{id:"Polaroid",name:"@ECOM_GALLERY_POLAROID_VIEW_NAME@",description:"Polaroid",icon:"generalviews/polaroid.png"},{id:"PicsOnly",name:"@ECOM_GALLERY_COLOR_HOVER_VIEW_NAME@",description:"PicsOnly",icon:"generalviews/hover_gallery.png"},{id:"Joined",name:"@ECOM_JOINED_CART_JOINED_VIEW_NAME@",description:"Will be used to display empty cart",icon:"generalviews/matrix.png"},{id:"Summary",name:"Empty",description:"Will be used to display empty cart",icon:"generalviews/matrix.png"},{id:"Selectable",name:"Empty",description:"Will be used to display empty cart",icon:"generalviews/matrix.png"}],links:[{name:"ProductCheckout",type:"Ecommerce.Product"},{name:"ProductDescription",type:"Ecommerce.Product"}],permissions:[],collections:[],types:[{_iid:"ItemsList",_type:"wix:Type",fields:[{name:"items",type:"Array<ProductBundle>",defaultValue:[]},{name:"emptyGalleryLabel",type:"String",defaultValue:""}]},{_iid:"ProductBundle",_type:"wix:Type",fields:[{name:"title",type:"String",defaultValue:"<br/>"},{name:"id",type:"Number"},{name:"productItems",type:"Array<ProductItem>"},{name:"image",type:"wix:Image"},{name:"imageList",type:"Array<wix:Image>"},{name:"mediaList",type:"Array<wix:Object>"},{name:"imagesCount",type:"Number"},{name:"currentImage",type:"wix:Image"},{name:"productMedia",type:"MediaItem"},{name:"overview",type:"String"},{name:"ribbon",type:"String"},{name:"price",type:"String",defaultValue:"<br/>"},{name:"retailPrice",type:"String",defaultValue:"<br/>"},{name:"details",type:"String",defaultValue:""},{name:"detailsTitle",type:"String",computed:!0},{name:"options",type:"Array<OptionItem>"},{name:"outOfStock",type:"Boolean"}]},{_iid:"MediaItem",_type:"wix:Type",fields:[]},{_iid:"ImageMedia",_type:"wix:Type",baseTypes:["MediaItem"],fields:[{name:"image",type:"wix:Image"}]},{_iid:"VideoMedia",_type:"wix:Type",baseTypes:["MediaItem"],fields:[{name:"video",type:"wix:Video"}]},{_iid:"Cart",_type:"wix:Type",fields:[{name:"items",type:"Array<ProductItem>"},{name:"itemsCount",type:"Number"},{name:"totalPrice",type:"String"},{name:"cartDisplayType",type:"String",computed:!0},{name:"emptyCartImage",type:"wix:Image",defaultValue:{_type:"wix:Image",title:"@ECOM_SHOPPING_CART_EMPTY_CART_IMAGE_TITLE@",src:"images/empty_cart.png",width:70,height:60}},{name:"subTotal",type:"String"},{name:"hasCoupon",type:"Boolean"},{name:"coupon",type:"Coupon"},{name:"hasFees",type:"Boolean"},{name:"fees",type:"Fees"},{name:"viewCartLink",type:"wix:Link",computed:!0},{name:"hasProductsOptions",type:"Boolean"}]},{_iid:"JoinedCart",_type:"wix:Type",fields:[{name:"cart",type:"Cart"},{name:"checkout",type:"CheckoutButton"}]},{_iid:"Coupon",_type:"wix:Type",fields:[{name:"couponName",type:"String"},{name:"discountAmount",type:"String"},{name:"couponCode",type:"String",defaultValue:""},{name:"validationMessage",type:"String",defaultValue:"@ECOM_COUPON_DEFAULT_VALIDATION_MESSAGE@"}]},{_iid:"Fees",_type:"wix:Type",fields:[{name:"destination",type:"Destination"},{name:"shippingFees",type:"String"},{name:"taxFees",type:"String"}]},{_iid:"Destination",_type:"wix:Type",fields:[{name:"shippable",type:"Boolean",defaultValue:!1}]},{_iid:"PredefinedDestination",_type:"wix:Type",baseTypes:["Destination"],fields:[{name:"name",type:"String"},{name:"shippable",type:"Boolean",defaultValue:!0}]},{_iid:"AdvancedDestination",_type:"wix:Type",baseTypes:["Destination"],fields:[{name:"countries",type:"ComboOptionsList"},{name:"regions",type:"ComboOptionsList"},{name:"shippable",type:"Boolean",defaultValue:!0}]},{_iid:"Tax",_type:"wix:Type",fields:[{name:"cost",type:"String"}]},{_iid:"CheckoutButton",_type:"wix:Type",fields:[{name:"checkoutButtonLink",type:"wix:Link",computed:!0}]},{_iid:"ProductItem",_type:"wix:Type",fields:[{name:"id",type:"Number"},{name:"quantityRange",type:"wix:NumberInRange"},{name:"title",type:"String"},{name:"image",type:"wix:Image"},{name:"price",type:"String"},{name:"optionsDescription",type:"Array<wix:Object>"}]},{_iid:"OptionItem",_type:"wix:Type",fields:[{name:"title",type:"String"}]},{_iid:"EcomTextOption",_type:"wix:Type",baseTypes:["OptionItem"],fields:[{name:"selectedValue",type:"Number"},{name:"text",type:"String",validations:[{func:"ne",params:[""]}]}]},{_iid:"ComboOptionsList",_type:"wix:Type",baseTypes:["OptionItem"],fields:[{name:"items",type:"Array<Option>"},{name:"selectedValue",type:"Number",validations:[{func:"ne",params:[-1]}]}]},{_iid:"OptionsList",_type:"wix:Type",baseTypes:["OptionItem"],fields:[{name:"items",type:"Array<Option>"},{name:"selectedValue",type:"Number",validations:[{func:"ne",params:[-1]}]}]},{_iid:"Option",_type:"wix:Type",fields:[{name:"text",type:"String"},{name:"value",type:"Number"}]}],seoHints:{ProductBundle:{so:"schema.org/Product","so.offers":"schema.org/Offer",fields:{title:{so:"name",html:"title",og:"title"},overview:{so:"description",html:"description",og:"description"},currentImage:{so:"image",og:"image"},price:{so:"offers.price"}}}},views:[{name:"InsideSliderGallery",forType:"ProductBundle",data:"imageList",comp:{name:"SliderGallery",skin:"wysiwyg.viewer.skins.galleryselectableslider.SelectableSliderGalleryDefaultSkin",events:{imageSelected:"image-selected"},showAutoplay:"false",loop:"false",showCounter:"false",expandEnabled:"false",isStyleEditable:"false",cssClass:"sliderGalleryHoverStateCursor",css:{height:"100%",width:"100%"}},stylesheet:[{"div.sliderGalleryHoverStateCursor div > div":{cursor:"pointer !important"}}]},{forType:"ItemsList",name:"Gallery",comp:{name:"Stack",items:[{layout:{width:"100%",height:"100%"},comp:{name:"VBox",items:[{id:"gallery",data:"items",comp:{name:"Gallery",columns:4,rows:2,gap:22,transition:"horizSwipeAllAtOnce",expandEnabled:"false",styleNS:"contentGallery"},layout:{"box-flex":1}}]}},{data:"emptyGalleryLabel",comp:{name:"SwitchBox",cases:{"":[{data:"emptyGalleryLabel",comp:{name:"VBox",hidden:!0}}],"default":[{data:"emptyGalleryLabel",comp:{name:"Label"}}]}}}]},customizations:[{priority:8,fieldId:"gallery",key:"comp.rows",input:{name:"slider",label:"@ECOM_GALLERY_ROWS_LABEL_PANEL@",minVal:1,maxVal:10,updateOnDragEnd:!0}},{priority:7,fieldId:"gallery",key:"comp.columns",input:{name:"slider",label:"@ECOM_GALLERY_COLUMNS_LABEL_PANEL@",minVal:1,maxVal:10,updateOnDragEnd:!0}},{priority:5,fieldId:"gallery",key:"comp.gap",input:{name:"slider",label:"@ECOM_GALLERY_CELLS_MARGINS_PANEL@",minVal:0,maxVal:200}}]},{forType:"ItemsList",name:["Default","SimpleClean","Polaroid"],comp:{name:"Stack",items:[{layout:{width:"100%",height:"100%"},comp:{name:"VBox",items:[{id:"gallery",data:"items",comp:{name:"Gallery",columns:4,rows:2,gap:20,transition:"horizSwipeAllAtOnce",expandEnabled:"false",styleNS:"productGallery"},layout:{"box-flex":1}}]}},{data:"emptyGalleryLabel",comp:{name:"SwitchBox",cases:{"":[{data:"emptyGalleryLabel",comp:{name:"VBox",hidden:!0}}],"default":[{data:"emptyGalleryLabel",comp:{name:"Label"}}]}}}]},customizations:[{priority:8,fieldId:"gallery",key:"comp.rows",input:{name:"slider",label:"@ECOM_GALLERY_ROWS_LABEL_PANEL@",minVal:1,maxVal:10,updateOnDragEnd:!0}},{priority:7,fieldId:"gallery",key:"comp.columns",input:{name:"slider",label:"@ECOM_GALLERY_COLUMNS_LABEL_PANEL@",minVal:1,maxVal:10,updateOnDragEnd:!0}},{priority:5,fieldId:"gallery",key:"comp.gap",input:{name:"slider",label:"@ECOM_GALLERY_CELLS_MARGINS_PANEL@",minVal:0,maxVal:200}}]},{name:"Gallery",forType:"ProductBundle",vars:{hover:!1,outOfStockMsg:"@ECOM_GALLERY_OUT_OF_STOCK_TEXT@"},comp:{name:"ZoomLink",cssClass:"wixAppsLink",hoverVar:"hover",listExpression:"parent.parent.items",idField:"id",titleField:"title",items:[{comp:{name:"ImageWithRibbonFill"},layout:{spacerAfter:8,"box-flex":1}},{value:{$expr:"if(String.isEmpty($outOfStockMsg),'@ECOM_GALLERY_OUT_OF_STOCK_TEXT@',$outOfStockMsg)"},layout:{"text-align":"center","padding-bottom":"4px"},id:"outOfStockTitle",comp:{name:"Label",cssClass:"txtHoverColorOutOfStock",hidden:{$expr:"not(and($hover, outOfStock, $expOutOfStockOpen))"}}},{data:"title",layout:{"text-align":"center","padding-bottom":"4px"},comp:{name:"Label",hidden:{$expr:"and(outOfStock, $expOutOfStockOpen, $hover)"}}},{comp:{name:"HBox",items:[{comp:{name:"HBox",items:[{data:"price",comp:{name:"Label",cssClass:"salePrice"}}]},layout:{spacerBefore:"*",spacerAfter:"*","text-align":"right"}}]}},{data:"retailPrice",comp:{name:"Label",lineThrough:!0},layout:{"text-align":"center"}}]},layout:{"padding-bottom":"8px"},customizations:[]},{name:"GalleryRibbon",forType:"String",comp:{name:"VBox",css:{display:"-webkit-box !important"},items:[{layout:{width:"100%","margin-top":"12%"},id:"ribbonContainer",comp:{name:"Area",items:[{comp:{name:"HBox",items:[{comp:{name:"HSpacer",size:"*"}},{comp:{name:"VBox",items:[{id:"ribbonSpacer",comp:{name:"VSpacer",size:6}},{comp:{name:"Label"},layout:{padding:"0 5px","white-space":"nowrap","text-overflow":"ellipsis","text-align":"center",color:"#fff"}},{id:"ribbonSpacer",comp:{name:"VSpacer",size:6}}]},layout:{"margin-top":"0px"}},{comp:{name:"HSpacer",size:"*"}}]}}]}}]},layout:{width:"100%","margin-top":"0"},customizations:[{fieldId:"ribbonSpacer",key:"comp.size",input:{name:"slider",label:"@ECOM_GALLERY_RIBBON_PADDING_PANEL@",minVal:0,maxVal:60}},{fieldId:"ribbonContainer",key:"layout.margin-top",input:{unit:"%",name:"slider",label:"@ECOM_GALLERY_RIBBON_POSITION_PANEL@",minVal:0,maxVal:300}}]},{name:"Full",forType:"Cart",comp:{name:"Stack",items:[{id:"cartTable",comp:{name:"Table",rowsDataArray:"items",columns:[{item:{comp:{name:"Css",items:[{data:"image",comp:{name:"Image"},layout:{margin:"5px",width:55,height:55}}]},styleData:{width:"77px"}}},{item:{comp:{name:"VBox",width:150,items:[{data:"title",comp:{name:"Label"}},{data:"optionsDescription",comp:{name:"VerticalList",styleNS:"ecomOptionsList",isStyleEditable:"false",templates:{item:{comp:{name:"OptDesc"}}}}}]}}},{item:{data:"quantityRange",styleData:{width:"50px"},comp:{name:"NumericStepper",events:{inputChanged:"qty-input-changed",blur:"qty-input-blur",keyup:"qty-input-keyup",validationFailed:"qty-invalid-value"}}}},{item:{data:"price",comp:{name:"Label"},styleData:{width:"70px"}},footer:{data:"itemsCount",comp:{name:"SwitchBox",cases:{"default":[{data:"totalPrice",comp:{name:"Label"}}],0:[{data:"totalPrice",comp:{name:"VBox",hidden:!0}}]}},layout:{width:"100%"}}},{item:{comp:{name:"Css",items:[{comp:{name:"Button",label:"x",styleNS:"ecomRemoveFromCart",events:{mousedown:"button-down"}},layout:{width:20,height:20}}]},styleData:{width:"30px"}}}],minHeight:"150"}},{data:"itemsCount",comp:{name:"SwitchBox",cases:{"default":[{data:"itemsCount",comp:{name:"VBox",hidden:!0}}],0:[{comp:{name:"NoData"}}]}},layout:{width:"100%",height:"100%"}}]},customizations:[{fieldId:"cartTable",key:"comp.minHeight",input:{name:"slider",label:"@ECOM_SHOPPING_CART_MIN_HEIGHT_PANEL@",minVal:150,maxVal:1e3}}]},{name:"OptDesc",forType:"wix:Object",comp:{name:"HBox",items:[{data:"title",comp:{name:"SwitchBox",cases:{"":[{data:"title",comp:{name:"VBox",hidden:!0}}],"default":[{data:"title",comp:{name:"Label",postfix:":&nbsp;",style:"Body M"}}]}}},{data:"description",comp:{name:"Label",style:"Body M"}}]}},{name:"General",forType:"Cart",vars:{cartText:"",buttonType:""},id:"viewCartLink",data:"viewCartLink",comp:{name:"Button",margin:1,align:"center",styleNS:"ecomViewCart",label:{$expr:"String.concat($cartText, if(eq($buttonType,'itemsCount'), itemsCount, totalPrice))"}},layout:{width:"100%",height:"100%"},customizations:[{priority:20,fieldId:"vars",key:"buttonType",format:"*",input:{name:"combobox",label:"@ECOM_VIEW_CART_SELECT_TOTAL_LABEL_PANEL@",spaceAfter:"10",options:[{label:"@ECOM_VIEW_CART_DISPLAY_TOTAL_ITEMS_OPT_PANEL@",value:"itemsCount"},{label:"@ECOM_VIEW_CART_DISPLAY_TOTAL_PRICE_OPT_PANEL@",value:"totalPrice"}]}},{priority:10,fieldId:"vars",key:"cartText",format:"*",input:{name:"textfield",label:"@ECOM_VIEW_CART_BUTTON_TEXT_LABEL_PANEL@",spaceAfter:"10"}},{priority:1,fieldId:"viewCartLink",format:"*",key:"comp.margin",input:{name:"slider",label:"@ECOM_MARGIN_LABEL_PANEL@",minVal:0,maxVal:100}},{priority:2,fieldId:"viewCartLink",format:"*",key:"comp.align",input:{name:"radioimages",label:"@ECOM_ALIGNMENT_LABEL_PANEL@",options:[{value:"left",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/left.png"},{value:"center",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/center.png"},{value:"right",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/right.png"}]}}]},{name:"Simple",forType:"String",comp:{name:"Button",margin:1,align:"center",styleNS:"ecomAddToCart",events:{click:"add-product-to-cart"}},layout:{width:"100%",height:"100%"},customizations:[{priority:1,fieldId:"*",format:"*",key:"comp.margin",input:{name:"slider",label:"@ECOM_MARGIN_LABEL_PANEL@",minVal:0,maxVal:100}},{priority:2,fieldId:"*",format:"*",key:"comp.align",input:{name:"radioimages",label:"@ECOM_ALIGNMENT_LABEL_PANEL@",options:[{value:"left",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/left.png"},{value:"center",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/center.png"},{value:"right",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/right.png"}]}}]},{name:"General",forType:"Cart",data:"viewCartLink",vars:{cartText:"",buttonType:""},format:"Mobile",comp:{name:"Button",margin:1,align:"center",styleNS:"ecomViewCart",label:{$expr:"String.concat($cartText, if(eq($buttonType,'itemsCount'), itemsCount, totalPrice))"}},layout:{width:"100%",height:"100%"}},{name:"Simple",forType:"String",format:"Mobile",comp:{name:"Button",margin:1,align:"center",styleNS:"ecomAddToCart",events:{click:"add-product-to-cart"}},layout:{width:"100%",height:"100%"}}].concat([{name:["Default_DefTxtLayout","SimpleClean_DefTxtLayout","Polaroid_DefTxtLayout"],forType:"ProductBundle",vars:{outOfStockMsg:"@ECOM_GALLERY_OUT_OF_STOCK_TEXT@"},data:"$text-alignment",comp:{name:"SwitchBox",cases:{left:[{comp:{name:"VBox",items:[{id:"outOfStockTitle",value:{$expr:"if(String.isEmpty($outOfStockMsg),'@ECOM_GALLERY_OUT_OF_STOCK_TEXT@',$outOfStockMsg)"},comp:{name:"ClippedParagraph2",hidden:{$expr:"not(and($hover, outOfStock, $expOutOfStockOpen))"},cssClass:"txtHoverColorOutOfStock","max-chars":"150",pack:"top"},layout:{"text-align":"left"}},{id:"desc",data:"title",comp:{name:"Label",hidden:{$expr:"and(outOfStock, $expOutOfStockOpen, $hover)"},cssClass:"txtHoverColor",singleLine:"true"},layout:{"text-align":"left"}},{id:"retailPriceSwitch",data:"retailPrice",comp:{name:"SwitchBox",cssClass:"txtHoverColor",cases:{"default":[{comp:{name:"HBox",items:[{comp:{name:"HBox",items:[{data:"retailPrice",comp:{name:"Label",cssClass:"retail",lineThrough:"true"}},{comp:{name:"HSpacer",size:"5"}},{data:"price",comp:{name:"Label",cssClass:"salePrice"}}]},layout:{spacerBefore:0,spacerAfter:"*","text-align":"left"}}]}}],"<br/>":[{comp:{name:"HBox",items:[{id:"text",data:"price",comp:{name:"Label",cssClass:"price"}}],css:{"text-align":"left"}}}]}}}]}}],center:[{comp:{name:"VBox",items:[{id:"outOfStockTitle",value:{$expr:"if(String.isEmpty($outOfStockMsg),'@ECOM_GALLERY_OUT_OF_STOCK_TEXT@',$outOfStockMsg)"},comp:{name:"ClippedParagraph2",hidden:{$expr:"not(and($hover, outOfStock, $expOutOfStockOpen))"},cssClass:"txtHoverColorOutOfStock","max-chars":"150",pack:"top"},layout:{"text-align":"center"}},{id:"desc",data:"title",comp:{name:"Label",hidden:{$expr:"and(outOfStock, $expOutOfStockOpen, $hover)"},cssClass:"txtHoverColor",singleLine:"true"},layout:{"text-align":"center"}},{id:"retailPriceSwitch",data:"retailPrice",comp:{name:"SwitchBox",cssClass:"txtHoverColor",cases:{"default":[{comp:{name:"HBox",items:[{comp:{name:"HBox",items:[{data:"retailPrice",comp:{name:"Label",cssClass:"retail",lineThrough:"true"}},{comp:{name:"HSpacer",size:"10"}},{data:"price",comp:{name:"Label",cssClass:"salePrice"}}]},layout:{spacerBefore:"*",spacerAfter:"*"}}]}}],"<br/>":[{comp:{name:"HBox",items:[{id:"text",data:"price",comp:{name:"Label",cssClass:"price"},layout:{spacerBefore:"*",spacerAfter:"*"}}],css:{"text-align":"center"}}}]}}}]}}],right:[{comp:{name:"VBox",items:[{id:"outOfStockTitle",value:{$expr:"if(String.isEmpty($outOfStockMsg),'@ECOM_GALLERY_OUT_OF_STOCK_TEXT@',$outOfStockMsg)"},comp:{name:"ClippedParagraph2",hidden:{$expr:"not(and($hover, outOfStock, $expOutOfStockOpen))"},cssClass:"txtHoverColorOutOfStock","max-chars":"150",pack:"top"},layout:{"text-align":"right"}},{id:"desc",data:"title",comp:{name:"Label",hidden:{$expr:"and(outOfStock, $expOutOfStockOpen, $hover)"},cssClass:"txtHoverColor",singleLine:"true"},layout:{"text-align":"right"}},{id:"retailPriceSwitch",data:"retailPrice",comp:{name:"SwitchBox",cssClass:"txtHoverColor",cases:{"default":[{comp:{name:"HBox",items:[{comp:{name:"HBox",items:[{data:"retailPrice",comp:{name:"Label",cssClass:"retail",lineThrough:"true"}},{comp:{name:"HSpacer",size:"10"}},{data:"price",comp:{name:"Label",cssClass:"salePrice"}}]},layout:{spacerBefore:0,spacerAfter:"*","text-align":"right"}}]}}],"<br/>":[{comp:{name:"HBox",items:[{id:"text",data:"price",comp:{name:"Label",cssClass:"price"},layout:{spacerBefore:0,spacerAfter:"*"}}],css:{"text-align":"right"}}}]}}}],css:{direction:"rtl"}}}]}},customizations:[]},{name:["Default_AltTxtLayout","SimpleClean_AltTxtLayout","Polaroid_AltTxtLayout"],forType:"ProductBundle",vars:{outOfStockMsg:"@ECOM_GALLERY_OUT_OF_STOCK_TEXT@"},data:"$text-alignment",comp:{name:"SwitchBox",cases:{left:[{comp:{name:"HBox",items:[{id:"outOfStockTitle",value:{$expr:"if(String.isEmpty($outOfStockMsg),'@ECOM_GALLERY_OUT_OF_STOCK_TEXT@',$outOfStockMsg)"},comp:{name:"ClippedParagraph2",hidden:{$expr:"not(and($hover, outOfStock, $expOutOfStockOpen))"},cssClass:"txtHoverColorOutOfStock","max-chars":"150",pack:"top"},layout:{"box-flex":1,spacerAfter:10,"text-align":"left"}},{id:"text",data:"title",comp:{name:"Label",hidden:{$expr:"and(outOfStock, $expOutOfStockOpen, $hover)"},singleLine:"true"},layout:{"box-flex":1,spacerAfter:10,"text-align":"left"}},{id:"retailPriceSwitch",data:"retailPrice",comp:{name:"SwitchBox",cases:{"default":[{comp:{name:"VBox",items:[{data:"retailPrice",comp:{name:"Label",cssClass:"retail",lineThrough:"true"}},{data:"price",comp:{name:"Label",cssClass:"salePrice"}}],css:{"text-align":"right"}}}],"<br/>":[{comp:{name:"VBox",items:[{data:"price",comp:{name:"Label",cssClass:"price"}}],css:{"text-align":"right"}}}]}}}]}}],center:[{comp:{name:"HBox",items:[{id:"outOfStockTitle",value:{$expr:"if(String.isEmpty($outOfStockMsg),'@ECOM_GALLERY_OUT_OF_STOCK_TEXT@',$outOfStockMsg)"},comp:{name:"ClippedParagraph2",hidden:{$expr:"not(and($hover, outOfStock, $expOutOfStockOpen))"},cssClass:"txtHoverColorOutOfStock","max-chars":"150",pack:"top"},layout:{"box-flex":1,spacerAfter:10,"text-align":"center"}},{id:"text",data:"title",comp:{name:"Label",hidden:{$expr:"and(outOfStock, $expOutOfStockOpen, $hover)"},singleLine:"true"},layout:{"box-flex":1,spacerAfter:10,"text-align":"center"}},{id:"retailPriceSwitch",data:"retailPrice",comp:{name:"SwitchBox",cases:{"default":[{comp:{name:"VBox",items:[{data:"retailPrice",comp:{name:"Label",cssClass:"retail",lineThrough:"true"}},{data:"price",comp:{name:"Label",cssClass:"salePrice"}}],css:{"text-align":"right"}}}],"<br/>":[{comp:{name:"VBox",items:[{data:"price",comp:{name:"Label",cssClass:"price"}}],css:{"text-align":"right"}}}]}}}]}}],right:[{comp:{name:"HBox",items:[{id:"outOfStockTitle",value:{$expr:"if(String.isEmpty($outOfStockMsg),'@ECOM_GALLERY_OUT_OF_STOCK_TEXT@',$outOfStockMsg)"},comp:{name:"ClippedParagraph2",hidden:{$expr:"not(and($hover, outOfStock, $expOutOfStockOpen))"},cssClass:"txtHoverColorOutOfStock","max-chars":"150",pack:"top"},layout:{"box-flex":1,spacerAfter:10,"text-align":"right"}},{id:"text",data:"title",comp:{name:"Label",hidden:{$expr:"and(outOfStock, $expOutOfStockOpen, $hover)"},singleLine:"true"},layout:{"box-flex":1,spacerAfter:10,"text-align":"right"}},{id:"retailPriceSwitch",data:"retailPrice",comp:{name:"SwitchBox",cases:{"default":[{comp:{name:"VBox",items:[{data:"retailPrice",comp:{name:"Label",cssClass:"retail",lineThrough:"true"}},{data:"price",comp:{name:"Label",cssClass:"salePrice"}}],css:{"text-align":"left"}}}],"<br/>":[{comp:{name:"VBox",items:[{data:"price",comp:{name:"Label",cssClass:"price"}}],css:{"text-align":"left"}}}]}}}],css:{direction:"rtl"}}}]}},customizations:[]},{name:["DefaultRibbon","SimpleCleanRibbon","PolaroidRibbon"],forType:"ProductBundle",comp:{name:"VBox",pack:"start",items:[{id:"ribbonSpacer",comp:{name:"Css"},layout:{height:"60%"}},{id:"ribbonAlignment",data:"$alignment",comp:{name:"SwitchBox",cases:{"default":[{comp:{name:"HBox",items:[{comp:{name:"HBox",items:[{id:"ribbon",comp:{name:"VBox",cssClass:"ribbon",items:[{id:"pad",comp:{name:"HBox",items:[{comp:{name:"HSpacer",size:"5"}},{id:"pad",comp:{name:"VBox","box-align":"center",items:[{data:"ribbon",comp:{name:"Label"}}]},layout:{spacer:10}},{comp:{name:"HSpacer",size:"5"}}]},layout:{spacer:10,"box-flex":1}}]}}]},layout:{spacerBefore:"*"}}]}}],left:[{comp:{name:"HBox",items:[{comp:{name:"HBox",items:[{id:"ribbon",comp:{name:"VBox",cssClass:"ribbon",items:[{id:"pad",comp:{name:"HBox",items:[{comp:{name:"HSpacer",size:"5"}},{id:"pad",comp:{name:"VBox","box-align":"center",items:[{data:"ribbon",comp:{name:"Label"}}]},layout:{spacer:10}},{comp:{name:"HSpacer",size:"5"}}]},layout:{spacer:10,"box-flex":1}}]}}]},layout:{spacerAfter:"*"}}]}}],center:[{id:"ribbon",comp:{name:"VBox",cssClass:"ribbon",items:[{comp:{name:"HBox",items:[{comp:{name:"VBox",items:[{id:"pad",comp:{name:"HBox",items:[{id:"pad",comp:{name:"VBox","box-align":"center",items:[{data:"ribbon",comp:{name:"Label"}}]},layout:{spacer:10}}]},layout:{spacer:10,"box-flex":1}}]},layout:{spacerBefore:"*",spacerAfter:"*"}}]}}]}}]},css:{width:"100%"}}}],css:{position:"absolute",width:"100%",height:"100%"}},customizations:[{priority:60,fieldId:"ribbonSpacer",key:"layout.height",input:{name:"slider",unit:"%",maxVal:"90",minVal:"0",label:"@ECOM_GALLERY_RIBBON_VERTICAL_POSITION_PANEL@"}},{priority:60,fieldId:"pad",key:"layout.spacer",input:{name:"slider",maxVal:"30",minVal:"0",label:"@ECOM_GALLERY_RIBBON_PADDING_PANEL@"}}]},{name:"Default",forType:"ProductBundle",vars:{alignment:"right","text-alignment":"left",hover:!1},comp:{name:"ZoomLink",hoverVar:"hover",listExpression:"parent.parent.items",idField:"id",titleField:"title",items:[{id:"itemPad",comp:{name:"HBox",items:[{id:"itemPad",comp:{name:"VBox",cssClass:"vBOX",items:[{comp:{name:"Stack",stackType:"layout",items:[{comp:{name:"VBox",items:[{data:"currentImage",comp:{name:"Image",cssClass:"pic",imageMode:"full"},layout:{width:"100%",height:"100%","box-flex":1}},{id:"rolloverStrip",comp:{name:"Css",cssClass:"rolloverStrip"},layout:{width:"100%",height:"3px","margin-top":"3px"}}],css:{left:0,right:0,top:0,bottom:0}}},{id:"ribbonSwitch",data:"ribbon",comp:{name:"SwitchBox",cssClass:"switchDIV",cases:{"default":[{data:"$viewName",comp:{name:"SwitchBox",cases:{Default:[{comp:{name:"DefaultRibbon"}}],SimpleClean:[{comp:{name:"SimpleCleanRibbon"}}],Polaroid:[{comp:{name:"PolaroidRibbon"}}]}}}],"":[]},css:{position:"absolute",width:"100%",height:"100%"}}}]},layout:{"box-flex":1}},{comp:{name:"VSpacer",size:"12"}},{id:"textLayout",value:"defaultLayout",comp:{name:"SwitchBox",cssClass:"txtHoverColor",cases:{"default":[{data:"$viewName",comp:{name:"SwitchBox",cases:{Default:[{comp:{name:"Default_DefTxtLayout"}}],SimpleClean:[{comp:{name:"SimpleClean_DefTxtLayout"}}],Polaroid:[{comp:{name:"Polaroid_DefTxtLayout"}}]}}}],altLayout:[{data:"$viewName",comp:{name:"SwitchBox",cases:{Default:[{comp:{name:"Default_AltTxtLayout"}}],SimpleClean:[{comp:{name:"SimpleClean_AltTxtLayout"}}],Polaroid:[{comp:{name:"Polaroid_AltTxtLayout"}}]}}}]}},layout:{"margin-left":2,"margin-right":2}},{comp:{name:"VSpacer",size:"10"}}]},layout:{"box-flex":1,spacer:0}}]},layout:{"box-flex":1,width:"100%",spacer:7}}]},customizations:[{priority:60,fieldId:"itemPad",key:"layout.spacer",input:{name:"slider",maxVal:"20",minVal:"0",label:"@ECOM_GALLERY_ITEM_PADDING_PANEL@"}},{priority:95,fieldId:"vars",key:"alignment",input:{name:"radioimages",label:"@ECOM_GALLERY_RIBBON_ALIGNMENT_PANEL@",options:[{value:"left",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/left.png"},{value:"center",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/center.png"},{value:"right",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/right.png"}]}},{priority:50,fieldId:"rolloverStrip",key:"comp.hidden",input:{name:"checkbox",defaultVal:"false",trueVal:"false",label:"@ECOM_GALLERY_HORIZ_LINE_ON_ROLLOVER_PANEL@",falseVal:"true"}},{priority:45,fieldId:"textLayout",key:"value",input:{name:"radioimages",label:"@ECOM_GALLERY_TEXT_LAYOUT_PANEL@",options:[{value:"defaultLayout",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/left.png"},{value:"altLayout",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/center.png"}]}},{priority:95,fieldId:"vars",key:"text-alignment",input:{name:"radioimages",label:"@ECOM_ALIGNMENT_LABEL_PANEL@",options:[{value:"left",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/left.png"},{value:"center",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/center.png"},{value:"right",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/right.png"}]}}]},{name:"SimpleClean",forType:"ProductBundle",vars:{alignment:"right","text-alignment":"left",hover:!1},comp:{name:"ZoomLink",hoverVar:"hover",listExpression:"parent.parent.items",idField:"id",titleField:"title",items:[{id:"itemPad",comp:{name:"HBox",items:[{id:"itemPad",comp:{name:"VBox",cssClass:"vBOX",items:[{comp:{name:"Stack",stackType:"layout",items:[{comp:{name:"VBox",items:[{data:"currentImage",comp:{name:"Image",cssClass:"pic",style:"wp2",imageMode:"full"},layout:{width:"100%",height:"100%","box-flex":1}},{id:"rolloverStrip",comp:{name:"Css",cssClass:"rolloverStrip"},layout:{width:"100%",height:"3px","margin-top":"3px"}}],css:{left:0,right:0,top:0,bottom:0,overflow:"hidden"}}},{id:"ribbonSwitch",data:"ribbon",comp:{name:"SwitchBox",cssClass:"switchDIV",cases:{"default":[{data:"$viewName",comp:{name:"SwitchBox",cases:{Default:[{comp:{name:"DefaultRibbon"}}],SimpleClean:[{comp:{name:"SimpleCleanRibbon"}}],Polaroid:[{comp:{name:"PolaroidRibbon"}}]}}}],"":[]},css:{position:"absolute",width:"100%",height:"100%"}}}]},layout:{"box-flex":1}},{comp:{name:"VSpacer",size:"12"}},{id:"textLayout",value:"defaultLayout",comp:{name:"SwitchBox",cases:{"default":[{data:"$viewName",comp:{name:"SwitchBox",cases:{Default:[{comp:{name:"Default_DefTxtLayout"}}],SimpleClean:[{comp:{name:"SimpleClean_DefTxtLayout"}}],Polaroid:[{comp:{name:"Polaroid_DefTxtLayout"}}]}}}],altLayout:[{data:"$viewName",comp:{name:"SwitchBox",cases:{Default:[{comp:{name:"Default_AltTxtLayout"}}],SimpleClean:[{comp:{name:"SimpleClean_AltTxtLayout"}}],Polaroid:[{comp:{name:"Polaroid_AltTxtLayout"}}]}}}]}},layout:{"margin-left":2,"margin-right":2}},{comp:{name:"VSpacer",size:"10"}}]},layout:{"box-flex":1,spacer:0}}]},layout:{"box-flex":1,width:"100%",spacer:0}}]},customizations:[{priority:60,fieldId:"itemPad",key:"layout.spacer",input:{name:"slider",maxVal:"20",minVal:"0",label:"@ECOM_GALLERY_ITEM_PADDING_PANEL@"}},{priority:95,fieldId:"vars",key:"alignment",input:{name:"radioimages",label:"@ECOM_GALLERY_RIBBON_ALIGNMENT_PANEL@",options:[{value:"left",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/left.png"},{value:"center",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/center.png"},{value:"right",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/right.png"}]}},{priority:50,fieldId:"rolloverStrip",key:"comp.hidden",input:{name:"checkbox",defaultVal:"false",trueVal:"false",label:"@ECOM_GALLERY_HORIZ_LINE_ON_ROLLOVER_PANEL@",falseVal:"true"}},{priority:2,fieldId:"currentImage",key:"comp.imageMode",input:{name:"combobox",label:"@ECOM_IMAGE_MODE_PANEL@",options:[{label:"@ECOM_IMAGE_MODE_CROP_PANEL@",value:"fill"},{label:"@ECOM_IMAGE_MODE_CENTER_PANEL@",value:"full"}]}},{priority:95,fieldId:"vars",key:"text-alignment",input:{name:"radioimages",label:"@ECOM_ALIGNMENT_LABEL_PANEL@",options:[{value:"left",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/left.png"},{value:"center",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/center.png"},{value:"right",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/right.png"}]}}]},{name:"Polaroid",forType:"ProductBundle",vars:{alignment:"right","text-alignment":"left",hover:!1},comp:{name:"ZoomLink",hoverVar:"hover",listExpression:"parent.parent.items",idField:"id",titleField:"title",items:[{id:"itemPad",comp:{name:"HBox",items:[{id:"itemPad",comp:{name:"VBox",cssClass:"vBOX",items:[{comp:{name:"Stack",stackType:"layout",items:[{comp:{name:"VBox",items:[{data:"currentImage",comp:{name:"Image",cssClass:"pic",style:"wp2",imageMode:"full"},layout:{width:"100%",height:"100%","box-flex":1}},{id:"rolloverStrip",comp:{name:"Css",cssClass:"rolloverStrip"},layout:{width:"100%",height:"3px","margin-top":"3px"}}],css:{left:0,right:0,top:0,bottom:0,overflow:"hidden"}}},{id:"ribbonSwitch",data:"ribbon",comp:{name:"SwitchBox",cssClass:"switchDIV",cases:{"default":[{data:"$viewName",comp:{name:"SwitchBox",cases:{Default:[{comp:{name:"DefaultRibbon"}}],SimpleClean:[{comp:{name:"SimpleCleanRibbon"}}],Polaroid:[{comp:{name:"PolaroidRibbon"}}]}}}],"":[]},css:{position:"absolute",width:"100%",height:"100%"}}}]},layout:{"box-flex":1}},{comp:{name:"VSpacer",size:"12"}},{id:"textLayout",value:"defaultLayout",comp:{name:"SwitchBox",cssClass:"txtHoverColor",cases:{"default":[{data:"$viewName",comp:{name:"SwitchBox",cases:{Default:[{comp:{name:"Default_DefTxtLayout"}}],SimpleClean:[{comp:{name:"SimpleClean_DefTxtLayout"}}],Polaroid:[{comp:{name:"Polaroid_DefTxtLayout"}}]}}}],altLayout:[{data:"$viewName",comp:{name:"SwitchBox",cases:{Default:[{comp:{name:"Default_AltTxtLayout"}}],SimpleClean:[{comp:{name:"SimpleClean_AltTxtLayout"}}],Polaroid:[{comp:{name:"Polaroid_AltTxtLayout"}}]}}}]}},layout:{"margin-left":2,"margin-right":2}},{comp:{name:"VSpacer",size:"10"}}]},layout:{"box-flex":1,spacer:0}}]},layout:{"box-flex":1,width:"100%",spacer:0}}]},customizations:[{priority:60,fieldId:"itemPad",key:"layout.spacer",input:{name:"slider",maxVal:"20",minVal:"0",label:"@ECOM_GALLERY_ITEM_PADDING_PANEL@"}},{priority:95,fieldId:"vars",key:"alignment",input:{name:"radioimages",label:"@ECOM_GALLERY_RIBBON_ALIGNMENT_PANEL@",options:[{value:"left",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/left.png"},{value:"center",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/center.png"},{value:"right",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/right.png"}]}},{priority:95,fieldId:"vars",key:"text-alignment",input:{name:"radioimages",label:"@ECOM_ALIGNMENT_LABEL_PANEL@",options:[{value:"left",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/left.png"},{value:"right",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/right.png"}]}},{priority:2,fieldId:"currentImage",key:"comp.imageMode",input:{name:"combobox",label:"@ECOM_IMAGE_MODE_PANEL@",options:[{label:"@ECOM_IMAGE_MODE_CROP_PANEL@",value:"fill"},{label:"@ECOM_IMAGE_MODE_CENTER_PANEL@",value:"full"}]}}]},{name:"RibbonBox",forType:"String",comp:{name:"Area",style:"c1",items:[{comp:{name:"VSpacer",size:"5"}},{comp:{name:"HBox",items:[{comp:{name:"Label",style:"Body L"},layout:{spacer:20}}]},layout:{position:"relative"}},{comp:{name:"VSpacer",size:"5"}}]}},{name:"RibbonBoxHover",forType:"String",comp:{name:"Area",style:"c2",items:[{comp:{name:"VSpacer",size:"5"}},{comp:{name:"HBox",items:[{comp:{name:"Label",style:"Body M"},layout:{spacer:20}}]},layout:{position:"relative"}},{comp:{name:"VSpacer",size:"5"}}]}},{name:"CleanRibbon",forType:"String",vars:{alignment:"left"},comp:{name:"SwitchBox",cases:{"default":[{data:"$alignment",comp:{name:"SwitchBox",cases:{left:[{comp:{name:"HBox",items:[{comp:{name:{$expr:"if($hover, 'RibbonBoxHover', 'RibbonBox')"}},layout:{spacerAfter:"*"}}]}}],center:[{comp:{name:"HBox",items:[{comp:{name:{$expr:"if($hover, 'RibbonBoxHover', 'RibbonBox')"}},layout:{spacer:"*"}}]}}],right:[{comp:{name:"HBox",items:[{comp:{name:{$expr:"if($hover, 'RibbonBoxHover', 'RibbonBox')"}},layout:{spacerBefore:"*"}}]}}]}}}],"":[]}},customizations:[{priority:0,fieldId:"vars",key:"alignment",input:{name:"radioimages",label:"@ECOM_GALLERY_RIBBON_ALIGNMENT_PANEL@",options:[{value:"left",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/left.png"},{value:"center",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/center.png"},{value:"right",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/right.png"}]}}]},{name:"PicsOnlyMouseOver",forType:"ProductBundle",vars:{outOfStockMsg:"@ECOM_GALLERY_OUT_OF_STOCK_TEXT@",alignment:"left",hover:!0,editable:{$expr:"eq($showHoverOnEdit,'true')"}},comp:{name:"ZoomLink",listExpression:"parent.parent.parent.items",idField:"id",titleField:"title",items:[{comp:{name:"HBox",items:[{comp:{name:"VBox",items:[{id:"hoverSpacerTop",comp:{name:"VSpacer",size:"20"}},{id:"title",value:{$expr:"if(String.isEmpty($outOfStockMsg),'@ECOM_GALLERY_OUT_OF_STOCK_TEXT@',$outOfStockMsg)"},comp:{name:"ClippedParagraph2",hidden:{$expr:"not(and($hover, outOfStock, $expOutOfStockOpen))"},cssClass:"txtHoverColorOutOfStock",style:"Heading S",isStyleEditable:{$expr:"$editable"},"max-chars":"150"},layout:{"text-align":{$expr:"$alignment"}}},{data:"title",comp:{name:"Label",hidden:{$expr:"and($hover, outOfStock, $expOutOfStockOpen)"},style:"Heading S",isStyleEditable:{$expr:"$editable"},singleLine:"true"},layout:{"text-align":{$expr:"$alignment"}}},{id:"ttlDescDivider",comp:{name:"HorizontalLine",style:"hl1",isStyleEditable:{$expr:"$editable"}},layout:{spacer:10}},{comp:{name:"VBox",hidden:{$expr:"eq(details, '')"},items:[{id:"showDetails",data:"details",comp:{name:"ClippedParagraph2",style:"Body M",isStyleEditable:{$expr:"$editable"},"max-chars":"150"},layout:{"text-align":{$expr:"$alignment"}}},{id:"showDetails",comp:{name:"VSpacer",size:"20"}}]},layout:{width:"100%"}},{id:"readMoreLabel",value:"@ECOM_GALLERY_READ_MORE_TEXT@",comp:{name:"Label",isStyleEditable:{$expr:"$editable"},bold:"true"},layout:{"text-align":{$expr:"$alignment"}}},{id:"hoverOverviewPriceSpacer",comp:{name:"VSpacer",size:"10"}},{id:"retailPriceSwitch",data:"retailPrice",comp:{name:"SwitchBox",cases:{"default":[{comp:{name:"VBox","box-align":{$expr:"String.replace($alignment,'middle','center')"},items:[{comp:{name:"HBox","box-align":"baseline",items:[{data:"price",comp:{name:"Label",cssClass:"salePrice",style:"Heading S",isStyleEditable:{$expr:"$editable"}}},{comp:{name:"HSpacer",size:"10"}},{data:"retailPrice",comp:{name:"Label",cssClass:"retail",style:"Body L",isStyleEditable:{$expr:"$editable"},lineThrough:"true"}}]}}]},layout:{"text-align":{$expr:"$alignment"}}}],"<br/>":[{comp:{name:"VBox",items:[{data:"price",comp:{name:"Label",cssClass:"price",style:"Heading S",isStyleEditable:{$expr:"$editable"}},layout:{"text-align":{$expr:"$alignment"}}}]}}]}}},{id:"hoverSpacerBottom",comp:{name:"VSpacer",size:"20"}}]},layout:{spacer:20,"box-flex":1}}]},layout:{"box-flex":1}}],css:{height:"100%"}},customizations:[{priority:88,fieldId:"readMoreLabel",key:"value",input:{name:"textfield",label:"@ECOM_GALLERY_READ_MORE_TEXT@",maxLength:"40"}},{priority:85,fieldId:"ttlDescDivider",key:"comp.hidden",input:{name:"checkbox",spaceAfter:"10",defaultVal:"false",trueVal:"false",label:"@ECOM_GALLERY_LINE_SEPARATOR_PANEL@",falseVal:"true"}},{priority:87,fieldId:"showDetails",key:"comp.hidden",input:{name:"checkbox",spaceAfter:"10",defaultVal:"false",trueVal:"false",label:"@ECOM_ZOOM_GALLERY_LEFT_DISPLAY_DETAILS@",falseVal:"true"}},{priority:84,fieldId:"vars",key:"alignment",input:{name:"radioimages",label:"@ECOM_GALLERY_TEXT_ALIGNMENT_PANEL@",options:[{value:"left",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/left.png"},{value:"center",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/center.png"},{value:"right",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/right.png"}]}},{priority:83,fieldId:"hoverSpacerTop",key:"comp.size",input:{name:"slider",maxVal:"30",minVal:"0",label:"@ECOM_GALLERY_TITLE_MARGIN_TOP_PANEL@"}},{priority:82,fieldId:"hoverOverviewPriceSpacer",key:"comp.size",input:{name:"slider",maxVal:"30",minVal:"0",label:"@ECOM_GALLERY_OVERVIEW_AND_PRICE_SPACER_PANEL@"}}]},{name:"PicsOnlyNoHover",forType:"ProductBundle",vars:{ribbonMargin:20,ribbonTop:"10%",ribbonAlign:"left",alignment:"right","text-alignment":"left",hover:!1,editable:{$expr:"eq($showHoverOnEdit,'false')"}},comp:{name:"ZoomLink",listExpression:"parent.parent.parent.items",idField:"id",titleField:"title",items:[{comp:{name:"Css",items:[{comp:{name:"Css",items:[{data:"currentImage",comp:{name:"Image",cssClass:"pic",style:"wp2",isStyleEditable:{$expr:"$editable"},imageMode:"full"},layout:{height:"100%",width:"100%"}}]},layout:{position:"absolute",width:"100%",height:"100%"}},{comp:{name:"Css",hidden:{$expr:"eq(ribbon, '')"},items:[{comp:{name:"Area",style:"c1",isStyleEditable:{$expr:"$editable"},items:[{comp:{name:"VSpacer",size:"12"}},{data:"ribbon",comp:{name:"Label",isStyleEditable:{$expr:"$editable"}}},{comp:{name:"VSpacer",size:"12"}}]},layout:{"min-height":40,"padding-left":{$expr:"$ribbonMargin"},"padding-right":{$expr:"$ribbonMargin"},"text-align":"center"}}]},layout:{position:"absolute","min-height":40,top:{$expr:"$ribbonTop"},left:{$expr:"if(eq($ribbonAlign,'right'),'auto',0)"},right:{$expr:"if(eq($ribbonAlign,'left'),'auto',0)"}}}]},layout:{position:"relative",height:"100%",width:"100%"}}],css:{height:"100%"}},customizations:[{priority:95,fieldId:"vars",key:"ribbonTop",input:{name:"slider",unit:"%",maxVal:"85",minVal:"0",label:"@ECOM_GALLERY_RIBBON_VERTICAL_POSITION_PANEL@"}},{priority:94,fieldId:"vars",key:"ribbonMargin",input:{name:"slider",maxVal:"75",minVal:"0",label:"@ECOM_GALLERY_RIBBON_PADDING_PANEL@"}},{priority:93,fieldId:"vars",key:"ribbonAlign",format:"*",input:{name:"radioimages",label:"@ECOM_GALLERY_RIBBON_ALIGNMENT_PANEL@",options:[{value:"left",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/left.png"},{value:"center",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/center.png"},{value:"right",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/right.png"}]}},{priority:96,fieldId:"currentImage",key:"comp.imageMode",input:{name:"combobox",label:"@ECOM_IMAGE_MODE_PANEL@",options:[{label:"@ECOM_IMAGE_MODE_CROP_PANEL@",value:"fill"},{label:"@ECOM_IMAGE_MODE_CENTER_PANEL@",value:"full"}]}}]},{name:"PicsOnly",forType:"ItemsList",vars:{isViewCustomizing:!1,alignment:"right","text-alignment":"left",hover:!1},data:"emptyGalleryLabel",comp:{name:"SwitchBox",cases:{"default":[{data:"emptyGalleryLabel",comp:{name:"Label"}}],"":[{id:"hoverGallery",data:"items",comp:{name:"Gallery",styleNS:"hoverGallery",hoverVar:"hover",columns:"4",rows:"2",gap:"20",transition:"horizSwipeAllAtOnce",expandEnabled:"false",autoplay:"false"},layout:{"box-flex":1,width:"100%"}}]}},customizations:[{priority:99,fieldId:"hoverGallery",key:"comp.rows",input:{name:"slider",updateOnDragEnd:"true",maxVal:"10",minVal:"1",label:"@ECOM_GALLERY_ROWS_LABEL_PANEL@"}},{priority:98,fieldId:"hoverGallery",key:"comp.columns",input:{name:"slider",updateOnDragEnd:"true",maxVal:"10",minVal:"1",label:"@ECOM_GALLERY_COLUMNS_LABEL_PANEL@"}},{priority:86,fieldId:"hoverGallery",key:"comp.gap",input:{name:"slider",maxVal:"200",minVal:"0",label:"@ECOM_GALLERY_CELLS_MARGINS_PANEL@"}},{priority:97,fieldId:"hoverGallery",key:"comp.style",input:{name:"changestyle",spaceAfter:"20",showAs:"button",label:"@ECOM_GALLERY_CHANGE_COLORS_PANEL@"}}]},{name:"PicsOnly",forType:"ProductBundle",vars:{showHoverOnEdit:!1,hover:!1,showHover:{$expr:"or($hover, and($isViewCustomizing, eq(String.concat('', $showHoverOnEdit), 'true')))"}},comp:{name:"VBox",hoverVar:"hover",items:[{comp:{name:"Css",items:[{comp:{name:"Css",cssClass:"expand",items:[{comp:{name:"PicsOnlyNoHover"}}]}},{comp:{name:"Css",cssClass:{$expr:"if($showHover, 'expand rolloverHolder', 'expand rolloverHolder rollover')"},items:[{comp:{name:"PicsOnlyMouseOver"}}]}}]},layout:{position:"relative","box-flex":1}}]},stylesheet:[{".expand":{position:"absolute",top:0,left:0,right:0,bottom:0}},{".rollover, .rollover *":{visibility:"hidden !important"}}],customizations:[{priority:90,fieldId:"vars",key:"showHoverOnEdit",input:{name:"togglebutton",spaceAfter:"15",defaultVal:"false",titleLabel:"@ECOM_GALLERY_SHOW_HOVER_MODE_DESCRIPTION_PANEL@",trueVal:"true",label:"@ECOM_GALLERY_SHOW_HOVER_MODE_PANEL@",falseVal:"false"}}]},{name:"Default",forType:"ItemsList",format:"Mobile",vars:{innerItemHeight:128,itemMargin:20,itemMarginDifference:10,rows:5,actualRows:{$expr:"if(lt($rows, Array.length(items)), $rows, Array.length(items))"}},comp:{name:"VBox",items:[{data:"items",comp:{name:"Gallery",styleNS:"productGallery",columns:"1",rows:{$expr:"$actualRows"},gap:{$expr:"$itemMargin"},showNavigation:"false",showCounter:"false",templates:{item:{comp:{name:"Default"}}}},layout:{height:{$expr:"sub(mult($actualRows, add($innerItemHeight, $itemMargin)), $itemMargin)"}}},{id:"showMoreText",comp:{name:"Button2",hidden:{$expr:"lte(Array.length(items), $rows)"},label:"@ECOM_GALLERY_SHOW_MORE_BUTTON_TEXT@",events:{click:"load-more"}},layout:{"margin-top":{$expr:"$itemMarginDifference"}}}]},customizations:[{priority:200,fieldId:"showMoreText",key:"comp.label",format:"Mobile",input:{name:"textfield",label:"@ECOM_GALLERY_SHOW_MORE_BUTTON_TEXT_PANEL@"}},{priority:0,fieldId:"vars",key:"itemMargin",format:"Mobile",input:{name:"slider",maxVal:"100",minVal:"0",label:"@ECOM_GALLERY_ITEM_SPACING_PANEL@"}},{priority:0,fieldId:"vars",key:"rows",format:"Mobile",input:{name:"slider",updateOnDragEnd:"true",maxVal:"10",minVal:"1",label:"@ECOM_GALLERY_ROWS_LABEL_PANEL@"}}]},{name:"SimpleClean",forType:"ItemsList",format:"Mobile",vars:{innerItemHeight:128,itemMargin:20,itemMarginDifference:10,rows:5,actualRows:{$expr:"if(lt($rows, Array.length(items)), $rows, Array.length(items))"}},comp:{name:"VBox",items:[{data:"items",comp:{name:"Gallery",styleNS:"productGallery",columns:"1",rows:{$expr:"$actualRows"},gap:{$expr:"$itemMargin"},showNavigation:"false",showCounter:"false",templates:{item:{comp:{name:"SimpleClean"}}}},layout:{height:{$expr:"sub(mult($actualRows, add($innerItemHeight, $itemMargin)), $itemMargin)"}}},{id:"showMoreText",comp:{name:"Button2",hidden:{$expr:"lte(Array.length(items), $rows)"},label:"@ECOM_GALLERY_SHOW_MORE_BUTTON_TEXT@",events:{click:"load-more"}},layout:{"margin-top":{$expr:"$itemMarginDifference"}}}]},customizations:[{priority:200,fieldId:"showMoreText",key:"comp.label",format:"Mobile",input:{name:"textfield",label:"@ECOM_GALLERY_SHOW_MORE_BUTTON_TEXT_PANEL@"}},{priority:0,fieldId:"vars",key:"itemMargin",format:"Mobile",input:{name:"slider",maxVal:"100",minVal:"0",label:"@ECOM_GALLERY_ITEM_SPACING_PANEL@"}},{priority:0,fieldId:"vars",key:"rows",format:"Mobile",input:{name:"slider",updateOnDragEnd:"true",maxVal:"10",minVal:"1",label:"@ECOM_GALLERY_ROWS_LABEL_PANEL@"}}]},{name:"Polaroid",forType:"ItemsList",format:"Mobile",vars:{innerItemHeight:128,itemMargin:20,itemMarginDifference:10,rows:5,actualRows:{$expr:"if(lt($rows, Array.length(items)), $rows, Array.length(items))"}},comp:{name:"VBox",items:[{data:"items",comp:{name:"Gallery",styleNS:"productGallery",columns:"1",rows:{$expr:"$actualRows"},gap:{$expr:"$itemMargin"},showNavigation:"false",showCounter:"false",templates:{item:{comp:{name:"Polaroid"}}}},layout:{height:{$expr:"sub(mult($actualRows, add($innerItemHeight, $itemMargin)), $itemMargin)"}}},{id:"showMoreText",comp:{name:"Button2",hidden:{$expr:"lte(Array.length(items), $rows)"},label:"@ECOM_GALLERY_SHOW_MORE_BUTTON_TEXT@",events:{click:"load-more"}},layout:{"margin-top":{$expr:"$itemMarginDifference"}}}]},customizations:[{priority:200,fieldId:"showMoreText",key:"comp.label",format:"Mobile",input:{name:"textfield",label:"@ECOM_GALLERY_SHOW_MORE_BUTTON_TEXT_PANEL@"}},{priority:0,fieldId:"vars",key:"itemMargin",format:"Mobile",input:{name:"slider",maxVal:"100",minVal:"0",label:"@ECOM_GALLERY_ITEM_SPACING_PANEL@"}},{priority:0,fieldId:"vars",key:"rows",format:"Mobile",input:{name:"slider",updateOnDragEnd:"true",maxVal:"10",minVal:"1",label:"@ECOM_GALLERY_ROWS_LABEL_PANEL@"}}]},{name:"PicsOnly",forType:"ItemsList",format:"Mobile",vars:{innerItemHeight:128,itemMargin:20,itemMarginDifference:10,rows:5,actualRows:{$expr:"if(lt($rows, Array.length(items)), $rows, Array.length(items))"}},comp:{name:"VBox",items:[{data:"items",comp:{name:"Gallery",styleNS:"productGallery",columns:"1",rows:{$expr:"$actualRows"},gap:{$expr:"$itemMargin"},showNavigation:"false",showCounter:"false",templates:{item:{comp:{name:"PicsOnly"}}}},layout:{height:{$expr:"sub(mult($actualRows, add($innerItemHeight, $itemMargin)), $itemMargin)"}}},{id:"showMoreText",comp:{name:"Button2",hidden:{$expr:"lte(Array.length(items), $rows)"},label:"@ECOM_GALLERY_SHOW_MORE_BUTTON_TEXT@",events:{click:"load-more"}},layout:{"margin-top":{$expr:"$itemMarginDifference"}}}]},customizations:[{priority:200,fieldId:"showMoreText",key:"comp.label",format:"Mobile",input:{name:"textfield",label:"@ECOM_GALLERY_SHOW_MORE_BUTTON_TEXT_PANEL@"}},{priority:0,fieldId:"vars",key:"itemMargin",format:"Mobile",input:{name:"slider",maxVal:"100",minVal:"0",label:"@ECOM_GALLERY_ITEM_SPACING_PANEL@"}},{priority:0,fieldId:"vars",key:"rows",format:"Mobile",input:{name:"slider",updateOnDragEnd:"true",maxVal:"10",minVal:"1",label:"@ECOM_GALLERY_ROWS_LABEL_PANEL@"}}]},{name:"Gallery",forType:"ItemsList",format:"Mobile",vars:{innerItemHeight:128,itemMargin:20,itemMarginDifference:10,rows:5,actualRows:{$expr:"if(lt($rows, Array.length(items)), $rows, Array.length(items))"}},comp:{name:"VBox",items:[{data:"items",comp:{name:"Gallery",styleNS:"contentGallery",columns:"1",rows:{$expr:"$actualRows"},gap:{$expr:"$itemMargin"},showNavigation:"false",showCounter:"false",templates:{item:{comp:{name:"Gallery"}}}},layout:{height:{$expr:"sub(mult($actualRows, add($innerItemHeight, $itemMargin)), $itemMargin)"}}},{id:"showMoreText",comp:{name:"Button2",hidden:{$expr:"lte(Array.length(items), $rows)"},label:"@ECOM_GALLERY_SHOW_MORE_BUTTON_TEXT@",events:{click:"load-more"}},layout:{"margin-top":{$expr:"$itemMarginDifference"}}}]},customizations:[{priority:200,fieldId:"showMoreText",key:"comp.label",format:"Mobile",input:{name:"textfield",label:"@ECOM_GALLERY_SHOW_MORE_BUTTON_TEXT_PANEL@"}},{priority:0,fieldId:"vars",key:"itemMargin",format:"Mobile",input:{name:"slider",maxVal:"100",minVal:"0",label:"@ECOM_GALLERY_ITEM_SPACING_PANEL@"}},{priority:0,fieldId:"vars",key:"rows",format:"Mobile",input:{name:"slider",updateOnDragEnd:"true",maxVal:"10",minVal:"1",label:"@ECOM_GALLERY_ROWS_LABEL_PANEL@"}}]},{name:["Default","SimpleClean","Polaroid","PicsOnly"],forType:"ProductBundle",format:"Mobile",comp:{name:"ZoomLink",listExpression:"parent.parent.items",idField:"id",titleField:"title",items:[{comp:{name:"VBox",items:[{comp:{name:"VSpacer",size:"10"}},{comp:{name:"HBox",items:[{comp:{name:"HSpacer",size:"10"}},{comp:{name:"Css",items:[{data:"currentImage",comp:{name:"Image",cssClass:"pic",imageMode:"fill"},layout:{position:"absolute",top:0,left:0,right:0,bottom:0,width:100,height:100}},{id:"ribbonContainer",comp:{name:"Css",hidden:{$expr:"eq(ribbon,'')"},cssClass:"ribbon",items:[{data:"ribbon",comp:{name:"Label",singleLine:"true"},layout:{"text-align":"center"}}]},layout:{width:"auto",position:"absolute",top:20,padding:10,left:0,right:0}}]},layout:{width:100,height:100,position:"relative"}},{comp:{name:"HSpacer",size:"10"}},{data:"$viewName",comp:{name:"SwitchBox",cases:{"default":[{data:"title",comp:{name:"ClippedParagraph2",cssClass:"txtHoverColor","max-chars":"150"},layout:{"box-flex":1,spacerAfter:5}},{id:"outOfStockTitle",value:"@ECOM_GALLERY_OUT_OF_STOCK_TEXT@",comp:{name:"ClippedParagraph2",hidden:{$expr:"not(and(outOfStock, $expOutOfStockOpen))"},cssClass:"txtHoverColorOutOfStockMobile","max-chars":"150"},layout:{"box-flex":1,spacerAfter:5}},{data:"retailPrice",comp:{name:"Label",hidden:{$expr:"String.isEmpty(retailPrice)"},cssClass:"txtHoverColor",lineThrough:"true"}},{data:"price",comp:{name:"Label",cssClass:"txtHoverColor"}}],Polaroid:[{data:"title",comp:{name:"ClippedParagraph2",cssClass:"txtHoverColor","max-chars":"150"},layout:{"box-flex":1,spacerAfter:5}},{id:"outOfStockTitle",value:"@ECOM_GALLERY_OUT_OF_STOCK_TEXT@",comp:{name:"ClippedParagraph2",hidden:{$expr:"not(and(outOfStock, $expOutOfStockOpen))"},cssClass:"txtHoverColorOutOfStockMobile","max-chars":"150"},layout:{"box-flex":1,spacerAfter:5}},{data:"retailPrice",comp:{name:"Label",hidden:{$expr:"String.isEmpty(retailPrice)"},cssClass:"txtHoverColor",lineThrough:"true"}},{data:"price",comp:{name:"Label",cssClass:"txtHoverColor"}}]}},layout:{"box-flex":1}},{comp:{name:"HSpacer",size:"10"}}]}},{comp:{name:"VSpacer",size:"10"}}]}}],css:{"border-width":0}},customizations:[{priority:40,fieldId:"currentImage",key:"comp.imageMode",format:"Mobile",input:{name:"combobox",label:"@ECOM_IMAGE_MODE_PANEL@",options:[{label:"@ECOM_IMAGE_MODE_CROP_PANEL@",value:"fill"},{label:"@ECOM_IMAGE_MODE_CENTER_PANEL@",value:"full"}]}},{priority:0,fieldId:"ribbonContainer",key:"layout.top",format:"Mobile",input:{name:"slider",maxVal:"75",minVal:"0",label:"@ECOM_GALLERY_RIBBON_VERTICAL_POSITION_PANEL@"}},{priority:0,fieldId:"ribbonContainer",key:"layout.padding",format:"Mobile",input:{name:"slider",maxVal:"30",minVal:"0",label:"@ECOM_GALLERY_RIBBON_PADDING_PANEL@"}},{priority:41,fieldId:"title",key:"comp.max-chars",format:"Mobile",input:{name:"slider",maxVal:"500",minVal:"1",label:"@ECOM_GALLERY_MAX_TITLE_CHARACTERS@"}}]},{name:"Gallery",forType:"ProductBundle",format:"Mobile",comp:{name:"ZoomLink",listExpression:"parent.parent.items",idField:"id",titleField:"title",items:[{comp:{name:"VBox",items:[{comp:{name:"VSpacer",size:"10"}},{comp:{name:"HBox",items:[{comp:{name:"HSpacer",size:"10"}},{comp:{name:"Css",items:[{comp:{name:"Stack",stackType:"layout",items:[{comp:{name:"ImageWithRibbonFill"}},{data:"ribbon",comp:{name:"ProductGalleryRibbon"},layout:{width:"100%"}}]},layout:{height:"100px",width:"100px"}}]},layout:{width:100}},{comp:{name:"HSpacer",size:"10"}},{comp:{name:"VBox",items:[{data:"title",comp:{name:"ClippedParagraph2","max-chars":"150"},layout:{"box-flex":1,spacerAfter:5}},{id:"outOfStockTitle",value:"@ECOM_GALLERY_OUT_OF_STOCK_TEXT@",comp:{name:"ClippedParagraph2",hidden:{$expr:"not(and(outOfStock, $expOutOfStockOpen))"},cssClass:"txtHoverColorOutOfStockMobile","max-chars":"150"},layout:{"box-flex":1,spacerAfter:5}},{data:"price",comp:{name:"Label"}},{data:"retailPrice",comp:{name:"Label",hidden:{$expr:"String.isEmpty(retailPrice)"},lineThrough:"true"}}]},layout:{"box-flex":1}},{comp:{name:"HSpacer",size:"10"}}]}},{comp:{name:"VSpacer",size:"10"}}]}}],css:{"border-width":0}},customizations:[{priority:199,fieldId:"title",key:"comp.max-chars",format:"Mobile",input:{name:"slider",maxVal:"500",minVal:"1",label:"@ECOM_GALLERY_MAX_TITLE_CHARACTERS@"}}]},{name:"ImageWithRibbonFill",forType:"ProductBundle",format:"Mobile",comp:{name:"VBox",items:[{data:"currentImage",comp:{name:"Image",style:"wp2",imageMode:"fill"},layout:{width:100,height:100}}]},customizations:[{priority:40,fieldId:"currentImage",key:"comp.imageMode",format:"Mobile",input:{name:"combobox",label:"@ECOM_IMAGE_MODE_PANEL@",options:[{label:"@ECOM_IMAGE_MODE_CROP_PANEL@",value:"fill"},{label:"@ECOM_IMAGE_MODE_CENTER_PANEL@",value:"full"}]}}]},{name:"ProductGalleryRibbon",forType:"String",format:"Mobile",comp:{name:"VBox",hidden:{$expr:"String.isEmpty(this)"},items:[{id:"ribbonMarginTop",comp:{name:"VSpacer",size:"65"}},{id:"ribbonContainer",comp:{name:"Area",items:[{id:"ribbon",comp:{name:"VBox",cssClass:"ribbon",items:[{id:"ribbonSpacer",comp:{name:"VSpacer",size:"10"}},{comp:{name:"Label",singleLine:"true"},layout:{"text-align":"center"}},{id:"ribbonSpacer",comp:{name:"VSpacer",size:"10"}}]}}]}}],css:{width:"100%"}},customizations:[{priority:0,fieldId:"ribbonSpacer",key:"comp.size",format:"Mobile",input:{name:"slider",maxVal:"40",minVal:"5",label:"@ECOM_GALLERY_RIBBON_PADDING_PANEL@"}},{priority:0,fieldId:"ribbonMarginTop",key:"comp.size",format:"Mobile",input:{name:"slider",maxVal:"75",minVal:"0",label:"@ECOM_GALLERY_RIBBON_POSITION_PANEL@"}}]},{name:["Zoom","ZoomImageCenterWide","ZoomImageCenter","ZoomImageLeft","ZoomGalleryLeft"],forType:"ProductBundle",format:"Mobile",comp:{name:"VBox",items:[{comp:{name:"HBox",items:[{comp:{name:"VBox",items:[{comp:{name:"VSpacer",size:"70"}},{data:"productMedia._type",comp:{name:"SwitchBox",cases:{"default":[],"wix:Image":[{comp:{name:"ImageProductMediaWithRibbon"},layout:{height:250,width:"100%"}}],"wix:Video":[{data:"productMedia",comp:{name:"VideoProductMedia"},layout:{height:250,width:"100%"}}]}}},{value:{$expr:"lt(imagesCount,2)"},comp:{name:"SwitchBox",cases:{"default":[],"false":[{comp:{name:"InsideSliderGallery"},layout:{spacerBefore:20,overflow:"hidden",width:"100%",height:90}}]}}},{comp:{name:"VSpacer",size:"10"}},{comp:{name:"HorizontalLine",style:"hl4"}},{comp:{name:"ZoomDetails"},layout:{"box-flex":1}}]},layout:{"box-flex":1,spacer:12}}]}},{data:"title",comp:{name:"Header"}}],css:{"text-align":"left","background-color":"white",width:"100%"}}},{name:"ZoomDetails",forType:"ProductBundle",format:"Mobile",comp:{name:"VBox",items:[{data:"overview",comp:{name:"Label",hidden:{$expr:"String.isEmpty(overview)"},style:"Body S"},layout:{spacer:7}},{comp:{name:"HorizontalLine",hidden:{$expr:"String.isEmpty(overview)"},style:"hl4"}},{data:"options",comp:{name:"List2",hidden:{$expr:"Array.isEmpty(options)"},styleNS:"ecomOptionsList",isStyleEditable:"false"}},{comp:{name:"HBox","box-align":"center",items:[{data:"price",comp:{name:"Label",style:"Body L"},layout:{"box-flex":1}},{data:"retailPrice",comp:{name:"Label",hidden:{$expr:"String.isEmpty(retailPrice)"},style:"Body S",lineThrough:"true"}}]},layout:{spacerAfter:8,spacerBefore:8}},{comp:{name:"HorizontalLine",style:"hl4"}},{comp:{name:"ProductZoomAddToCartButton"},layout:{spacer:7}},{id:"outOfStockTitle",value:"@ECOM_GALLERY_OUT_OF_STOCK_TEXT@",comp:{name:"ClippedParagraph2",hidden:{$expr:"not(and(outOfStock, $expOutOfStockOpen))"},color:"#e4523f","max-chars":"150"},layout:{spacerBefore:10,height:40,width:"100%","text-align":"center"}},{data:"details",comp:{name:"Label",style:"Body S"},layout:{spacer:7}},{value:{$expr:"lt(String.length(details),200)"},comp:{name:"SwitchBox",cases:{"default":[],"false":[{comp:{name:"ProductZoomAddToCartButton"},layout:{spacer:7}},{id:"outOfStockTitle",value:"@ECOM_GALLERY_OUT_OF_STOCK_TEXT@",comp:{name:"ClippedParagraph2",hidden:{$expr:"not(and(outOfStock, $expOutOfStockOpen))"},color:"#e4523f","max-chars":"150"},layout:{spacerBefore:10,height:40,width:"100%","text-align":"center"}}]}},layout:{"box-flex":1}},{comp:{name:"VSpacer",size:"5"}},{comp:{name:"SocialButtons"}}]}},{name:"ProductZoomAddToCartButton",forType:"ProductBundle",format:"Mobile",id:"addToCartTitle",comp:{name:"Button2",hidden:{$expr:"and(outOfStock, $expOutOfStockOpen)"},styleNS:"ecomAddProduct",label:"@ECOM_PRODUCT_PAGE_ADD_TO_CART_BTN_TEXT@",height:"40",events:{click:"buy-product"}}},{name:"Header",forType:"String",comp:{name:"HBox",items:[{comp:{name:"HBox","box-align":"middle",items:[{id:"title",data:"this",comp:{name:"Label",cssClass:"oneLineText",style:"Body L",color:"#ffffff",bold:"true"},layout:{spacer:8,width:240,height:21}}]},layout:{width:"100%",height:"100%",spacerAfter:43,"background-color":"#393939"}}],css:{height:"43px","background-color":"#777777",position:"fixed",top:0,left:0,right:0}},stylesheet:[{".oneLineText * span":{width:"240px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}}]},{name:"ImageProductMediaWithRibbon",forType:"ProductBundle",format:"Mobile",comp:{name:"Stack",stackType:"layout",items:[{data:"productMedia",comp:{name:"ImageProductMedia"},layout:{width:"100%",height:250}},{value:{$expr:"String.isEmpty(ribbon)"},comp:{name:"SwitchBox",cases:{"default":[{data:"ribbon",comp:{name:"GalleryRibbon",vars:{isProductGallery:!1}},layout:{"box-flex":1,height:250}}],"true":[]}},layout:{width:"100%"}}]}},{name:"InnerRibbon",forType:"String",format:"Mobile",comp:{name:"VBox",items:[{comp:{name:"HBox",items:[{comp:{name:"Area",items:[{id:"ribbonInnerPadding",comp:{name:"VSpacer",size:"10"}},{data:"this",comp:{name:"Label"},layout:{"text-align":"center",margin:"0 10px"}},{id:"ribbonInnerPadding",comp:{name:"VSpacer",size:"10"}}]},layout:{"box-flex":1}}],css:{width:"100%"}}}]},customizations:[{priority:0,fieldId:"ribbonInnerPadding",key:"comp.size",format:"Mobile",input:{name:"slider",maxVal:"60",minVal:"5",label:"@ECOM_GALLERY_RIBBON_PADDING_PANEL@"}}]},{name:"GalleryRibbon",forType:"String",format:"Mobile",vars:{alignment:"center"},comp:{name:"VBox",items:[{id:"ribbonSpacerTop",comp:{name:"VSpacer",size:"200"}},{data:"$alignment",comp:{name:"SwitchBox",cases:{"default":[{comp:{name:"HBox",items:[{comp:{name:"InnerRibbon"},layout:{"box-flex":1}}]},layout:{width:"100%"}}],left:[{comp:{name:"HBox",items:[{comp:{name:"InnerRibbon"},layout:{spacerAfter:"*"}}],css:{"min-width":"150px"}},layout:{width:"100%"}}],right:[{comp:{name:"HBox",items:[{comp:{name:"InnerRibbon"},layout:{spacerBefore:"*"}}],css:{"min-width":"150px"}},layout:{width:"100%"}}]}}}]},customizations:[{priority:0,fieldId:"vars",key:"alignment",input:{name:"radioimages",label:"@ECOM_GALLERY_RIBBON_ALIGNMENT_PANEL@",options:[{value:"left",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/left.png"},{value:"center",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/center.png"},{value:"right",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/right.png"}]}},{priority:0,fieldId:"ribbonSpacerTop",key:"comp.size",format:"Mobile",input:{name:"slider",maxVal:"220",minVal:"0",label:"@ECOM_GALLERY_RIBBON_POSITION_PANEL@"}}]},{name:"VideoProductMedia",forType:"wix:Video",format:"Mobile",comp:{name:"VBox",items:[{comp:{name:"FixedRatioLayout",aspectRatio:"1",items:[{id:"productVideo",data:"this",comp:{name:"Video",showControls:"show",autoplay:"false",loop:"false",showinfo:"false",lightTheme:"false"},layout:{width:"100%",height:250}}]}}]},customizations:[{priority:58,fieldId:"productVideo",key:"comp.showControls",input:{name:"combobox",spaceAfter:"10",label:"@ECOM_PRODUCT_VIDEO_CONTROL_BAR_PANEL@",options:[{label:"@ECOM_PRODUCT_VIDEO_SHOW_CONTROL_BAR_OPT_PANEL@",value:"show"},{label:"@ECOM_PRODUCT_VIDEO_HIDE_CONTROL_BAR_OPT_PANEL@",value:"hide"},{label:"@ECOM_PRODUCT_VIDEO_AUTO_HIDE_CONTROL_BAR_OPT_PANEL@",value:"autohide"}]}},{priority:56,fieldId:"productVideo",key:"comp.autoplay",input:{name:"checkbox",spaceAfter:"10",defaultVal:"false",trueVal:"true",label:"@ECOM_PRODUCT_VIDEO_AUTOPLAY_PANEL@",falseVal:"false"}},{priority:54,fieldId:"productVideo",key:"comp.loop",input:{name:"checkbox",spaceAfter:"10",defaultVal:"false",trueVal:"true",label:"@ECOM_PRODUCT_VIDEO_LOOP_PANEL@",falseVal:"false"}},{priority:53,fieldId:"productVideo",key:"comp.showinfo",input:{name:"checkbox",spaceAfter:"10",defaultVal:"false",trueVal:"true",label:"@ECOM_PRODUCT_VIDEO_SHOW_INFO_PANEL@",falseVal:"false"}},{priority:52,fieldId:"productVideo",key:"comp.lightTheme",input:{name:"checkbox",spaceAfter:"10",defaultVal:"false",trueVal:"true",label:"@ECOM_PRODUCT_VIDEO_LIGHT_THEME_PANEL@",falseVal:"false"}}]},{name:"ImageProductMedia",forType:"wix:Image",format:"Mobile",comp:{name:"VBox",items:[{id:"productZoomImage",data:"this",comp:{name:"Image",style:"wp2",imageMode:"full"},layout:{height:250,width:"100%"}}]},customizations:[{priority:40,fieldId:"productZoomImage",key:"comp.imageMode",format:"Mobile",input:{name:"combobox",label:"@ECOM_IMAGE_MODE_PANEL@",options:[{label:"@ECOM_IMAGE_MODE_CROP_PANEL@",value:"fill"},{label:"@ECOM_IMAGE_MODE_CENTER_PANEL@",value:"full"}]}}]},{name:"ZoomDetails",forType:"OptionItem",format:"Mobile",vars:{optionSelected:!0},comp:{name:"VBox",cssClass:{$expr:"if($optionSelected, 'selectionClass', 'noSelectionClass')"},pack:"start",items:[{comp:{name:"HBox","box-align":"baseline",items:[{value:"!",comp:{name:"Label",hidden:{$expr:"$optionSelected"},color:"#ffffff",bold:"true"},layout:{width:20,height:20,"text-align":"center","border-radius":"50%",background:"red"}},{comp:{name:"HSpacer",hidden:{$expr:"$optionSelected"},size:"5"}},{id:"optionsLabel",data:"title",comp:{name:"Label",style:"Body L",bold:"true"}}]},layout:{spacerBefore:15}},{id:"optionSpacerBottom",comp:{name:"VSpacer",size:"7"}},{comp:{name:"ProductOption"},layout:{width:"100%"}},{comp:{name:"HorizontalLine",hidden:{$expr:"or(ne(Array.length(parent.parent.options), add($indexInParent, 1)), not($optionSelected))"},style:"hl4"}}]},stylesheet:[{".selectionClass":{}},{".noSelectionClass":{"background-color":"#fce4e5",margin:"0px -10px",padding:"0 2px 0 10px","Box-sizing":"Border-box"}}]},{name:"ProductOption",forType:"OptionsList",format:"Mobile",comp:{name:"VBox",items:[{comp:{name:"SelectOptionsList",skin:"ecommerce.skins.mcom.MobileSelectOptionsListSkin",validationVar:"optionSelected",isStyleEditable:"false",optionSkin:{$expr:"if(eq(optionType,'text'),'ecommerce.skins.mcom.MobileTextOptionSkin','ecommerce.skins.mcom.MobileColorOptionSkin')"},optionComp:{$expr:"if(eq(optionType,'text'),'ecommerce.integration.components.MobileTextOption','ecommerce.integration.components.MobileColorOption')"},events:{selectionChanged:"productOptionChanged"}}}]}},{name:"ProductOption",forType:"EcomTextOption",format:"Mobile",comp:{name:"VBox",pack:"start",items:[{data:"text",comp:{name:"TextArea",skin:"ecommerce.skins.mcom.MobileTextAreaInputSkin",styleNS:"ecomTextArea",validationVar:"optionSelected",isStyleEditable:"false",maxLength:"300",css:{width:"100%"},events:{inputChanged:"textAreaOptionChanged"}},layout:{spacerAfter:15}}]}},{name:"ProductOption",forType:"ComboOptionsList",format:"Mobile",comp:{name:"VBox",pack:"start",items:[{comp:{name:"ComboBox",skin:"ecommerce.skins.mcom.MobileDropDownInputSkin2",styleNS:"ecomComboBox",validationVar:"optionSelected",isStyleEditable:"false",hasPrompt:"true",events:{selectionChanged:"productOptionChanged"}},layout:{height:25,spacerBefore:5,spacerAfter:15}}]}},{name:"Joined",forType:"JoinedCart",format:"Mobile",comp:{name:"VBox",items:[{data:"cart.itemsCount",comp:{name:"SwitchBox",cases:{"default":[{comp:{name:"Populated"}}],0:[{data:"cart",comp:{name:"Empty"}}]}}}]}},{name:"Empty",forType:"Cart",format:"Mobile",comp:{name:"Area",styleNS:"ecomEmptyCartBG",items:[{id:"emptyCartBGBox",comp:{name:"VBox","box-align":"center",items:[{id:"emptyCartLbl",value:"@ECOM_YOUR_SHOPPING_CART_IS_EMPTY_TEXT@",comp:{name:"Label"},layout:{"text-align":"center",spacerBefore:"*"}},{data:"emptyCartImage",comp:{name:"Image"},layout:{margin:"10px auto",height:"60px",width:"70px",spacerAfter:"*"}}]},layout:{height:150}}]}},{name:"Populated",forType:"JoinedCart",format:"Mobile",comp:{name:"VBox",items:[{data:"cart",comp:{name:"Joined"}},{id:"cartCouponSpacer",comp:{name:"VSpacer",size:"0"}},{data:"cart",comp:{name:"Summary"}},{id:"couponCheckoutSpacer",comp:{name:"VSpacer",size:"0"}},{data:"checkout",comp:{name:"CompactJoined"}}],css:{"text-align":"left"}},customizations:[{priority:53,fieldId:"cartCouponSpacer",key:"comp.size",format:"Mobile",input:{name:"slider",maxVal:"20",minVal:"0",label:"@ECOM_CART_AND_TOTAL_SPACING_PANEL@"}},{priority:52,fieldId:"couponCheckoutSpacer",key:"comp.size",format:"Mobile",input:{name:"slider",maxVal:"20",minVal:"0",label:"@ECOM_TOTAL_AND_CHECKOUT_SPACING_PANEL@"}}]},{name:"Joined",forType:"Cart",format:"Mobile",comp:{name:"VBox",items:[{data:"items",comp:{name:"List2",skin:"ecommerce.skins.mcom.MobileVerticalRepeaterSkin",templates:{item:{comp:{name:"VBox",items:[{comp:{name:"CartItem"}}],css:{spacer:7,"box-flex":1}}}}}}]}},{name:"CartItem",forType:"ProductItem",format:"Mobile",comp:{name:"HBox",items:[{comp:{name:"VBox",items:[{id:"cartProductImage",data:"image",comp:{name:"Image",imageMode:"fill"},layout:{height:115,width:115}},{data:"quantityRange",comp:{name:"NumericStepper",cssClass:"mobileQty",style:"nums2",events:{inputChanged:"qty-input-changed",blur:"qty-input-blur",validationFailed:"qty-invalid-value"}},layout:{width:115,spacerBefore:10}}]},layout:{spacerAfter:10}},{comp:{name:"VBox",items:[{comp:{name:"HBox","box-align":"top",items:[{data:"title",comp:{name:"Label",style:"Body S",bold:"true"},layout:{"box-flex":1}},{comp:{name:"Button2",label:"",events:{mousedown:"button-down"}},layout:{width:30,height:30,spacerBefore:10}}]}},{data:"optionsDescription",comp:{name:"List2",styleNS:"ecomOptionsList",isStyleEditable:"false",templates:{item:{comp:{name:"VBox",hidden:{$expr:"String.isEmpty(description)"},items:[{value:{$expr:"String.concat(title, ':')"},comp:{name:"Label",hidden:{$expr:"String.isEmpty(title)"},style:"Body S"}},{data:"description",comp:{name:"Label",style:"Body S",showTooltip:"true"}},{comp:{name:"VSpacer",size:"5"}}]}}}},layout:{spacerBefore:10}},{data:"price",comp:{name:"Label",bold:"true"},layout:{"text-align":"right",spacerBefore:"*",spacerAfter:0}}]},layout:{"box-flex":1,width:133,spacerAfter:10}}],css:{"padding-left":10}},stylesheet:[{".mobileQty input":{"font-weight":"bold","-webkit-appearance":"none","border-radius":0}},{".mobileQty input::-webkit-outer-spin-button":{}},{".mobileQty input::-webkit-inner-spin-button":{"-webkit-appearance":"none",margin:0}}],customizations:[{priority:40,fieldId:"cartProductImage",key:"comp.imageMode",format:"Mobile",input:{name:"combobox",label:"@ECOM_IMAGE_MODE_PANEL@",options:[{label:"@ECOM_IMAGE_MODE_CROP_PANEL@",value:"fill"},{label:"@ECOM_IMAGE_MODE_CENTER_PANEL@",value:"full"}]}}]},{name:"CompactJoined",forType:"CheckoutButton",format:"Mobile",comp:{name:"HBox",items:[{data:"checkoutButtonLink",comp:{name:"Button",styleNS:"ecomCheckout",align:"center",margin:"1",label:"@ECOM_CHECKOUT_BTN_TEXT@"},layout:{"box-flex":1,height:50}}],events:{click:"click-checkout"}}},{name:"Summary",forType:"Cart",format:"Mobile",comp:{name:"Area",styleNS:"ecomCouponBox",items:[{comp:{name:"VBox",items:[{comp:{name:"HBox",hidden:{$expr:"not(hasCoupon)"},items:[{comp:{name:"VBox",items:[{comp:{name:"HBox",items:[{id:"subtotalLabel",value:"@ECOM_CART_SUBTOTAL_TEXT@",comp:{name:"Label",style:"Body L",singleLine:"true",color:"#ffffff"},layout:{"box-flex":1,spacer:7}},{data:"subTotal",comp:{name:"Label",style:"Body L",color:"#ffffff"},layout:{spacer:7}}]},layout:{background:"#373737"}},{data:"coupon",comp:{name:"Internal"}}]},layout:{"box-flex":1}}]},layout:{spacerBefore:7}},{data:"hasFees",comp:{name:"SwitchBox",cases:{"default":[],"true":[{data:"fees",comp:{name:"CartFees"}}]}}},{comp:{name:"HBox",items:[{id:"totalLabel",value:"@ECOM_CART_TOTAL_TEXT@",comp:{name:"Label",singleLine:"true",bold:"true"},layout:{"box-flex":1,spacerBefore:7,spacerAfter:3}},{data:"totalPrice",comp:{name:"Label",bold:"true"},layout:{spacerAfter:7}}]},layout:{spacer:20,"box-flex":1}}]}}]}},{name:"Internal",forType:"Coupon",format:"Mobile",vars:{couponValid:!0,toggleState:"off"},comp:{name:"VBox",items:[{comp:{name:"HBox",items:[{data:"discountAmount",comp:{name:"SwitchBox",cases:{"default":[{comp:{name:"VBox",items:[{comp:{name:"HBox","box-align":"center",items:[{comp:{name:"HSpacer",size:"7"}},{data:"couponName",comp:{name:"Label",singleLine:"true"},layout:{"box-flex":1,spacerAfter:5}},{data:"discountAmount",comp:{name:"Label",bold:"true"},layout:{spacerAfter:7}},{comp:{name:"Button2",skin:"ecommerce.skins.mcom.MobileRemoveButton",label:" ",events:{click:"clear-coupon"}},layout:{width:30,height:30}},{comp:{name:"HSpacer",size:"7"}}]},layout:{"box-flex":1,spacer:20}}]}}],"":[{comp:{name:"Toggle",initialState:{$expr:"$toggleState"},templates:{on:{comp:{name:"VBox",cssClass:{$expr:"if($couponValid, 'selectionClass', 'noSelectionClass')"},pack:"start",items:[{comp:{name:"HBox","box-align":"center",items:[{comp:{name:"HSpacer",size:"7"}},{data:"couponCode",comp:{name:"ErasableTextInput",skin:"ecommerce.skins.mcom.MobileErasableTextInputSkin",validationVar:"couponValid",events:{inputChanged:"clear-message"}},layout:{"box-flex":1,spacerAfter:7}},{id:"applyCouponBtn",comp:{name:"Button2",styleNS:"ecomApplyCoupon",label:"@ECOM_CART_APPLY_BUTTON_TEXT@",events:{click:"set-coupon"}},layout:{spacerAfter:4,width:80,height:38}},{comp:{name:"HSpacer",size:"7"}}]},layout:{spacer:20}},{value:{$expr:"$couponValid"},comp:{name:"SwitchBox",pack:"start",cases:{"default":[],"false":[{comp:{name:"HBox","box-align":"center",items:[{value:"!",comp:{name:"Label",color:"#ffffff",bold:"true"},layout:{width:20,height:20,"text-align":"center","border-radius":"50%",background:"red",spacerBefore:7,spacerAfter:7}},{data:"validationMessage",comp:{name:"Label",color:"#373737"},layout:{width:235}}]},layout:{spacerAfter:20}}]}}}]}},off:{comp:{name:"VBox",items:[{comp:{name:"HBox","box-align":"middle",items:[{comp:{name:"Button2",skin:"ecommerce.skins.mcom.MobileAddButton",label:"+"},layout:{width:30,height:30}},{id:"addCouponLabel",value:"@ECOM_CART_ADD_COUPON_TEXT@",comp:{name:"Label",singleLine:"true",bold:"true"},layout:{"box-flex":1,spacer:10}}],events:{click:"set:$toggleState='on'"}},layout:{spacer:20,"box-flex":1}}],css:{"margin-left":7,"margin-right":7}}}}}}]}},layout:{"box-flex":1,"margin-top":"-3px"}}]}},{comp:{name:"HorizontalLine"}}],css:{"min-width":"100%","min-height":"100%"}},stylesheet:[{".selectionClass":{}},{".noSelectionClass":{"background-color":"#fce4e5",border:"solid 2px #c61a16","margin-left":"0px","margin-right":"0px",padding:0,"Box-sizing":"Border-box"}}]},{name:"CartFees",forType:"Fees",format:"Mobile",data:"destination._type",comp:{name:"SwitchBox",cases:{"default":[{data:"destination",comp:{name:"UnsupportedFeesDestination"}}],PredefinedDestination:[{comp:{name:"PredefinedFeesDestination"}}],AdvancedDestination:[{data:"destination",comp:{name:"AdvancedFeesDestination"}}]}}},{name:"PredefinedFeesDestination",forType:"Fees",format:"Mobile",comp:{name:"VBox",items:[{data:"destination",comp:{name:"FeesDestination"},layout:{spacerBefore:15,spacerAfter:10}},{comp:{name:"HBox",hidden:{$expr:"String.isEmpty(shippingFees)"},items:[{id:"shippingFeesLabel",value:"@ECOM_CART_SHIPPING_FEES_TITLE@",comp:{name:"Label",singleLine:"true"},layout:{"box-flex":1,spacer:7}},{data:"shippingFees",comp:{name:"Label"},layout:{spacerAfter:7}}]},layout:{"box-flex":1}},{comp:{name:"VSpacer",hidden:{$expr:"or(String.isEmpty(shippingFees),String.isEmpty(taxFees))"},size:"10"}},{comp:{name:"HBox",hidden:{$expr:"String.isEmpty(taxFees)"},items:[{id:"taxFeesLabel",value:"@ECOM_CART_TAX_FEES_TEXT@",comp:{name:"Label",singleLine:"true"},layout:{"box-flex":1,spacer:7}},{data:"taxFees",comp:{name:"Label"},layout:{spacerAfter:7}}]},layout:{"box-flex":1}},{comp:{name:"HorizontalLine"},layout:{spacerBefore:15}}]}},{name:"FeesDestination",forType:"PredefinedDestination",format:"Mobile",comp:{name:"HBox","box-align":"baseline",items:[{id:"feesToLabel",value:"@ECOM_CART_FEES_FOR_TITLE@",comp:{name:"Label"},layout:{spacerBefore:7}},{comp:{name:"HBox",items:[{data:"name",comp:{name:"InlineText",underline:"true",events:{"dom:mousedown":"changeDestination"}},layout:{"box-flex":1,"text-align":"right"}}]},layout:{"text-align":"right","box-flex":1,spacerBefore:"10px",spacerAfter:7}}]}},{name:"AdvancedFeesDestination",forType:"AdvancedDestination",format:"Mobile",vars:{optionSelected:!0},comp:{name:"VBox",cssClass:{$expr:"if($optionSelected, 'selectionClass', 'noSelectionClass')"},pack:"start",items:[{comp:{name:"ShippingAndTaxTitle"},layout:{spacerBefore:15,spacerAfter:7}},{comp:{name:"HBox",items:[{comp:{name:"AdvancedDestinationCountries"},layout:{spacer:7,"box-flex":1}}]},layout:{spacerAfter:20}},{comp:{name:"HorizontalLine",hidden:{$expr:"not($optionSelected)"}}}]},stylesheet:[{".selectionClass":{}},{".noSelectionClass":{"background-color":"#fce4e5",border:"solid 2px #c61a16",padding:"0 7px","Box-sizing":"Border-box"}}]},{name:"AdvancedDestinationCountries",forType:"AdvancedDestination",format:"Mobile",comp:{name:"VBox",items:[{id:"countriesCombo",data:"countries",comp:{name:"ComboBox",skin:"ecommerce.skins.mcom.MobileDropDownInputSkin2",styleNS:"ecomShippingComboBox",validationVar:"optionSelected",isStyleEditable:"false",hasPrompt:"true",promptText:"@ECOM_CART_SHIPPING_COMBO_SELECT_PROMPT@",events:{selectionChanged:"countrySelected"}},layout:{height:25}},{comp:{name:"VSpacer",hidden:{$expr:"Array.isEmpty(regions.items)"},size:"10"}},{id:"combo",data:"regions",comp:{name:"ComboBox",hidden:{$expr:"Array.isEmpty(regions.items)"},skin:"ecommerce.skins.mcom.MobileDropDownInputSkin2",styleNS:"ecomShippingComboBox",validationVar:"optionSelected",isStyleEditable:"false",hasPrompt:"true",promptText:"@ECOM_CART_SHIPPING_COMBO_SELECT_PROMPT@",events:{selectionChanged:"regionSelected"}},layout:{height:25}}]}},{name:"UnsupportedFees",forType:"Destination",format:"Mobile",comp:{name:"HBox",items:[{comp:{name:"Css",items:[{value:"Mobile Unsupported Fees",comp:{name:"Label",style:"Body L",color:"#373737"}},{id:"destinationUnsupportedMsg",value:"@ECOM_CART_UNSUPPORTED_DESTINATION_MSG@",comp:{name:"InlineText",color:"#373737",css:{"margin-right":"5px"}}},{id:"changeDestinationLink",value:"@ECOM_CART_CHANGE_DESTINATION_LINK_TEXT@",comp:{name:"InlineText",underline:"true",color:"#373737",events:{"dom:mousedown":"changeDestination"}}}]},layout:{spacer:7}}]}},{name:"ShippingAndTaxTitle",forType:"AdvancedDestination",format:"Mobile",comp:{name:"HBox","box-align":"center",items:[{value:"!",comp:{name:"Label",hidden:{$expr:"$optionSelected"},color:"#ffffff",bold:"true"},layout:{width:20,height:20,"text-align":"center","border-radius":"50%",background:"red",spacerBefore:7,spacerAfter:7}},{comp:{name:"HSpacer",hidden:{$expr:"$optionSelected"},size:"3"}},{id:"shippingAndTaxTitle",value:"@ECOM_CART_SHIPPING_AND_TAX_TITLE@",comp:{name:"Label"},layout:{spacer:7}}]}},{name:"SocialButtons",forType:"ProductBundle",format:"Mobile",vars:{iconSize:53},comp:{name:"VBox",pack:"start",items:[{comp:{name:"HBox",items:[{id:"GoogleShare",comp:{name:"HBox",hidden:"true",items:[{comp:{name:"Stack",stackType:"static",items:[{value:{_type:"wix:Image",src:"images/social/google_plus-new.png",width:42,height:42},comp:{name:"Image",style:{},isStyleEditable:"false"},layout:{width:{$expr:"$iconSize"},height:{$expr:"$iconSize"}}},{comp:{name:"HBox",css:{width:"100%",height:"100%"}}}],events:{click:{params:{service:"google"},event:"shareProductPage"}}}},{id:"socialIconsSpacer",comp:{name:"HSpacer",size:"8"}}]}},{id:"FancyShare",comp:{name:"HBox",hidden:"true",items:[{comp:{name:"Stack",stackType:"static",items:[{value:{_type:"wix:Image",src:"images/social/fancy-new.png",width:42,height:42},comp:{name:"Image",style:{},isStyleEditable:"false"},layout:{width:{$expr:"$iconSize"},height:{$expr:"$iconSize"}}},{comp:{name:"HBox",css:{width:"100%",height:"100%"}}}],events:{click:{params:{service:"fancy"},event:"shareProductPage"}}}},{id:"socialIconsSpacer",comp:{name:"HSpacer",size:"8"}}]}},{id:"PinterestShare",comp:{name:"HBox",hidden:"true",items:[{comp:{name:"Stack",stackType:"static",items:[{value:{_type:"wix:Image",src:"images/social/pinterest-new.png",width:42,height:42},comp:{name:"Image",style:{},isStyleEditable:"false"},layout:{width:{$expr:"$iconSize"},height:{$expr:"$iconSize"}}},{comp:{name:"HBox",css:{width:"100%",height:"100%"}}}],events:{click:{params:{service:"pinterest"},event:"shareProductPage"}}}},{id:"socialIconsSpacer",comp:{name:"HSpacer",size:"8"}}]}},{id:"TwitterShare",comp:{name:"HBox",hidden:"true",items:[{comp:{name:"Stack",stackType:"static",items:[{value:{_type:"wix:Image",src:"images/social/twitter-new.png",width:42,height:42},comp:{name:"Image",style:{},isStyleEditable:"false"},layout:{width:{$expr:"$iconSize"},height:{$expr:"$iconSize"}}},{comp:{name:"HBox",css:{width:"100%",height:"100%"}}}],events:{click:{params:{service:"twitter"},event:"shareProductPage"}}}},{id:"socialIconsSpacer",comp:{name:"HSpacer",size:"8"}}]}},{id:"FacebookShare",comp:{name:"HBox",hidden:"true",items:[{comp:{name:"Stack",stackType:"static",items:[{value:{_type:"wix:Image",src:"images/social/facebook-new.png",width:42,height:42},comp:{name:"Image",style:{},isStyleEditable:"false"},layout:{width:{$expr:"$iconSize"},height:{$expr:"$iconSize"}}},{comp:{name:"HBox",css:{width:"100%",height:"100%"}}}],events:{click:{params:{service:"facebook"},event:"shareProductPage"}}}}]}}]},layout:{spacer:10}}]}},{name:"Joined",forType:"JoinedCart",data:"cart.itemsCount",comp:{name:"SwitchBox",cases:{"default":[{comp:{name:"Populated"}}],0:[{data:"cart",comp:{name:"Empty"}}]}}},{name:"Empty",forType:"Cart",comp:{name:"Area",styleNS:"ecomEmptyCartBG",items:[{id:"emptyCartBGBox",comp:{name:"VBox","box-align":"center",items:[{id:"emptyCartLbl",value:"@ECOM_YOUR_SHOPPING_CART_IS_EMPTY_TEXT@",comp:{name:"Label"},layout:{"text-align":"center",spacerBefore:"*"}},{data:"emptyCartImage",comp:{name:"Image"},layout:{margin:"10px auto",height:"60px",width:"70px",spacerAfter:"*"}}]},layout:{height:150}}]},customizations:[{priority:0,fieldId:"emptyCartLbl",key:"value",format:"*",input:{name:"textfield",label:"@ECOM_EMPTY_CART_TEXT_PANEL@",maxLength:"70"}},{priority:0,fieldId:"emptyCartBGBox",key:"layout.height",input:{name:"slider",maxVal:"500",minVal:"100",label:"@ECOM_SHOPPING_CART_MIN_HEIGHT_PANEL@"}}]},{name:"Populated",forType:"JoinedCart",comp:{name:"VBox",items:[{data:"cart",comp:{name:"Joined"}},{id:"cartCouponSpacer",comp:{name:"VSpacer",size:"10"}},{comp:{name:"HBox",items:[{comp:{name:"HSpacer",size:"*"}},{id:"footer",comp:{name:"VBox",items:[{data:"cart",comp:{name:"Summary"}},{id:"couponCheckoutSpacer",comp:{name:"VSpacer",size:"10"}},{data:"checkout",comp:{name:"CompactJoined"}}],css:{"text-align":"left"}},layout:{width:300}}]},layout:{"text-align":"right"}}]},customizations:[{priority:53,fieldId:"cartCouponSpacer",key:"comp.size",input:{name:"slider",maxVal:"50",minVal:"0",label:"@ECOM_CART_AND_TOTAL_SPACING_PANEL@"}},{priority:52,fieldId:"couponCheckoutSpacer",key:"comp.size",input:{name:"slider",maxVal:"50",minVal:"0",label:"@ECOM_TOTAL_AND_CHECKOUT_SPACING_PANEL@"}},{priority:51,fieldId:"footer",key:"layout.width",input:{name:"slider",maxVal:"500",minVal:"250",label:"@ECOM_COUPON_AND_CHECKOUT_BTN_WIDTH_PANEL@"}}]},{name:"Joined",forType:"Cart",comp:{name:"VBox",items:[{comp:{name:"Area",styleNS:"ecomCartHeader",items:[{comp:{name:"VBox",items:[{comp:{name:"HBox",items:[{id:"itemColumn",value:"@ECOM_CART_CAPTION_ITEM@",comp:{name:"Label"},layout:{"box-flex":1,"min-width":100,spacerBefore:20}},{id:"optionsColumn",value:"@ECOM_CART_CAPTION_OPTIONS@",comp:{name:"Label",hidden:{$expr:"not(hasProductsOptions)"}},layout:{width:200,spacerBefore:15,"text-align":"center"}},{id:"qtyColumn",value:"@ECOM_CART_CAPTION_QUANTITY@",comp:{name:"Label"},layout:{width:100,spacerBefore:15,"text-align":"center"}},{id:"priceColumn",value:"@ECOM_CART_CAPTION_PRICE@",comp:{name:"Label"},layout:{width:100,spacerBefore:15,"text-align":"center"}},{id:"removeColumn",value:"@ECOM_CART_CAPTION_REMOVE@",comp:{name:"Label"},layout:{width:100,spacerBefore:15,spacerAfter:20,"text-align":"center"}}]},layout:{width:"100%",spacer:15}}],css:{width:"100%",position:"relative"}}}]}},{id:"headerBodySpacer",comp:{name:"VSpacer",size:"0"}},{comp:{name:"VBox",items:[{data:"items",comp:{name:"VerticalList",style:"vr1",skin:"wysiwyg.viewer.skins.VerticalRepeaterSkin",templates:{item:{comp:{name:"VBox",items:[{comp:{name:"HBox","box-align":"center",items:[{comp:{name:"VBox",items:[{comp:{name:"HBox","box-align":"center",items:[{id:"cartProductImage",data:"image",comp:{name:"Image"},layout:{height:55,width:55}},{data:"title",comp:{name:"Label",style:"Body S"},layout:{spacerBefore:10,"box-flex":1}}]},layout:{spacer:15}}]},layout:{"box-flex":1,"min-width":100,spacerBefore:20}},{comp:{name:"VBox",hidden:{$expr:"Array.isEmpty(optionsDescription)"},"box-align":"center",items:[{data:"optionsDescription",comp:{name:"VerticalList",styleNS:"ecomOptionsList",isStyleEditable:"false",templates:{item:{comp:{name:"HBox","box-align":"center",items:[{data:"title",comp:{name:"Label",style:"Body S"},layout:{width:95,"text-align":"right",spacerAfter:10}},{data:"description",comp:{name:"Label",style:"Body M",singleLine:"true",showTooltip:"true"},layout:{width:95,"text-align":"left"}}]}}}},layout:{width:200}}]},layout:{spacerBefore:15}},{comp:{name:"VBox","box-align":"center",items:[{comp:{name:"HBox",items:[{data:"quantityRange",comp:{name:"NumericStepper",events:{inputChanged:"qty-input-changed",blur:"qty-input-blur",keyup:"qty-input-keyup",validationFailed:"qty-invalid-value"}},layout:{width:70,spacer:"*"}}]},layout:{width:100}}]},layout:{spacerBefore:15}},{comp:{name:"VBox","box-align":"center",items:[{data:"price",comp:{name:"Label"},layout:{width:100,"text-align":"center"}}]},layout:{spacerBefore:15}},{comp:{name:"VBox",items:[{comp:{name:"HBox",items:[{comp:{name:"Button",cssClass:"justx",styleNS:"ecomRemoveFromCart",label:"",events:{mousedown:"button-down"}},layout:{width:20,height:20,spacer:"*"}}]},layout:{width:100}}]},layout:{spacerAfter:20,spacerBefore:15}}],css:{width:"100%","box-sizing":"border-box"}}}],css:{width:"100%"}}}}}}]}}]},customizations:[{priority:45,fieldId:"itemColumn",key:"value",input:{name:"textfield",label:"@ECOM_CART_ITEM_COLUMN_TITLE_PANEL@",maxLength:"60"}},{priority:44,fieldId:"optionsColumn",key:"value",input:{name:"textfield",label:"@ECOM_CART_OPTIONS_COLUMN_TITLE_PANEL@",maxLength:"60"}},{priority:43,fieldId:"qtyColumn",key:"value",input:{name:"textfield",label:"@ECOM_CART_QUANTITY_COLUMN_TITLE_PANEL@",maxLength:"60"}},{priority:42,fieldId:"priceColumn",key:"value",input:{name:"textfield",label:"@ECOM_CART_PRICE_COLUMN_TITLE_PANEL@",maxLength:"60"}},{priority:41,fieldId:"removeColumn",key:"value",input:{name:"textfield",label:"@ECOM_CART_REMOVE_COLUMN_TITLE_PANEL@",maxLength:"60"}},{priority:54,fieldId:"headerBodySpacer",key:"comp.size",input:{name:"slider",maxVal:"20",minVal:"0",label:"@ECOM_CART_HEADER_AND_BODY_SPACING_PANEL@"}},{priority:40,fieldId:"cartProductImage",key:"comp.imageMode",input:{name:"combobox",label:"@ECOM_IMAGE_MODE_PANEL@",options:[{label:"@ECOM_IMAGE_MODE_CROP_PANEL@",value:"fill"},{label:"@ECOM_IMAGE_MODE_CENTER_PANEL@",value:"full"}]}}]},{name:"Summary",forType:"Cart",comp:{name:"Area",styleNS:"ecomCouponBox",items:[{comp:{name:"VBox",items:[{comp:{name:"HBox",hidden:{$expr:"not(hasCoupon)"},items:[{comp:{name:"VBox",items:[{comp:{name:"HBox",items:[{id:"subtotalLabel",value:"@ECOM_CART_SUBTOTAL_TEXT@",comp:{name:"Label",singleLine:"true"},layout:{"box-flex":1,spacerAfter:10}},{data:"subTotal",comp:{name:"Label"}}]},layout:{spacerAfter:10}},{data:"coupon",comp:{name:"Internal"}}]},layout:{"box-flex":1,spacer:15}}]},layout:{spacer:15}},{id:"boxDivider",comp:{name:"HorizontalLine",hidden:{$expr:"not(hasCoupon)"}}},{data:"hasFees",comp:{name:"SwitchBox",cases:{"default":[],"true":[{comp:{name:"VBox",items:[{data:"fees",comp:{name:"CartFees"},layout:{spacer:15}},{comp:{name:"HorizontalLine"}}]}}]}}},{comp:{name:"HBox",items:[{comp:{name:"HBox",items:[{id:"totalLabel",value:"@ECOM_CART_TOTAL_TEXT@",comp:{name:"Label",singleLine:"true"},layout:{"box-flex":1,spacerAfter:10}},{data:"totalPrice",comp:{name:"Label"}}]},layout:{"box-flex":1,spacer:20}}]},layout:{spacerBefore:20}},{comp:{name:"VSpacer",size:"20"}}],css:{"box-sizing":"border-box","min-width":"100%",position:"relative"}}}]},customizations:[{priority:35,fieldId:"totalLabel",key:"value",format:"*",input:{name:"textfield",label:"@ECOM_CART_TOTAL_PANEL@",maxLength:"40"}},{priority:34,fieldId:"subtotalLabel",key:"value",format:"*",input:{name:"textfield",label:"@ECOM_CART_SUBTOTAL_PANEL@",maxLength:"40"}}]},{name:"CartFees",forType:"Fees",data:"destination._type",comp:{name:"SwitchBox",cases:{"default":[{data:"destination",comp:{name:"UnsupportedFeesDestination"}}],PredefinedDestination:[{comp:{name:"PredefinedFeesDestination"}}],AdvancedDestination:[{data:"destination",comp:{name:"AdvancedFeesDestination"}}]}}},{name:"PredefinedFeesDestination",forType:"Fees",comp:{name:"VBox",items:[{data:"destination",comp:{name:"FeesDestination"},layout:{spacerAfter:20}},{comp:{name:"HBox",hidden:{$expr:"String.isEmpty(shippingFees)"},items:[{comp:{name:"HBox",items:[{id:"shippingFeesLabel",value:"@ECOM_CART_SHIPPING_FEES_TITLE@",comp:{name:"Label",singleLine:"true"},layout:{"box-flex":1,spacerAfter:10}},{data:"shippingFees",comp:{name:"Label"}}]},layout:{"box-flex":1,spacer:15}}]}},{comp:{name:"VSpacer",hidden:{$expr:"or(String.isEmpty(shippingFees),String.isEmpty(taxFees))"},size:"10"}},{comp:{name:"HBox",hidden:{$expr:"String.isEmpty(taxFees)"},items:[{comp:{name:"HBox",items:[{id:"taxFeesLabel",value:"@ECOM_CART_TAX_FEES_TEXT@",comp:{name:"Label",singleLine:"true"},layout:{"box-flex":1,spacerAfter:10}},{data:"taxFees",comp:{name:"Label"}}]},layout:{"box-flex":1,spacer:15}}]}}]},customizations:[{priority:14,fieldId:"shippingFeesLabel",key:"value",format:"*",input:{name:"textfield",label:"@ECOM_CART_SHIPPING_FEES_TITLE_PANEL@",maxLength:"40"}},{priority:12,fieldId:"taxFeesLabel",key:"value",format:"*",input:{name:"textfield",label:"@ECOM_CART_TAX_FEES_TITLE_PANEL@",maxLength:"40"}}]},{name:"FeesDestination",forType:"PredefinedDestination",comp:{name:"HBox",items:[{comp:{name:"HBox",items:[{comp:{name:"Css",items:[{id:"feesToLabel",value:"@ECOM_CART_FEES_FOR_TITLE@",comp:{name:"InlineText",css:{"margin-right":"5px"}}},{data:"name",comp:{name:"InlineText",underline:"true",css:{cursor:"pointer"},events:{"dom:mousedown":"changeDestination"}}}]},layout:{"box-flex":1}}]},layout:{spacer:15,"box-flex":1}}]},customizations:[{priority:16,fieldId:"feesToLabel",key:"value",format:"*",input:{name:"textfield",label:"@ECOM_CART_FEES_FOR_TITLE_PANEL@",maxLength:"60"}}]},{name:"AdvancedFeesDestination",forType:"AdvancedDestination",comp:{name:"VBox",items:[{comp:{name:"ShippingAndTaxTitle"},layout:{spacerAfter:20}},{comp:{name:"HBox",items:[{comp:{name:"AdvancedDestinationCountries"},layout:{spacer:15,"box-flex":1}}]}}]}},{name:"AdvancedDestinationCountries",forType:"AdvancedDestination",comp:{name:"HBox",items:[{comp:{name:"VBox",items:[{id:"countriesCombo",data:"countries",comp:{name:"ComboBox",styleNS:"ecomShippingComboBox",isStyleEditable:"false",hasPrompt:"true",promptText:"@ECOM_CART_SELECT_COUNTRY_LABEL_TEXT@",events:{selectionChanged:"countrySelected"}},layout:{height:24}},{comp:{name:"VSpacer",hidden:{$expr:"Array.isEmpty(regions.items)"},size:"10"}},{id:"combo",data:"regions",comp:{name:"ComboBox",hidden:{$expr:"Array.isEmpty(regions.items)"},styleNS:"ecomShippingComboBox",isStyleEditable:"false",hasPrompt:"true",promptText:"@ECOM_CART_SHIPPING_COMBO_SELECT_PROMPT@",events:{selectionChanged:"regionSelected"}},layout:{height:24}}]},layout:{"box-flex":3}}]},customizations:[{priority:0,fieldId:"countriesCombo",key:"comp.promptText",format:"*",input:{name:"textfield",label:"@ECOM_CART_SELECT_COUNTRY_LABEL_PANEL@"}}]},{name:"UnsupportedFeesDestination",forType:"Destination",comp:{name:"HBox",items:[{comp:{name:"Css",items:[{id:"destinationUnsupportedMsg",value:"@ECOM_CART_UNSUPPORTED_DESTINATION_MSG@",comp:{name:"InlineText",css:{"margin-right":"5px"}}},{id:"changeDestinationLink",value:"@ECOM_CART_CHANGE_DESTINATION_LINK_TEXT@",comp:{name:"InlineText",underline:"true",css:{cursor:"pointer"},events:{"dom:mousedown":"changeDestination"}}}]},layout:{spacer:20}}]},customizations:[{priority:12,fieldId:"destinationUnsupportedMsg",key:"value",format:"*",input:{name:"textarea",label:"@ECOM_CART_UNSUPPORTED_DESTINATION_MSG_PANEL@",maxLength:"250",height:"50"}},{priority:11,fieldId:"changeDestinationLink",key:"value",format:"*",input:{name:"textfield",label:"@ECOM_CART_CHANGE_DESTINATION_LINK_PANEL@",maxLength:"40"}}]},{name:"ShippingAndTaxTitle",forType:"AdvancedDestination",comp:{name:"HBox",items:[{id:"shippingAndTaxTitle",value:"@ECOM_CART_SHIPPING_AND_TAX_TITLE@",comp:{name:"Label"},layout:{spacer:15}}]},customizations:[{priority:15,fieldId:"shippingAndTaxTitle",key:"value",format:"*",input:{name:"textfield",label:"@ECOM_CART_SHIPPING_AND_TAX_TITLE_PANEL@",maxLength:"40"}}]},{name:"Internal",forType:"Coupon",vars:{toggleState:"off"},data:"discountAmount",comp:{name:"SwitchBox",cases:{"default":[{comp:{name:"HBox","box-align":"center",items:[{data:"couponName",comp:{name:"Label",singleLine:"true"},layout:{"box-flex":1,spacerAfter:10}},{data:"discountAmount",comp:{name:"Label"},layout:{spacerAfter:2}},{comp:{name:"Button",cssClass:"justx",styleNS:"ecomRemoveFromCart",label:"",events:{click:"clear-coupon"}},layout:{height:20,width:20}}],css:{"min-width":"100%"}}}],"":[{comp:{name:"Toggle",initialState:{$expr:"$toggleState"},templates:{on:{comp:{name:"HBox",items:[{value:{$expr:"$useErasableTextInputComponent"},comp:{name:"SwitchBox",cases:{"default":[{data:"couponCode",comp:{name:"TextInput",styleNS:"ecomTextInput",events:{inputChanged:"clear-message"}}}],"true":[{data:"couponCode",comp:{name:"ErasableTextInput",events:{inputChanged:"clear-message"}}}]}},layout:{"box-flex":1,spacerAfter:10}},{id:"applyCouponBtn",comp:{name:"Button",styleNS:"ecomApplyCoupon",label:"@ECOM_CART_APPLY_BUTTON_TEXT@",events:{click:"set-coupon"}},layout:{width:62,height:30}}],css:{"min-width":"100%"}}},off:{comp:{name:"HBox","box-align":"center",items:[{id:"addCouponLabel",value:"@ECOM_CART_ADD_COUPON_TEXT@",comp:{name:"Label",singleLine:"true"},layout:{"box-flex":1,spacerAfter:10}},{comp:{name:"Button",cssClass:"circle",styleNS:"ecomRemoveFromCart",label:""},layout:{height:20,width:20}}],css:{"min-width":"100%"},events:{click:"set:$toggleState='on'"}}}}}}]},css:{"min-width":"100%"}},customizations:[{priority:23,fieldId:"addCouponLabel",key:"value",format:"*",input:{name:"textfield",label:"@ECOM_CART_ADD_COUPON_PANEL@",maxLength:"40"}},{priority:22,fieldId:"applyCouponBtn",key:"comp.label",format:"*",input:{name:"textfield",label:"@ECOM_CART_SUBMIT_BTN_TEXT_PANEL@",maxLength:"40"}},{priority:21,fieldId:"applyCouponBtn",key:"layout.width",input:{name:"slider",maxVal:"150",minVal:"50",label:"@ECOM_CART_SUBMIT_BTN_WIDTH_PANEL@"}}]},{name:"CompactJoined",forType:"CheckoutButton",comp:{name:"VBox",items:[{data:"checkoutButtonLink",comp:{name:"Button",styleNS:"ecomCheckout",align:"center",margin:"1",label:"@ECOM_CHECKOUT_BTN_TEXT@",events:{click:"click-checkout"}},layout:{height:50,width:"100%"}}]},customizations:[{priority:33,fieldId:"checkoutButtonLink",key:"comp.label",format:"*",input:{name:"textfield",label:"@ECOM_CHECKOUT_BTN_TEXT_PANEL@"}},{priority:32,fieldId:"checkoutButtonLink",key:"comp.align",format:"*",input:{name:"radioimages",label:"@ECOM_ALIGNMENT_LABEL_PANEL@",options:[{value:"left",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/left.png"},{value:"center",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/center.png"},{value:"right",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/right.png"}]}},{priority:31,fieldId:"checkoutButtonLink",key:"comp.margin",format:"*",input:{name:"slider",maxVal:"100",minVal:"0",label:"@ECOM_MARGIN_LABEL_PANEL@"}}]},{name:"Compact",forType:"CheckoutButton",comp:{name:"VBox",items:[{data:"checkoutButtonLink",comp:{name:"Button",styleNS:"ecomCheckout",align:"center",margin:"1",label:"@ECOM_CHECKOUT_BTN_TEXT@",events:{click:"click-checkout"}},layout:{width:"100%",height:"100%"}}]},customizations:[{priority:0,fieldId:"checkoutButtonLink",key:"comp.label",input:{name:"textfield",label:"@ECOM_CHECKOUT_BTN_TEXT_PANEL@"}},{priority:0,fieldId:"checkoutButtonLink",key:"comp.margin",input:{name:"slider",maxVal:"100",minVal:"0",label:"@ECOM_MARGIN_LABEL_PANEL@"}},{priority:0,fieldId:"checkoutButtonLink",key:"comp.align",input:{name:"radioimages",label:"@ECOM_ALIGNMENT_LABEL_PANEL@",options:[{value:"left",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/left.png"},{value:"center",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/center.png"},{value:"right",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/right.png"}]}}]},{name:"ProductOption",forType:"EcomTextOption",data:"text",comp:{name:"TextArea",styleNS:"ecomTextArea",isStyleEditable:"false",maxLength:"300",css:{width:"100%"},events:{inputChanged:"textAreaOptionChanged"}}},{name:"ProductOption",forType:"ComboOptionsList",comp:{name:"ComboBox",styleNS:"ecomComboBox",isStyleEditable:"false",hasPrompt:"true",events:{selectionChanged:"productOptionChanged"}}},{name:"ProductOption",forType:"OptionsList",comp:{name:"OptionsList",isStyleEditable:"false",events:{selectionChanged:"productOptionChanged"}}},{name:["ZoomDetails","ZoomImageLeft","ZoomImageCenter","ZoomImageCenterWide","ZoomGalleryLeft"],forType:"OptionItem",comp:{name:"VBox",items:[{id:"optionSpacerTop",comp:{name:"VSpacer",size:"20"}},{id:"optionsLabel",data:"title",comp:{name:"Label",style:"Body M"},layout:{display:"block",spacerAfter:15}},{comp:{name:"ProductOption"}}]},customizations:[{priority:22,fieldId:"optionSpacerTop",key:"comp.size",input:{name:"slider",maxVal:"50",minVal:"0",label:"@ECOM_PROD_OPTION_SPACING_ABOVE_PANEL@"}}]},{name:["ImageWithRibbonFill","ImageWithRibbonFull"],forType:"ProductBundle",comp:{name:"Stack",stackType:"layout",items:[{data:"currentImage",comp:{name:"Image",style:"wp2",imageMode:"fill"},layout:{height:"100%",width:"100%",position:"absolute"}},{value:{$expr:"String.isEmpty(ribbon)"},comp:{name:"SwitchBox",cases:{"default":[],"false":[{data:"ribbon",comp:{name:"GalleryRibbon"},layout:{display:"block"}}]}},layout:{height:"100%",width:"100%"}}]},customizations:[{priority:50,fieldId:"currentImage",key:"comp.imageMode",input:{name:"combobox",label:"@ECOM_IMAGE_MODE_PANEL@",options:[{label:"@ECOM_IMAGE_MODE_CROP_PANEL@",value:"fill"},{label:"@ECOM_IMAGE_MODE_CENTER_PANEL@",value:"full"}]}}]},{name:"Zoom",forType:"ProductBundle",comp:{name:"VBox",pack:"start",items:[{comp:{name:"HBox",items:[{comp:{name:"VBox",items:[{data:"productMedia._type",comp:{name:"SwitchBox",cases:{"default":[],"wix:Image":[{comp:{name:"ImageProductMediaWithRibbon"},layout:{height:400,width:400}}],MediaItem:[{data:"ribbon",comp:{name:"SwitchBox",cases:{"default":[{data:"ribbon",comp:{name:"GalleryRibbon"},layout:{width:400,display:"block"}}],"":[]}}}],"wix:Video":[{data:"productMedia",comp:{name:"VideoProductMedia"},layout:{height:400,width:400}}]}}},{comp:{name:"Css",hidden:{$expr:"lt(imagesCount,2)"},items:[{comp:{name:"InsideSliderGallery"},layout:{width:400,height:100}}]},layout:{spacerBefore:20}}]},layout:{width:400,spacerBefore:20}},{comp:{name:"HBox",items:[{comp:{name:"ZoomDetails"},layout:{"box-flex":1}}]},layout:{spacer:20,"box-flex":1}}]},layout:{spacer:20,"text-align":"left"}}],css:{width:840,"text-align":"left"}}},{name:"GalleryRibbonWithNoPicture",forType:"String",comp:{name:"VBox",items:[{id:"ribbonMarginTop",comp:{name:"VSpacer",size:"0"}},{comp:{name:"Area",styleNS:"ecomEmptyCartBG",items:[{comp:{name:"VBox",items:[{id:"ribbonSpacer",comp:{name:"VSpacer",size:"10"}},{comp:{name:"HBox","box-align":"center",items:[{comp:{name:"Label"},layout:{spacer:"*",color:"#fff","white-space":"nowrap","text-overflow":"ellipsis"}}]},layout:{height:"100%"}},{id:"ribbonSpacer",comp:{name:"VSpacer",size:"10"}}]},layout:{height:"100%"}}]}}]},customizations:[{priority:0,fieldId:"ribbonSpacer",key:"comp.size",input:{name:"slider",maxVal:"60",minVal:"5",label:"@ECOM_GALLERY_RIBBON_PADDING_PANEL@"}},{priority:0,fieldId:"ribbonMarginTop",key:"comp.size",input:{name:"slider",maxVal:"300",minVal:"0",label:"@ECOM_GALLERY_RIBBON_POSITION_PANEL@"}}]},{name:"FeedbackMessage",forType:"ProductItem",vars:{msgOrientation:"vertical",msgImageMode:"fill",betweenButtonsSpacer:10,continueShoppingBtnLbl:"@ECOM_FEEDBACK_MSG_CONTINUE_SHOPPING_BTN_TEXT@",gotoCheckoutBtnLbl:"@ECOM_FEEDBACK_MSG_CHECKOUT_BTN_TEXT@"},id:"orientationBox",value:{$expr:"$msgOrientation"},comp:{name:"SwitchBox",cases:{"default":[],vertical:[{comp:{name:"FeedbackMsgVertical"}}],horizontal:[{comp:{name:"FeedbackMsgHorizontal"}}]},css:{width:"600px","text-align":"left"}},customizations:[{priority:10,fieldId:"vars",key:"gotoCheckoutBtnLbl",format:"*",input:{name:"textfield",label:"@ECOM_FEEDBACK_MSG_CHECKOUT_BTN_TEXT_PANEL@",maxLength:"30"}},{priority:8,fieldId:"vars",key:"continueShoppingBtnLbl",format:"*",input:{name:"textfield",label:"@ECOM_FEEDBACK_MSG_CONTINUE_SHOPPING_BTN_TEXT_PANEL@",maxLength:"30"}},{priority:6,fieldId:"vars",key:"msgImageMode",input:{name:"combobox",label:"@ECOM_IMAGE_MODE_PANEL@",options:[{label:"@ECOM_IMAGE_MODE_CROP_PANEL@",value:"fill"},{label:"@ECOM_IMAGE_MODE_CENTER_PANEL@",value:"full"}]}},{priority:4,fieldId:"vars",key:"msgOrientation",format:"*",input:{name:"combobox",label:"@ECOM_FEEDBACK_MSG_SELECT_MESSAGE_LAYOUT_LABEL@",options:[{label:"@ECOM_FEEDBACK_MSG_VERTICAL_LAYOUT_OPT_LABEL@",value:"vertical"},{label:"@ECOM_FEEDBACK_MSG_HORIZONTAL_LAYOUT_OPT_LABEL@",value:"horizontal"}]}},{priority:2,fieldId:"vars",key:"betweenButtonsSpacer",format:"*",input:{name:"slider",maxVal:"80",minVal:"0",label:"@ECOM_FEEDBACK_MSG_DISTANCE_BETWEEN_BUTTONS_LABEL@"}}]},{name:"FeedbackMsgVertical",forType:"ProductItem",comp:{name:"HBox",items:[{comp:{name:"VBox",items:[{comp:{name:"HBox",items:[{data:"image",comp:{name:"Image",style:"wp2",imageMode:{$expr:"$msgImageMode"}},layout:{width:75,height:85,spacerAfter:20}},{comp:{name:"VBox",items:[{data:"title",comp:{name:"Label",style:"Body M",bold:"true"},layout:{spacerAfter:10}},{id:"feedbackMsgProdOpt",value:{$expr:"Array.join(options, ', ')"},comp:{name:"ClippedParagraph2",style:"Body S","max-chars":"150"}}]},layout:{"box-flex":1,spacerAfter:20}},{comp:{name:"VBox",items:[{data:"price",comp:{name:"Label",style:"Body M",bold:"true"}}]}}]},layout:{spacerBefore:39}},{comp:{name:"HorizontalLine"},layout:{spacer:20}},{comp:{name:"HBox",items:[{id:"continueShoppingBtn",value:{$expr:"if(String.isEmpty($continueShoppingBtnLbl),'@ECOM_FEEDBACK_MSG_CONTINUE_SHOPPING_BTN_TEXT@',$continueShoppingBtnLbl)"},comp:{name:"Button2",styleNS:"ecomFeedbackContinueShopping",events:{click:"continue-shopping"}},layout:{width:220,height:40,spacerBefore:"*"}},{id:"msgButtonsSpacer",comp:{name:"HSpacer",size:{$expr:"$betweenButtonsSpacer"}}},{id:"gotoCheckoutBtn",value:{$expr:"if(String.isEmpty($gotoCheckoutBtnLbl),'@ECOM_FEEDBACK_MSG_CHECKOUT_BTN_TEXT@',$gotoCheckoutBtnLbl)"},comp:{name:"Button2",styleNS:"ecomFeedbackCheckout",events:{click:"goto-checkout"}},layout:{width:220,height:40}}]},layout:{"box-flex":1,spacerAfter:40,height:40}}]},layout:{"box-flex":1,spacer:40}}],css:{width:600}}},{name:"FeedbackMsgHorizontal",forType:"ProductItem",comp:{name:"VBox",items:[{comp:{name:"HBox",items:[{comp:{name:"VBox",items:[{comp:{name:"HBox",items:[{data:"image",comp:{name:"Image",style:"wp2",imageMode:{$expr:"$msgImageMode"}},layout:{width:75,height:85}},{comp:{name:"VBox",items:[{data:"price",comp:{name:"Label",style:"Body M",bold:"true"},layout:{spacerAfter:10}},{data:"title",comp:{name:"Label",style:"Body M",bold:"true"},layout:{spacerAfter:6}},{id:"feedbackMsgProdOpt",value:{$expr:"Array.join(options, ', ')"},comp:{name:"ClippedParagraph2",style:"Body S","max-chars":"150"}}]},layout:{width:125,spacerBefore:20}}]},layout:{spacer:18}}]},layout:{width:220,spacer:40}},{comp:{name:"VerticalLine"}},{comp:{name:"VBox",items:[{id:"gotoCheckoutBtn",value:{$expr:"if(String.isEmpty($gotoCheckoutBtnLbl),'@ECOM_FEEDBACK_MSG_CHECKOUT_BTN_TEXT@',$gotoCheckoutBtnLbl)"},comp:{name:"Button2",styleNS:"ecomFeedbackCheckout",events:{click:"goto-checkout"}},layout:{width:220,height:40,spacerBefore:18}},{id:"msgButtonsSpacer",comp:{name:"VSpacer",size:{$expr:"$betweenButtonsSpacer"}}},{id:"continueShoppingBtn",value:{$expr:"if(String.isEmpty($continueShoppingBtnLbl),'@ECOM_FEEDBACK_MSG_CONTINUE_SHOPPING_BTN_TEXT@',$continueShoppingBtnLbl)"},comp:{name:"Button2",styleNS:"ecomFeedbackContinueShopping2",events:{click:"continue-shopping"}},layout:{width:220,height:40}}]},layout:{width:220,spacer:40}}]},layout:{"box-flex":1,spacerBefore:40,spacerAfter:39,width:600}}]}},{name:"ImageProductMediaWithRibbon",forType:"ProductBundle",comp:{name:"Stack",stackType:"layout",items:[{data:"productMedia",comp:{name:"ImageProductMedia"},layout:{width:400,height:400}},{data:"ribbon",comp:{name:"SwitchBox",cases:{"default":[{data:"ribbon",comp:{name:"GalleryRibbon"},layout:{width:400,display:"block"}}],"":[]}},layout:{display:"block"}}]}},{name:"VideoProductMedia",forType:"wix:Video",comp:{name:"VBox",items:[{comp:{name:"FixedRatioLayout",aspectRatio:"1",items:[{id:"productVideo",data:"this",comp:{name:"Video",showControls:"show",autoplay:"false",loop:"false",showinfo:"false",lightTheme:"false"},layout:{width:"100%",height:400}}]}}]},customizations:[{priority:58,fieldId:"productVideo",key:"comp.showControls",input:{name:"combobox",spaceAfter:"10",label:"@ECOM_PRODUCT_VIDEO_CONTROL_BAR_PANEL@",options:[{label:"@ECOM_PRODUCT_VIDEO_SHOW_CONTROL_BAR_OPT_PANEL@",value:"show"},{label:"@ECOM_PRODUCT_VIDEO_HIDE_CONTROL_BAR_OPT_PANEL@",value:"hide"},{label:"@ECOM_PRODUCT_VIDEO_AUTO_HIDE_CONTROL_BAR_OPT_PANEL@",value:"autohide"}]}},{priority:56,fieldId:"productVideo",key:"comp.autoplay",input:{name:"checkbox",spaceAfter:"10",defaultVal:"false",trueVal:"true",label:"@ECOM_PRODUCT_VIDEO_AUTOPLAY_PANEL@",falseVal:"false"}},{priority:54,fieldId:"productVideo",key:"comp.loop",input:{name:"checkbox",spaceAfter:"10",defaultVal:"false",trueVal:"true",label:"@ECOM_PRODUCT_VIDEO_LOOP_PANEL@",falseVal:"false"}},{priority:53,fieldId:"productVideo",key:"comp.showinfo",input:{name:"checkbox",spaceAfter:"10",defaultVal:"false",trueVal:"true",label:"@ECOM_PRODUCT_VIDEO_SHOW_INFO_PANEL@",falseVal:"false"}},{priority:52,fieldId:"productVideo",key:"comp.lightTheme",input:{name:"checkbox",spaceAfter:"10",defaultVal:"false",trueVal:"true",label:"@ECOM_PRODUCT_VIDEO_LIGHT_THEME_PANEL@",falseVal:"false"}}]},{name:"ImageProductMedia",forType:"wix:Image",comp:{name:"VBox","box-align":"center",items:[{id:"currentImage",data:"this",comp:{name:"Image",style:"wp2",imageMode:"full",showZoom:"true"},layout:{width:400,height:400}}]},customizations:[{priority:50,fieldId:"currentImage",key:"comp.imageMode",input:{name:"combobox",label:"@ECOM_IMAGE_MODE_PANEL@",options:[{label:"@ECOM_IMAGE_MODE_CROP_PANEL@",value:"fill"},{label:"@ECOM_IMAGE_MODE_CENTER_PANEL@",value:"full"}]}}]},{name:"ZoomDetails",forType:"ProductBundle",vars:{iconSize:20,iconsSpacer:10},comp:{name:"VBox",items:[{data:"title",comp:{name:"Label",style:"Heading S"}},{id:"titleSpacerBottom",comp:{name:"VSpacer",size:"0"}},{data:"overview",comp:{name:"Label",style:"Body S"},layout:{spacerBefore:20}},{data:"options",comp:{name:"VerticalList",styleNS:"ecomOptionsList",isStyleEditable:"false"},layout:{spacerAfter:20}},{comp:{name:"HorizontalLine",style:"hl4"}},{comp:{name:"HBox","box-align":"center",items:[{data:"price",comp:{name:"Label"},layout:{"box-flex":1}},{data:"retailPrice",comp:{name:"Label",hidden:{$expr:"String.isEmpty(retailPrice)"},style:"Body S",lineThrough:"true"}}]},layout:{spacer:20}},{comp:{name:"HorizontalLine",style:"hl4"}},{data:"outOfStock",comp:{name:"SwitchBox",cases:{"default":[{comp:{name:"ProductZoomAddToCartButton"},layout:{spacerBefore:20,height:40}}],"true":[{data:"$expOutOfStockOpen",comp:{name:"SwitchBox",cases:{"default":[{comp:{name:"ProductZoomAddToCartButton"},layout:{spacerBefore:20,height:40}}],"true":[{comp:{name:"OutOfStockButton"},layout:{spacerBefore:20}}]}}}]}}},{id:"addToCartDatailsSpacer",comp:{name:"VSpacer",size:"20"}},{data:"details",comp:{name:"Label",style:"Body S"}},{comp:{name:"VBox",items:[{comp:{name:"SocialButtons"},layout:{spacerBefore:20}}]},layout:{spacerBefore:"*"}}]},customizations:[{priority:31,fieldId:"titleSpacerBottom",key:"comp.size",input:{name:"slider",maxVal:"50",minVal:"0",label:"@ECOM_PRODUCT_PAGE_PRODUCT_TITLE_BOTTOM_SPACING_PANEL@"}},{priority:30,fieldId:"addToCartDatailsSpacer",key:"comp.size",input:{name:"slider",maxVal:"80",minVal:"20",label:"@ECOM_PRODUCT_ADD_TO_CART_AND_DETAILS_SPACING_PANEL@"}}]},{name:"OutOfStockButton",forType:"ProductBundle",vars:{outOfStockMsg:"@ECOM_GALLERY_OUT_OF_STOCK_TEXT@"},comp:{name:"VBox",cssClass:"background-color-outOfStock",items:[{id:"outOfStockTitle",value:{$expr:"if(String.isEmpty($outOfStockMsg),'@ECOM_GALLERY_OUT_OF_STOCK_TEXT@',$outOfStockMsg)"},comp:{name:"Label",style:"Body L",color:"#e4523f"},layout:{"text-align":"center",spacerBefore:"*",spacerAfter:"*"}}],css:{height:40,width:"100%"}},stylesheet:[{".background-color-outOfStock":{background:"transparent"}}],customizations:[{priority:20,fieldId:"vars",key:"outOfStockMsg",format:"*",input:{name:"textfield",label:"@ECOM_GALLERY_OUT_OF_STOCK_LABEL@",maxLength:"50"}}]},{name:"ProductZoomAddToCartButton",forType:"ProductBundle",id:"addToCartTitle",comp:{name:"Button2",styleNS:"ecomAddProduct",label:"@ECOM_PRODUCT_PAGE_ADD_TO_CART_BTN_TEXT@",height:"40",css:{"min-height":40},events:{click:"buy-product"}},customizations:[{priority:32,fieldId:"addToCartTitle",key:"comp.label",format:"*",input:{name:"textfield",label:"@ECOM_GALLERY_ADD_TO_CART_BTN_TEXT_PANEL@"}}]},{name:"Separator",forType:"ProductBundle",comp:{name:"VBox",items:[{id:"hline",comp:{name:"HorizontalLine"},layout:{spacerBefore:3,spacerAfter:6}}]},customizations:[{priority:80,fieldId:"hline",key:"comp.hidden",input:{name:"checkbox",defaultVal:"false",trueVal:"false",label:"@CUST_SHOW_SEPERATOR@",falseVal:"true"}}]},{name:"ZoomImageLeft",forType:"ProductBundle",comp:{name:"VBox",items:[{comp:{name:"HBox",items:[{comp:{name:"HSpacer",size:"40"}},{comp:{name:"ZoomImageLeftMedia"},layout:{"box-flex":1}},{comp:{name:"HSpacer",size:"20"}},{comp:{name:"VBox",items:[{comp:{name:"VSpacer",size:"37"}},{comp:{name:"HBox","box-align":"top",items:[{data:"title",comp:{name:"Label",style:"Heading M"},layout:{"box-flex":1}},{comp:{name:"HSpacer",size:"10"}},{comp:{name:"VBox",items:[{data:"price",comp:{name:"Label",style:"Heading L",bold:"true"},layout:{"text-align":"right"}},{data:"retailPrice",comp:{name:"Label",hidden:{$expr:"String.isEmpty(retailPrice)"},style:"Body L",lineThrough:"true"},layout:{"text-align":"right"}}]}}]},layout:{width:365}},{comp:{name:"VSpacer",size:"25"}},{comp:{name:"HorizontalLine",style:"hl1"}},{comp:{name:"VSpacer",hidden:{$expr:"lt(imagesCount,2)"},size:"30"}},{comp:{name:"Css",hidden:{$expr:"lt(imagesCount,2)"},items:[{comp:{name:"InsideSliderGallery"},layout:{width:365,height:65}}]}},{comp:{name:"VSpacer",size:"20"}},{data:"overview",comp:{name:"Label",style:"Body M"}},{data:"options",comp:{name:"VerticalList",styleNS:"ecomOptionsList",isStyleEditable:"false"}},{id:"spacerOptionsAddToCart",comp:{name:"VSpacer",size:"20"}},{comp:{name:"HorizontalLine",style:"hl1"}},{comp:{name:"VSpacer",size:"20"}},{data:"outOfStock",comp:{name:"SwitchBox",cases:{"default":[{comp:{name:"ProductZoomAddToCartButton"},layout:{height:40}}],"true":[{value:{$expr:"$expOutOfStockOpen"},comp:{name:"SwitchBox",cases:{"default":[{comp:{name:"ProductZoomAddToCartButton"},layout:{height:40}}],"true":[{comp:{name:"OutOfStockButton"}}]}}}]}}},{comp:{name:"VSpacer",size:"20"}},{data:"details",comp:{name:"Label",style:"Body M"}},{id:"details",comp:{name:"VSpacer",size:"30"}},{comp:{name:"SocialButtons"}}]},layout:{width:365}},{comp:{name:"HSpacer",size:"40"}}]}},{comp:{name:"VSpacer",size:"40"}}],css:{width:875,"text-align":"left"}}},{name:"ZoomImageLeftMedia",forType:"ProductBundle",vars:{ribbonMargin:15,ribbonAlign:"left",ribbonTop:70,imageMode:"fitWidth"},comp:{name:"VBox",items:[{comp:{name:"VSpacer",size:"40"}},{data:"productMedia._type",comp:{name:"SwitchBox",cases:{"default":[],"wix:Image":[{data:"$imageMode",comp:{name:"SwitchBox",orientation:"vertical",cases:{fill:[{id:"currentImage",data:"productMedia",comp:{name:"Image",style:"wp2",imageMode:"fill",showZoom:"true"},layout:{"box-flex":1}}],fitWidth:[{id:"currentImage",data:"productMedia",comp:{name:"Image",style:"wp2",imageMode:"fitWidth",showZoom:"true"}},{comp:{name:"VSpacer",size:"*"}}]}},layout:{"box-flex":1}},{id:"ribbonContainer",comp:{name:"Css",hidden:{$expr:"eq(ribbon, '')"},items:[{id:"ribbonArea",comp:{name:"Area",style:"c1",items:[{comp:{name:"VSpacer",size:"12"}},{data:"ribbon",comp:{name:"Label"},layout:{"text-align":"center"}},{comp:{name:"VSpacer",size:"12"}}]},layout:{"min-height":40,"padding-left":{$expr:"$ribbonMargin"},"padding-right":{$expr:"$ribbonMargin"}}}]},layout:{width:"auto","min-height":40,position:"absolute",top:{$expr:"$ribbonTop"},left:{$expr:"if(eq($ribbonAlign,'right'),'auto',0)"},right:{$expr:"if(eq($ribbonAlign,'left'),'auto',0)"}}}],"wix:Video":[{data:"productMedia",comp:{name:"VideoProductMedia"},layout:{width:388}}]}},layout:{"box-flex":1}}],css:{position:"relative"}},customizations:[{priority:50,fieldId:"vars",key:"imageMode",input:{name:"combobox",label:"@ECOM_IMAGE_MODE_PANEL@",options:[{label:"@ECOM_IMAGE_MODE_CROP_PANEL@",value:"fill"},{label:"@ECOM_IMAGE_MODE_CENTER_PANEL@",value:"fitWidth"}]}},{priority:60,fieldId:"vars",key:"ribbonTop",input:{name:"slider",maxVal:"500",minVal:"40",label:"@ECOM_GALLERY_RIBBON_VERTICAL_POSITION_PANEL@"}},{priority:60,fieldId:"vars",key:"ribbonMargin",input:{name:"slider",maxVal:"75",minVal:"0",label:"@ECOM_GALLERY_RIBBON_PADDING_PANEL@"}},{priority:59,fieldId:"vars",key:"ribbonAlign",format:"*",input:{name:"radioimages",label:"@ECOM_GALLERY_RIBBON_ALIGNMENT_PANEL@",options:[{value:"left",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/left.png"},{value:"center",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/center.png"},{value:"right",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/right.png"}]}}]},{name:"ImagesOnly",forType:"imageList",comp:{name:"VBox",items:[{data:"image",comp:{name:"Image",style:"wp2",imageMode:"fill"},layout:{"box-flex":1}}],css:{"box-flex":1,width:580,height:400}}},{name:"ZoomImageCenter",forType:"ProductBundle",comp:{name:"VBox",items:[{comp:{name:"VSpacer",size:"25"}},{comp:{name:"HBox",items:[{comp:{name:"HSpacer",size:"40"}},{comp:{name:"VBox",items:[{comp:{name:"HBox","box-align":"center",items:[{id:"spacerPriceAlignment",comp:{name:"HSpacer",size:"*"}},{data:"retailPrice",comp:{name:"Label",hidden:{$expr:"String.isEmpty(retailPrice)"},style:"Body M",lineThrough:"true"}},{comp:{name:"HSpacer",size:"15"}},{data:"price",comp:{name:"Label",style:"Heading L",bold:"true"}}]}},{comp:{name:"VBox","box-align":"center",items:[{comp:{name:"VSpacer",size:"5"}},{comp:{name:"VBox",items:[{data:"mediaItems",comp:{name:"Gallery",isStyleEditable:"false",columns:"1",rows:"1",expandEnabled:"false",showAutoplay:"false",showNavigation:{$expr:"gt(Array.length(mediaItems),1)"},showCounter:"false",templates:{item:{comp:{name:"VBox",items:[{data:"this._type",comp:{name:"SwitchBox",cases:{"default":[],"wix:Image":[{comp:{name:"VBox",items:[{data:"this",comp:{name:"ZoomGalleryCenterMedia"}}]},layout:{"box-flex":1,position:"relative"}}],"wix:Video":[{data:"this",comp:{name:"VideoProductMediaForImageCenter"}}]},css:{height:340,width:575}}}]}}}},layout:{"box-flex":1}}]},layout:{width:575,height:340}},{comp:{name:"VSpacer",size:"30"}},{data:"title",comp:{name:"Label",style:"Heading M"}},{comp:{name:"VSpacer",size:"20"}},{data:"overview",comp:{name:"Label",style:"Body M"},layout:{width:495}},{id:"spacerOverviewOption",comp:{name:"VSpacer",hidden:{$expr:"not(eq(Array.length(options), 0))"},size:"20"}},{data:"options",comp:{name:"VerticalList",styleNS:"ecomOptionsList",isStyleEditable:"false"},layout:{width:400}},{id:"spacerOptionsAddToCart",comp:{name:"VSpacer",hidden:{$expr:"eq(Array.length(options), 0)"},size:"20"}},{data:"outOfStock",comp:{name:"SwitchBox",cases:{"default":[{comp:{name:"ProductZoomAddToCartButton"},layout:{height:40}}],"true":[{value:{$expr:"$expOutOfStockOpen"},comp:{name:"SwitchBox",cases:{"default":[{comp:{name:"ProductZoomAddToCartButton"},layout:{height:40}}],"true":[{comp:{name:"OutOfStockButton"}}]}}}]}},layout:{width:250,spacer:"*"}},{comp:{name:"VSpacer",size:"20"}},{data:"details",comp:{name:"Label",style:"Body M"},layout:{width:495}},{id:"spacerAddToCartSocialButtons",comp:{name:"VSpacer",size:"40"}},{comp:{name:"SocialButtons"}}]},layout:{"text-align":"center"}}]},layout:{"box-flex":1}},{comp:{name:"HSpacer",size:"40"}}]}},{comp:{name:"VSpacer",size:"40"}}],css:{width:655}}},{name:"ZoomGalleryCenterMedia",forType:"wix:Image",vars:{ribbonMargin:15,ribbonAlign:"right",ribbonTop:30,imageMode:"fill"},comp:{name:"VBox",items:[{comp:{name:"VBox","box-align":"center",items:[{data:"$imageMode",comp:{name:"SwitchBox",orientation:"horizontal",cases:{fill:[{id:"currentImage",data:"this",comp:{name:"Image",style:"wp2",imageMode:"fill",showZoom:"true"},layout:{width:"100%",height:340}}],fitHeight:[{comp:{name:"HSpacer",size:"*"}},{id:"currentImage",data:"this",comp:{name:"Image",style:"wp2",imageMode:"fitHeight",showZoom:"true"},layout:{width:"100%",height:340}},{comp:{name:"HSpacer",size:"*"}}]}},layout:{width:"100%"}},{id:"ribbonContainer",comp:{name:"Css",hidden:{$expr:"eq(parent.parent.ribbon, '')"},items:[{id:"ribbonArea",comp:{name:"Area",style:"c1",items:[{comp:{name:"VSpacer",size:"12"}},{data:"parent.parent.ribbon",comp:{name:"Label"},layout:{"text-align":"center"}},{comp:{name:"VSpacer",size:"12"}}]},layout:{"min-height":40,"padding-left":{$expr:"$ribbonMargin"},"padding-right":{$expr:"$ribbonMargin"}}}]},layout:{"min-height":40,position:"absolute",top:{$expr:"$ribbonTop"},left:{$expr:"if(eq($ribbonAlign,'right'),'auto',0)"},right:{$expr:"if(eq($ribbonAlign,'left'),'auto',0)"}}}]},layout:{"box-flex":1}}],css:{position:"relative"}},customizations:[{priority:50,fieldId:"vars",key:"imageMode",input:{name:"combobox",label:"@ECOM_IMAGE_MODE_PANEL@",options:[{label:"@ECOM_IMAGE_MODE_CROP_PANEL@",value:"fill"},{label:"@ECOM_IMAGE_MODE_CENTER_PANEL@",value:"fitHeight"}]}},{priority:60,fieldId:"vars",key:"ribbonTop",input:{name:"slider",maxVal:"297",minVal:"0",label:"@ECOM_GALLERY_RIBBON_VERTICAL_POSITION_PANEL@"}},{priority:60,fieldId:"vars",key:"ribbonMargin",input:{name:"slider",maxVal:"75",minVal:"0",label:"@ECOM_GALLERY_RIBBON_PADDING_PANEL@"}},{priority:59,fieldId:"vars",key:"ribbonAlign",format:"*",input:{name:"radioimages",label:"@ECOM_GALLERY_RIBBON_ALIGNMENT_PANEL@",options:[{value:"left",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/left.png"},{value:"center",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/center.png"},{value:"right",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/right.png"}]}}]},{name:"VideoProductMediaForImageCenter",forType:"wix:Video",comp:{name:"VBox",items:[{comp:{name:"FixedRatioLayout",aspectRatio:"1",items:[{id:"productVideo",data:"this",comp:{name:"Video",showControls:"show",autoplay:"false",loop:"false",showinfo:"false",lightTheme:"false"},layout:{width:"100%",height:340}}]}}]},customizations:[{priority:58,fieldId:"productVideo",key:"comp.showControls",input:{name:"combobox",spaceAfter:"10",label:"@ECOM_PRODUCT_VIDEO_CONTROL_BAR_PANEL@",options:[{label:"@ECOM_PRODUCT_VIDEO_SHOW_CONTROL_BAR_OPT_PANEL@",value:"show"},{label:"@ECOM_PRODUCT_VIDEO_HIDE_CONTROL_BAR_OPT_PANEL@",value:"hide"},{label:"@ECOM_PRODUCT_VIDEO_AUTO_HIDE_CONTROL_BAR_OPT_PANEL@",value:"autohide"}]}},{priority:56,fieldId:"productVideo",key:"comp.autoplay",input:{name:"checkbox",spaceAfter:"10",defaultVal:"false",trueVal:"true",label:"@ECOM_PRODUCT_VIDEO_AUTOPLAY_PANEL@",falseVal:"false"}},{priority:54,fieldId:"productVideo",key:"comp.loop",input:{name:"checkbox",spaceAfter:"10",defaultVal:"false",trueVal:"true",label:"@ECOM_PRODUCT_VIDEO_LOOP_PANEL@",falseVal:"false"}},{priority:53,fieldId:"productVideo",key:"comp.showinfo",input:{name:"checkbox",spaceAfter:"10",defaultVal:"false",trueVal:"true",label:"@ECOM_PRODUCT_VIDEO_SHOW_INFO_PANEL@",falseVal:"false"}},{priority:52,fieldId:"productVideo",key:"comp.lightTheme",input:{name:"checkbox",spaceAfter:"10",defaultVal:"false",trueVal:"true",label:"@ECOM_PRODUCT_VIDEO_LIGHT_THEME_PANEL@",falseVal:"false"}}]},{name:"VideoProductMediaForCenterWide",forType:"wix:Video",comp:{name:"VBox","box-align":"center",items:[{id:"productVideo",data:"this",comp:{name:"Video",showControls:"show",autoplay:"false",loop:"false",showinfo:"false",lightTheme:"false"},layout:{width:550,height:365}}]},customizations:[{priority:58,fieldId:"productVideo",key:"comp.showControls",input:{name:"combobox",spaceAfter:"10",label:"@ECOM_PRODUCT_VIDEO_CONTROL_BAR_PANEL@",options:[{label:"@ECOM_PRODUCT_VIDEO_SHOW_CONTROL_BAR_OPT_PANEL@",value:"show"},{label:"@ECOM_PRODUCT_VIDEO_HIDE_CONTROL_BAR_OPT_PANEL@",value:"hide"},{label:"@ECOM_PRODUCT_VIDEO_AUTO_HIDE_CONTROL_BAR_OPT_PANEL@",value:"autohide"}]}},{priority:56,fieldId:"productVideo",key:"comp.autoplay",input:{name:"checkbox",spaceAfter:"10",defaultVal:"false",trueVal:"true",label:"@ECOM_PRODUCT_VIDEO_AUTOPLAY_PANEL@",falseVal:"false"}},{priority:54,fieldId:"productVideo",key:"comp.loop",input:{name:"checkbox",spaceAfter:"10",defaultVal:"false",trueVal:"true",label:"@ECOM_PRODUCT_VIDEO_LOOP_PANEL@",falseVal:"false"}},{priority:53,fieldId:"productVideo",key:"comp.showinfo",input:{name:"checkbox",spaceAfter:"10",defaultVal:"false",trueVal:"true",label:"@ECOM_PRODUCT_VIDEO_SHOW_INFO_PANEL@",falseVal:"false"}},{priority:52,fieldId:"productVideo",key:"comp.lightTheme",input:{name:"checkbox",spaceAfter:"10",defaultVal:"false",trueVal:"true",label:"@ECOM_PRODUCT_VIDEO_LIGHT_THEME_PANEL@",falseVal:"false"}}]},{name:"ZoomImageCenterWide",forType:"ProductBundle",vars:{bgcolor:"color_2"},comp:{name:"VBox",items:[{comp:{name:"VBox",cssClass:"background-color",items:[{comp:{name:"HBox",items:[{data:"title",comp:{name:"Label",style:"Heading S",singleLine:"true",color:"#ffffff",bold:"true"},layout:{spacer:25,"text-align":"left","box-flex":1}}]},layout:{spacer:"*"}}]},layout:{height:50}},{id:"vertMargins",comp:{name:"VSpacer",size:"20"}},{comp:{name:"HBox",items:[{id:"horizMargins",comp:{name:"HSpacer",size:"20"}},{comp:{name:"VBox",items:[{comp:{name:"Css",items:[{data:"mediaItems",comp:{name:"Gallery",isStyleEditable:"false",columns:"1",rows:"1",expandEnabled:"false",showAutoplay:"false",showNavigation:{$expr:"gt(Array.length(mediaItems),1)"},showCounter:"false",templates:{item:{data:"this._type",comp:{name:"SwitchBox","box-align":"center",cases:{"default":[],"wix:Image":[{comp:{name:"VBox",items:[{comp:{name:"ZoomGalleryCenterWideMedia"}}],css:{width:"100%",height:365}}}],"wix:Video":[{comp:{name:"VBox",items:[{comp:{name:"VideoProductMediaForCenterWide"}}],css:{width:"100%",height:365}}}]},css:{"box-flex":1}}}}},layout:{width:"100%",height:365}},{comp:{name:"Css",items:[{comp:{name:"HBox",items:[{comp:{name:"HBox",items:[{comp:{name:"VBox",items:[{data:"price",comp:{name:"Label",style:"Heading M",bold:"true"},layout:{"box-flex":1}},{data:"retailPrice",comp:{name:"Label",hidden:{$expr:"eq(retailPrice, '<br/>')"},style:"Body M",lineThrough:"true"}}]},layout:{"text-align":"right","background-color":"#ffffff",opacity:.8,padding:20,"padding-top":17}}]}},{comp:{name:"HSpacer",size:"20"}}]},layout:{width:"auto"}}]},layout:{position:"absolute",right:"-20px",bottom:0,width:"auto"}}]},layout:{position:"relative",border:"1px solid grey"}},{comp:{name:"VSpacer",size:"20"}},{comp:{name:"HBox",items:[{comp:{name:"VBox",items:[{data:"overview",comp:{name:"Label",style:"Body M"}},{id:"details",comp:{name:"VSpacer",hidden:"false",size:"15"}},{id:"details",data:"details",comp:{name:"Label",hidden:"false",style:"Body M"}},{id:"details",comp:{name:"VSpacer",size:"20"}},{comp:{name:"VSpacer",size:"*"}},{comp:{name:"SocialButtons"}}]},layout:{width:585}},{id:"spacerDetailsOptions",comp:{name:"HSpacer",size:"35"}},{comp:{name:"VBox",items:[{comp:{name:"HBox",hidden:{$expr:"eq(Array.length(options), 0)"},items:[{id:"spacerOptionsHoriz",comp:{name:"HSpacer",size:"20"}},{comp:{name:"VBox",items:[{data:"options",comp:{name:"List2",styleNS:"ecomOptionsList",isStyleEditable:"false"},layout:{width:178}},{comp:{name:"VSpacer",size:"20"}}]},layout:{width:180}},{id:"spacerOptionsHoriz",comp:{name:"HSpacer",size:"20"}}]},layout:{border:"1px solid grey"}},{id:"spacerOptionsAdd",comp:{name:"VSpacer",hidden:{$expr:"eq(Array.length(options), 0)"},size:"20"}},{data:"outOfStock",comp:{name:"SwitchBox",cases:{"default":[{comp:{name:"ProductZoomAddToCartButton"},layout:{height:40}}],"true":[{value:{$expr:"$expOutOfStockOpen"},comp:{name:"SwitchBox",cases:{"default":[{comp:{name:"ProductZoomAddToCartButton"},layout:{height:40}}],"true":[{comp:{name:"OutOfStockButton"}}]}}}]}}}]},layout:{"box-flex":1}}]},layout:{"text-align":"left"}}]},layout:{"box-flex":1}},{id:"horizMargins",comp:{name:"HSpacer",size:"20"}}]}},{id:"vertMargins",comp:{name:"VSpacer",size:"20"}}],css:{width:880}},stylesheet:[{".background-color":{background:{$expr:"Theme.getColor($bgcolor)"}}}],customizations:[{priority:40,fieldId:"vars",key:"bgcolor",input:{name:"colorSelector",label:"@ECOM_PRODUCT_STRIP_COLOR@"}}]},{name:"ZoomGalleryCenterWideMedia",forType:"wix:Image",vars:{ribbonMargin:20,ribbonAlign:"right",ribbonTop:30,imageMode:"fill"},comp:{name:"VBox","box-align":"center",items:[{data:"$imageMode",comp:{name:"SwitchBox",orientation:"horizontal",cases:{fill:[{data:"this",comp:{name:"Image",style:"wp2",imageMode:"fill",showZoom:"true"},layout:{width:"100%",height:365}}],fitHeight:[{comp:{name:"HSpacer",size:"*"}},{data:"this",comp:{name:"Image",style:"wp2",imageMode:"fitHeight",showZoom:"true"},layout:{width:"100%",height:365}},{comp:{name:"HSpacer",size:"*"}}]}},layout:{width:"100%"}},{id:"ribbonContainer",comp:{name:"Css",hidden:{$expr:"eq(parent.parent.ribbon, '')"},items:[{id:"ribbonArea",comp:{name:"Area",style:"c1",items:[{comp:{name:"VSpacer",size:"12"}},{data:"parent.parent.ribbon",comp:{name:"Label"},layout:{"text-align":"center"}},{comp:{name:"VSpacer",size:"12"}}]},layout:{"min-height":40,"padding-left":{$expr:"$ribbonMargin"},"padding-right":{$expr:"$ribbonMargin"}}}]},layout:{"min-height":40,position:"absolute",top:{$expr:"$ribbonTop"},left:{$expr:"if(eq($ribbonAlign,'right'),'auto',0)"},right:{$expr:"if(eq($ribbonAlign,'left'),'auto',0)"}}}],css:{position:"relative"}},customizations:[{priority:50,fieldId:"vars",key:"imageMode",input:{name:"combobox",label:"@ECOM_IMAGE_MODE_PANEL@",options:[{label:"@ECOM_IMAGE_MODE_CROP_PANEL@",value:"fill"},{label:"@ECOM_IMAGE_MODE_CENTER_PANEL@",value:"fitHeight"}]}},{priority:60,fieldId:"vars",key:"ribbonTop",input:{name:"slider",maxVal:"323",minVal:"0",label:"@ECOM_GALLERY_RIBBON_VERTICAL_POSITION_PANEL@"}},{priority:60,fieldId:"vars",key:"ribbonMargin",input:{name:"slider",maxVal:"75",minVal:"0",label:"@ECOM_GALLERY_RIBBON_PADDING_PANEL@"}},{priority:59,fieldId:"vars",key:"ribbonAlign",format:"*",input:{name:"radioimages",label:"@ECOM_GALLERY_RIBBON_ALIGNMENT_PANEL@",options:[{value:"left",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/left.png"},{value:"center",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/center.png"},{value:"right",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/right.png"}]}}]},{name:"ZoomGalleryLeft",forType:"wix:Image",comp:{name:"VBox",cssClass:"wixAppsLink",items:[{data:"this",comp:{name:"Image",style:"wp2",imageMode:"fill"},layout:{height:75,cursor:"pointer"}},{comp:{name:"VSpacer",size:"10"}}],events:{"dom:click":"image-selected"}}},{name:"ZoomGalleryLeft",forType:"ProductBundle",vars:{hiddenNoOptionsOverview:{$expr:"and(eq(Array.length(options), 0), String.isEmpty(overview))"},bgcolor:"color_2"},comp:{name:"VBox",items:[{comp:{name:"VBox",cssClass:"background-color",orientation:"horizontal","box-align":"center",items:[{comp:{name:"HBox",items:[{data:"title",comp:{name:"Label",style:"Heading S",singleLine:"true",color:"#ffffff",bold:"true"},layout:{spacer:25,width:880,"text-align":"left"}}]}}]},layout:{width:880,height:60}},{id:"spacerTitle",comp:{name:"VSpacer",size:"25"}},{comp:{name:"HBox",items:[{id:"MarginHoriz",comp:{name:"HSpacer",size:"25"}},{data:"imageList",comp:{name:"List2"},layout:{width:75}},{comp:{name:"HSpacer",size:"25"}},{comp:{name:"ZoomGalleryLeftMedia"},layout:{width:420}},{comp:{name:"HSpacer",size:"25"}},{comp:{name:"VBox","box-align":"left",items:[{data:"price",comp:{name:"Label",style:"Heading L",bold:"true"},layout:{"text-align":"left"}},{id:"spacerPriceExPrice",comp:{name:"VSpacer",size:"1"}},{data:"retailPrice",comp:{name:"Label",hidden:{$expr:"String.isEmpty(retailPrice)"},style:"Body M",lineThrough:"true"},layout:{"text-align":"left"}},{id:"spacerExPriceLine",comp:{name:"VSpacer",hidden:{$expr:"eq(retailPrice, '<br/>')"},size:"20"}},{comp:{name:"HorizontalLine",style:"hl1"},layout:{width:285}},{id:"spacerLineOverview",comp:{name:"VSpacer",hidden:{$expr:"String.isEmpty(overview)"},size:"20"}},{data:"overview",comp:{name:"Label"},layout:{"text-align":"left",width:280}},{id:"spacerLineOverview",comp:{name:"VSpacer",hidden:{$expr:"String.isEmpty(overview)"},size:"20"}},{comp:{name:"HorizontalLine",hidden:{$expr:"String.isEmpty(overview)"},style:"hl1"},layout:{width:285}},{data:"options",comp:{name:"VerticalList",styleNS:"ecomOptionsList",isStyleEditable:"false"},layout:{"text-align":"left",width:285}},{id:"spacerOptionsAddToCart",comp:{name:"VSpacer",hidden:{$expr:"eq(Array.length(options), 0)"},size:"20"}},{comp:{name:"HorizontalLine",hidden:{$expr:"and(eq(Array.length(options), 0), String.isEmpty(overview))"},style:"hl1"},layout:{width:285}},{id:"LineToButton",comp:{name:"VSpacer",size:"20"}},{data:"outOfStock",comp:{name:"SwitchBox",cases:{"default":[{comp:{name:"ProductZoomAddToCartButton"},layout:{width:285,height:40}}],"true":[{value:{$expr:"$expOutOfStockOpen"},comp:{name:"SwitchBox",cases:{"default":[{comp:{name:"ProductZoomAddToCartButton"},layout:{width:285,height:40}}],"true":[{comp:{name:"OutOfStockButton"},layout:{width:285}}]}}}]}}},{id:"details",comp:{name:"VSpacer",size:"20"}},{id:"details",data:"details",comp:{name:"Label"},layout:{"text-align":"left"}},{comp:{name:"VSpacer",size:"30"}},{comp:{name:"SocialButtons"},layout:{width:285}}]},layout:{width:285}},{id:"MarginHoriz",comp:{name:"HSpacer",size:"25"}}]},layout:{width:880}},{id:"MarginVert",comp:{name:"VSpacer",size:"25"}}],css:{width:880}},stylesheet:[{".background-color":{background:{$expr:"Theme.getColor($bgcolor)"}}}],customizations:[{priority:40,fieldId:"vars",key:"bgcolor",input:{name:"colorSelector",label:"@ECOM_PRODUCT_STRIP_COLOR@"}}]},{name:"ZoomGalleryLeftMedia",forType:"ProductBundle",vars:{ribbonMargin:20,ribbonAlign:"left",ribbonTop:30,imageMode:"fitWidth"},comp:{name:"VBox",items:[{data:"productMedia._type",comp:{name:"SwitchBox",cases:{"default":[],"wix:Image":[{data:"$imageMode",comp:{name:"SwitchBox",cases:{fill:[{id:"currentImage",data:"productMedia",comp:{name:"Image",style:"wp2",imageMode:"fill",showZoom:"true"},layout:{"box-flex":1}}],fitWidth:[{id:"currentImage",data:"productMedia",comp:{name:"Image",style:"wp2",imageMode:"fitWidth",showZoom:"true"}},{comp:{name:"VSpacer",size:"*"}}]}},layout:{"box-flex":1}},{id:"ribbonContainer",comp:{name:"Css",hidden:{$expr:"eq(ribbon, '')"},items:[{id:"ribbonArea",comp:{name:"Area",style:"c1",items:[{comp:{name:"VSpacer",size:"12"}},{data:"ribbon",comp:{name:"Label"},layout:{"text-align":"center"}},{comp:{name:"VSpacer",size:"12"}}]},layout:{"min-height":40,"padding-left":{$expr:"$ribbonMargin"},"padding-right":{$expr:"$ribbonMargin"}}}]},layout:{width:"auto","min-height":40,position:"absolute",top:{$expr:"$ribbonTop"},left:{$expr:"if(eq($ribbonAlign,'right'),'auto',0)"},right:{$expr:"if(eq($ribbonAlign,'left'),'auto',0)"}}}],"wix:Video":[{data:"productMedia",comp:{name:"VideoProductMedia"},layout:{width:420}}]}},layout:{"box-flex":1}}],css:{position:"relative"}},customizations:[{priority:50,fieldId:"vars",key:"imageMode",input:{name:"combobox",label:"@ECOM_IMAGE_MODE_PANEL@",options:[{label:"@ECOM_IMAGE_MODE_CENTER_PANEL@",value:"fitWidth"},{label:"@ECOM_IMAGE_MODE_CROP_PANEL@",value:"fill"}]}},{priority:60,fieldId:"vars",key:"ribbonTop",input:{name:"slider",maxVal:"500",minVal:"0",label:"@ECOM_GALLERY_RIBBON_VERTICAL_POSITION_PANEL@"}},{priority:60,fieldId:"vars",key:"ribbonMargin",input:{name:"slider",maxVal:"75",minVal:"0",label:"@ECOM_GALLERY_RIBBON_PADDING_PANEL@"}},{priority:59,fieldId:"vars",key:"ribbonAlign",format:"*",input:{name:"radioimages",label:"@ECOM_GALLERY_RIBBON_ALIGNMENT_PANEL@",options:[{value:"left",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/left.png"},{value:"center",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/center.png"},{value:"right",image:"radiobuttons/radio_button_states.png",dimensions:{w:"35px",h:"33px"},icon:"radiobuttons/alignment/right.png"}]}}]},{name:"SocialButtons",forType:"ProductBundle",vars:{iconSize:20},comp:{name:"HBox",cssClass:"ecomSocialLink",items:[{id:"GoogleShare",comp:{name:"HBox",hidden:"true",items:[{comp:{name:"Stack",stackType:"static",items:[{value:{_type:"wix:Image",src:"images/social/google_plus-new.png",width:40,height:40},comp:{name:"Image",style:{},isStyleEditable:"false"},layout:{width:{$expr:"$iconSize"},height:{$expr:"$iconSize"}}},{comp:{name:"HBox",css:{cursor:"pointer",width:"100%",height:"100%"}}}],events:{click:{params:{service:"google"},event:"shareProductPage"}}}},{id:"socialIconsSpacer",comp:{name:"HSpacer",size:"10"}}]}},{id:"FancyShare",comp:{name:"HBox",hidden:"true",items:[{comp:{name:"Stack",stackType:"static",items:[{value:{_type:"wix:Image",src:"images/social/fancy-new.png",width:40,height:40},comp:{name:"Image",style:{},isStyleEditable:"false"},layout:{width:{$expr:"$iconSize"},height:{$expr:"$iconSize"}}},{comp:{name:"HBox",css:{cursor:"pointer",width:"100%",height:"100%"}}}],events:{click:{params:{service:"fancy"},event:"shareProductPage"}}}},{id:"socialIconsSpacer",comp:{name:"HSpacer",size:"10"}}]}},{id:"PinterestShare",comp:{name:"HBox",hidden:"true",items:[{comp:{name:"Stack",stackType:"static",items:[{value:{_type:"wix:Image",src:"images/social/pinterest-new.png",width:40,height:40},comp:{name:"Image",style:{},isStyleEditable:"false"},layout:{width:{$expr:"$iconSize"},height:{$expr:"$iconSize"}}},{comp:{name:"HBox",css:{cursor:"pointer",width:"100%",height:"100%"}}}],events:{"dom:click":{params:{service:"pinterest"},event:"shareProductPage"}}}},{id:"socialIconsSpacer",comp:{name:"HSpacer",size:"10"}}]}},{id:"TwitterShare",comp:{name:"HBox",hidden:"true",items:[{comp:{name:"Stack",stackType:"static",items:[{value:{_type:"wix:Image",src:"images/social/twitter-new.png",width:40,height:40},comp:{name:"Image",style:{},isStyleEditable:"false"},layout:{width:{$expr:"$iconSize"},height:{$expr:"$iconSize"}}},{comp:{name:"HBox",css:{cursor:"pointer",width:"100%",height:"100%"}}}],events:{click:{params:{service:"twitter"},event:"shareProductPage"}}}},{id:"socialIconsSpacer",comp:{name:"HSpacer",size:"10"}}]}},{id:"FacebookShare",comp:{name:"HBox",hidden:"true",items:[{comp:{name:"Stack",stackType:"static",items:[{value:{_type:"wix:Image",src:"images/social/facebook-new.png",width:40,height:40},comp:{name:"Image",style:{},isStyleEditable:"false"},layout:{width:{$expr:"$iconSize"},height:{$expr:"$iconSize"}}},{comp:{name:"HBox",css:{cursor:"pointer",width:"100%",height:"100%"}}}],events:{click:{params:{service:"facebook"},event:"shareProductPage"}}}}]}}]},stylesheet:[{"div.ecomSocialLink img":{cursor:"pointer !important"}}],customizations:[{priority:19,fieldId:"GoogleShare",key:"comp.hidden",format:"*",input:{name:"checkbox",spaceAfter:"10",defaultVal:"true",trueVal:"false",label:"@ECOM_SOCIAL_GOOGLE_PLUS_PANEL_LABEL@",falseVal:"true"}},{priority:18,fieldId:"FancyShare",key:"comp.hidden",format:"*",input:{name:"checkbox",spaceAfter:"10",defaultVal:"true",trueVal:"false",label:"@ECOM_SOCIAL_FANCY_PANEL_LABEL@",falseVal:"true"}},{priority:16,fieldId:"PinterestShare",key:"comp.hidden",format:"*",input:{name:"checkbox",spaceAfter:"10",defaultVal:"true",trueVal:"false",label:"@ECOM_SOCIAL_PINTEREST_PANEL_LABEL@",falseVal:"true"}},{priority:14,fieldId:"TwitterShare",key:"comp.hidden",format:"*",input:{name:"checkbox",spaceAfter:"10",defaultVal:"true",trueVal:"false",label:"@ECOM_SOCIAL_TWITTER_PANEL_LABEL@",falseVal:"true"}},{priority:12,fieldId:"FacebookShare",key:"comp.hidden",format:"*",input:{name:"checkbox",spaceAfter:"10",defaultVal:"true",trueVal:"false",label:"@ECOM_SOCIAL_FACEBOOK_PANEL_LABEL@",falseVal:"true"}},{priority:11,fieldId:"vars",key:"iconSize",input:{name:"slider",maxVal:"40",minVal:"20",label:"@ECOM_SOCIAL_ICON_SIZE_PANEL@"}},{priority:10,fieldId:"socialIconsSpacer",key:"comp.size",input:{name:"slider",maxVal:"21",minVal:"1",label:"@ECOM_GENERAL_SPACING_PANEL@"}}]},{name:"GalleryRibbon2",forType:"String",comp:{name:"VBox",items:[{id:"ribbonMarginTop",comp:{name:"VSpacer",size:"0"}},{comp:{name:"Area",styleNS:"ecomEmptyCartBG",items:[{comp:{name:"VBox",items:[{id:"ribbonSpacer",comp:{name:"VSpacer",size:"10"}},{comp:{name:"HBox","box-align":"center",items:[{comp:{name:"Label"},layout:{spacer:"*",color:"#fff","white-space":"nowrap","text-overflow":"ellipsis"}}]},layout:{he:"100%"}},{id:"ribbonSpacer",comp:{name:"VSpacer",size:"10"}}]},layout:{height:"100%"}}]}}]},customizations:[{priority:0,fieldId:"ribbonSpacer",key:"comp.size",input:{name:"slider",maxVal:"60",minVal:"5",label:"@ECOM_GALLERY_RIBBON_PADDING_PANEL@"}},{priority:0,fieldId:"ribbonMarginTop",key:"comp.size",input:{name:"slider",maxVal:"300",minVal:"0",label:"@ECOM_GALLERY_RIBBON_POSITION_PANEL@"}}]},{name:"NoData",forType:"Cart",comp:{name:"VBox",items:[{comp:{name:"HBox","box-align":"center",items:[{comp:{name:"VBox","box-align":"center",items:[{id:"emptyCartLbl",value:"@ECOM_YOUR_SHOPPING_CART_IS_EMPTY_TEXT@",comp:{name:"Label"},layout:{"text-align":"center"}},{comp:{name:"HBox","box-align":"center",items:[{value:{_type:"wix:Image",title:"@ECOM_SHOPPING_CART_EMPTY_CART_IMAGE_TITLE@",src:"images/empty_cart.png",width:70,height:60},comp:{name:"Image"},layout:{height:60,width:70,spacer:"*"}}]},layout:{spacerBefore:10}}]},layout:{"box-flex":1}}]},layout:{"box-flex":1}}],css:{width:"100%",height:"100%"}},customizations:[{priority:0,fieldId:"emptyCartLbl",key:"value",input:{name:"textfield",label:"@ECOM_EMPTY_CART_TEXT_PANEL@",maxLength:"70"}}]}]),customizations:[{forType:"ItemsList",view:"PicsOnly",fieldId:"gallery",key:"comp.gap",value:"0"},{forType:"ProductBundle",view:"Default",fieldId:"textLayout",key:"comp.vars.text-alignment",value:"center"},{forType:"ProductBundle",view:"Default",fieldId:"ribbonSwitch",key:"comp.vars.alignment",value:"center"},{forType:"ProductBundle",view:"Default",fieldId:"itemPad",key:"layout.spacer",value:"0"},{forType:"ProductBundle",view:"Default",fieldId:"rolloverStrip",key:"comp.hidden",value:"true"},{forType:"ProductBundle",view:"Default",fieldId:"textLayout",key:"value",value:"defaultLayout"},{forType:"ProductBundle",view:"DefaultRibbon",fieldId:"ribbonSpacer",key:"layout.height",value:"15%"},{forType:"ProductBundle",view:"DefaultRibbon",fieldId:"pad",key:"layout.spacer",value:"7"},{forType:"ProductBundle",view:"SimpleClean",fieldId:"itemPad",key:"layout.spacer",value:"7"},{forType:"ProductBundle",view:"SimpleCleanRibbon",fieldId:"pad",key:"layout.spacer",value:"4"},{forType:"ProductBundle",view:"SimpleCleanRibbon",fieldId:"ribbonSpacer",key:"layout.height",value:"68%"},{forType:"ProductBundle",view:"Polaroid",fieldId:"itemPad",key:"layout.spacer",value:"8"},{forType:"ProductBundle",view:"PolaroidRibbon",fieldId:"pad",key:"layout.spacer",value:"3"},{forType:"ProductBundle",view:"PolaroidRibbon",fieldId:"ribbonSpacer",key:"layout.height",value:"72%"},{forType:"ProductBundle",view:"Polaroid",fieldId:"rolloverStrip",key:"comp.hidden",value:"true"},{forType:"ProductBundle",view:"Polaroid",fieldId:"textLayout",key:"value",value:"altLayout"},{forType:"ProductBundle",view:"PicsOnlyMouseOver",fieldId:"readMoreLabel",key:"comp.hidden",value:"false"},{forType:"*",view:"ImageWithRibbonFull",fieldId:"currentImage",key:"comp.imageMode",value:"full"},{forType:"ProductBundle",view:"ZoomDetails",fieldId:"title",key:"comp.color",value:"#000000"},{forType:"ProductBundle",view:"ZoomDetails",fieldId:"overview",key:"comp.color",value:"#000000"},{forType:"ProductBundle",view:"ZoomDetails",fieldId:"price",key:"comp.color",value:"#000000"},{forType:"ProductBundle",view:"ZoomDetails",fieldId:"retailPrice",key:"comp.color",value:"#000000"},{forType:"ProductBundle",view:"ZoomDetails",fieldId:"details",key:"comp.color",value:"#000000"},{forType:"ProductBundle",view:"ZoomDetails",format:"Mobile",fieldId:"title",key:"comp.color",value:"#000000"},{forType:"ProductBundle",view:"ZoomDetails",format:"Mobile",fieldId:"overview",key:"comp.color",value:"#000000"},{forType:"ProductBundle",view:"ZoomDetails",format:"Mobile",fieldId:"price",key:"comp.color",value:"#000000"},{forType:"ProductBundle",view:"ZoomDetails",format:"Mobile",fieldId:"retailPrice",key:"comp.color",value:"#000000"},{forType:"ProductBundle",view:"ZoomDetails",format:"Mobile",fieldId:"details",key:"comp.color",value:"#000000"},{forType:"OptionsList",view:"ZoomDetails",fieldId:"title",key:"comp.color",value:"#000000"},{forType:"ComboOptionsList",view:"ZoomDetails",fieldId:"title",key:"comp.color",value:"#000000"},{forType:"EcomTextOption",view:"ZoomDetails",fieldId:"title",key:"comp.color",value:"#000000"},{forType:"OptionItem",view:"ZoomDetails",fieldId:"optionsLabel",key:"comp.color",value:"#000000"},{forType:"OptionItem",view:"ZoomDetails",format:"Mobile",fieldId:"optionsLabel",key:"comp.color",value:"#000000"},{forType:"ProductBundle",view:"ZoomImageLeft",fieldId:"title",key:"comp.color",value:"#000000"},{forType:"ProductBundle",view:"ZoomImageLeft",fieldId:"overview",key:"comp.color",value:"#000000"},{forType:"ProductBundle",view:"ZoomImageLeft",fieldId:"price",key:"comp.color",value:"#000000"},{forType:"ProductBundle",view:"ZoomImageLeft",fieldId:"retailPrice",key:"comp.color",value:"#000000"},{forType:"ProductBundle",view:"ZoomImageLeft",fieldId:"details",key:"comp.color",value:"#000000"},{forType:"OptionsList",view:"ZoomImageLeft",fieldId:"title",key:"comp.color",value:"#000000"},{forType:"ComboOptionsList",view:"ZoomImageLeft",fieldId:"title",key:"comp.color",value:"#000000"},{forType:"EcomTextOption",view:"ZoomImageLeft",fieldId:"title",key:"comp.color",value:"#000000"},{forType:"OptionItem",view:"ZoomImageLeft",fieldId:"optionsLabel",key:"comp.color",value:"#000000"},{forType:"ProductBundle",view:"ZoomImageCenter",fieldId:"title",key:"comp.color",value:"#000000"},{forType:"ProductBundle",view:"ZoomImageCenter",fieldId:"overview",key:"comp.color",value:"#000000"},{forType:"ProductBundle",view:"ZoomImageCenter",fieldId:"price",key:"comp.color",value:"#000000"},{forType:"ProductBundle",view:"ZoomImageCenter",fieldId:"retailPrice",key:"comp.color",value:"#909090"},{forType:"ProductBundle",view:"ZoomImageCenter",fieldId:"details",key:"comp.color",value:"#000000"},{forType:"OptionsList",view:"ZoomImageCenter",fieldId:"title",key:"comp.color",value:"#000000"},{forType:"ComboOptionsList",view:"ZoomImageCenter",fieldId:"title",key:"comp.color",value:"#000000"},{forType:"EcomTextOption",view:"ZoomImageCenter",fieldId:"title",key:"comp.color",value:"#000000"},{forType:"OptionItem",view:"ZoomImageCenter",fieldId:"optionsLabel",key:"comp.color",value:"#000000"},{forType:"ProductBundle",view:"ZoomImageCenterWide",fieldId:"title",key:"comp.color",value:"#ffffff"},{forType:"ProductBundle",view:"ZoomImageCenterWide",fieldId:"overview",key:"comp.color",value:"#000000"},{forType:"ProductBundle",view:"ZoomImageCenterWide",fieldId:"price",key:"comp.color",value:"#000000"},{forType:"ProductBundle",view:"ZoomImageCenterWide",fieldId:"retailPrice",key:"comp.color",value:"#000000"},{forType:"ProductBundle",view:"ZoomImageCenterWide",fieldId:"details",key:"comp.color",value:"#000000"},{forType:"ProductBundle",view:"ZoomImageCenterWide",fieldId:"optionsTitle",key:"comp.color",value:"#000000"},{forType:"OptionsList",view:"ZoomImageCenterWide",fieldId:"title",key:"comp.color",value:"#000000"},{forType:"ComboOptionsList",view:"ZoomImageCenterWide",fieldId:"title",key:"comp.color",value:"#000000"},{forType:"EcomTextOption",view:"ZoomImageCenterWide",fieldId:"title",key:"comp.color",value:"#000000"},{forType:"OptionItem",view:"ZoomImageCenterWide",fieldId:"optionsLabel",key:"comp.color",value:"#000000"},{forType:"OptionItem",view:"ZoomImageCenterWide",fieldId:"optionsLabel",key:"comp.color",value:"#000000"},{forType:"ProductBundle",view:"ZoomGalleryLeft",fieldId:"title",key:"comp.color",value:"#ffffff"},{forType:"ProductBundle",view:"ZoomGalleryLeft",fieldId:"overview",key:"comp.color",value:"#000000"},{forType:"ProductBundle",view:"ZoomGalleryLeft",fieldId:"price",key:"comp.color",value:"#000000"},{forType:"ProductBundle",view:"ZoomGalleryLeft",fieldId:"retailPrice",key:"comp.color",value:"#000000"},{forType:"ProductBundle",view:"ZoomGalleryLeft",fieldId:"details",key:"comp.color",value:"#000000"},{forType:"ProductBundle",view:"ZoomGalleryLeft",fieldId:"optionsTitle",key:"comp.color",value:"#000000"},{forType:"OptionsList",view:"ZoomGalleryLeft",fieldId:"title",key:"comp.color",value:"#000000"},{forType:"ComboOptionsList",view:"ZoomGalleryLeft",fieldId:"title",key:"comp.color",value:"#000000"},{forType:"EcomTextOption",view:"ZoomGalleryLeft",fieldId:"title",key:"comp.color",value:"#000000"},{forType:"OptionItem",view:"ZoomGalleryLeft",fieldId:"optionsLabel",key:"comp.color",value:"#000000"},{forType:"ProductItem",view:"FeedbackMsgVertical",fieldId:"title",key:"comp.color",value:"#000000"},{forType:"ProductItem",view:"FeedbackMsgVertical",fieldId:"feedbackMsgProdOpt",key:"comp.color",value:"#000000"},{forType:"ProductItem",view:"FeedbackMsgVertical",fieldId:"price",key:"comp.color",value:"#000000"},{forType:"ProductItem",view:"FeedbackMsgHorizontal",fieldId:"title",key:"comp.color",value:"#000000"},{forType:"ProductItem",view:"FeedbackMsgHorizontal",fieldId:"feedbackMsgProdOpt",key:"comp.color",value:"#000000"},{forType:"ProductItem",view:"FeedbackMsgHorizontal",fieldId:"price",key:"comp.color",value:"#000000"},{forType:"ProductBundle",view:"ZoomImageLeft",fieldId:"retailPrice",key:"comp.color",value:"#000000"},{forType:"ProductBundle",view:"ZoomImageLeft",fieldId:"details",key:"comp.color",value:"#000000"}]}),define.component("ecommerce.integration.components.MobileColorOption",function(a){var b=a;
b.inherits("ecommerce.integration.components.MobileTextOption"),b.methods({initialize:function(a,b,c){this.parent(a,b,c)},_onAllSkinPartsReady:function(){this.getViewNode().setStyle("background-color",this.getDataItem().get("text")),this._initializeTooTip(this.getViewNode())}})}),define.component("ecommerce.integration.components.MobileTextOption",function(a){var b=a;b.inherits("wysiwyg.viewer.components.inputs.TextOption"),b.skinParts({size:{type:"htmlElement"},description:{type:"htmlElement"}}),b.methods({initialize:function(a,b,c){this.parent(a,b,c)},_initializeTooTip:function(){var a=this.getDataItem().get("description");a&&a.trim().length>0&&this._skinParts.description.set("html",a)}})}),define.Class("ecommerce.parts_logic.EcomAddToCartButtonLogic",function(a){var b=a;b.inherits("wixapps.core.logics.LogicBase"),b.utilize(["wixapps.core.views.ViewContext","ecommerce.core.EcomDataProvider","ecommerce.core.EcomCartAPI","ecommerce.core.EcomLogger","ecommerce.core.InfrastructureUtils"]),b.traits(["ecommerce.parts_logic.EcomStoreManageTrait"]),b.fields({_productId:""}),b.methods({initialize:function(a){this._environment=a,this._dataProvider=new this.imports.EcomDataProvider(a),this._localizer=this._environment.getAppInstance().getLocalizer(),this._cartAPI=new this.imports.EcomCartAPI(this._dataProvider,this._localizer),this._utils=new this.imports.InfrastructureUtils,this._logger=new this.imports.EcomLogger,this._defaultAddToCartText=this._localizer.localize("ECOM_ADD_TO_CART_BUTTON_DEFAULT_TEXT"),this._environment.isMobile()&&(this.preventGeneratingSettingsPanel=!0)},run:function(a,b,c){var d=this._getLabelDataItem();b.addToCartText&&d.setValue(b.addToCartText),this._productId=b.productId||"";var e={"add-product-to-cart":this._addProductToCart.bind(this)};c.showView(d,a,e)},_addProductToCart:function(){this._productId&&(this._cartAPI.addProduct(this._productId),this._logger.sendEcomEvent(this._logger.ADD_TO_CART_BTN_ADD_PRODUCT_TO_CART,{c1:this._productId}))},_getLabelDataItem:function(){return this._dataItem||(this._dataItem=this._utils.createDataItem(this._defaultAddToCartText,this._environment)),this._dataItem},generateSettingsPanel:function(a,b){var c=b.get("appLogicParams"),d=this,e=c.addToCartText&&c.addToCartText.value||d._defaultAddToCartText;a.addInputField(d._localizer.localize("ECOM_ADD_TO_CART_BUTTON_DEFAULT_TEXT_PANEL")).setValue(e).addEvent("inputChanged",function(a){c.addToCartText={type:"AppPartParam",value:a.value},b.fireDataChangeEvent()})},generateDataSelectorPanel:function(a,b){var c=b.get("appLogicParams"),d=this;this._dataProvider.getProducts(function(e){e=e.getChildValue("items");var f=e.map(function(a){for(var b=0;b<a.productItems.length;b++){var c=a.productItems[b];if(c)return{value:c.id,label:a.title+" "+c.price}}},this);f.unshift({value:"",label:d._localizer.localize("ECOM_ADD_TO_CART_BUTTON_CHOOSE_PROD_PROMPT_DATA")}),a.addLabel(d._localizer.localize("ECOM_ADD_TO_CART_BUTTON_CHOOSE_PROD_TITLE_DATA")),a.addComboBoxField("",f).setValue(d._productId).addEvent("inputChanged",function(a){d._productId!=a.value&&(d._productId=a.value,c.productId={type:"AppPartParam",value:a.value},b.fireDataChangeEvent())})})},getDataEditingMetaInfo:function(){return{title:this._localizer.localize("ECOM_ADD_TO_CART_BUTTON_PART_NAME"),hasDataSelection:!0,dataSelectionLabel:this._localizer.localize("ECOM_ADD_TO_CART_BUTTON_SELECT_PROD_FPP"),dataEditingLabel:this._localizer.localize("ECOM_MANAGE_STORE_FPP"),hasDataEdit:!0}}})}),define.Class("ecommerce.parts_logic.EcomCartLogic",function(a){var b=a;b.inherits("wixapps.core.logics.LogicBase"),b.binds(["_updateProduct","_removeProduct"]),b.resources(["W.Commands"]),b.utilize(["ecommerce.core.EcomDataProvider","wixapps.core.views.ViewContext","ecommerce.core.EcomCartAPI","ecommerce.core.EcomMessagesController","ecommerce.core.InfrastructureUtils"]),b.traits(["ecommerce.parts_logic.EcomStoreManageTrait"]),b.fields({_lastProductProcessed:null}),b.methods({initialize:function(a){this._environment=a,this._migrateViewCustomizations(),this._dataProvider=new this.imports.EcomDataProvider(a),this._localizer=this._environment.getAppInstance().getLocalizer(),this._cartAPI=new this.imports.EcomCartAPI(this._dataProvider,this._localizer),this._msgCtrl=new this.imports.EcomMessagesController,this._createEvents()},run:function(a,b,c){var d=this;this._registerCommands(),this._transformParamsToCustomizations(b),this._addLoadingIndicatorEvents(c),this._dataProvider.getCart(function(b){c.showView(b,a,d._getEventsHandlers())})},_addLoadingIndicatorEvents:function(a){this._showLoading=a.showLoadingIndicator,this._hideLoading=a.hideLoadingIndicator},_migrateViewCustomizations:function(){for(var a=this._environment.getAppPart(),b=a.getDataItem().get("appLogicCustomizations"),c=!1,d=null,e=0,f=b.length;f>e;e++)"selectCountryLabel"==b[e].fieldId&&"value"==b[e].key&&(d=b[e].value),"countriesCombo"==b[e].fieldId&&"comp.promptText"==b[e].key&&(c=!0);if(!c&&d){var g={forType:"AdvancedDestination",view:"AdvancedDestinationCountries",fieldId:"countriesCombo",mode:"*",key:"comp.promptText",value:d};a.getViewsCustomizer().addRule(g),a.applyCustomizationRule(g,!1)}},_getEventsHandlers:function(){return{"button-down":this._removeProduct.bind(this),"qty-input-changed":this._updateProduct.bind(this),"qty-input-blur":this._instantUpdateProd.bind(this),"qty-input-keyup":this._qtyChanged.bind(this),"qty-invalid-value":this._invalidQty.bind(this)}},_transformParamsToCustomizations:function(a){if(a.emptyCartText){for(var b=this._environment.getAppPart(),c=b.getDataItem().get("appLogicCustomizations"),d=0;d<c.length;d++)if("emptyCartLbl"==c[d].fieldId&&"value"==c[d].key)return;var e={forType:"Cart",view:"NoData",fieldId:"emptyCartLbl",mode:"*",key:"value",value:a.emptyCartText};b.getViewsCustomizer().addRule(e),b.applyCustomizationRule(e,!1)}},_registerCommands:function(){this.resources.W.Commands.registerCommandListenerByName("Apps.Ecommerce.ReloadAllData",this,this._reloadData),this.resources.W.Commands.registerCommandListenerByName("Apps.Ecommerce.NewCartCreated",this,this._reloadData),this.resources.W.Commands.registerCommandListenerByName("Apps.Ecommerce.ShowLoadingSign",this,this._showLoadingCmd),this.resources.W.Commands.registerCommandListenerByName("Apps.Ecommerce.HideLoadingSign",this,this._hideLoadingCmd)},_createEvents:function(){var a=this;this._instantUpdateProd=function(){a._cartAPI.sendRequestsToMagento()},this._qtyChanged=function(b){"13"==b.cause.code&&a._cartAPI.sendRequestsToMagento()},this._invalidQty=function(b){var c=b.cause.value,d=b.cause.validValue;c>=d&&a._msgCtrl.showError(a._localizer.localize("ECOM_SHOPPING_CART_INSUFFICIENT_STOCK_ERR_TITLE"),a._localizer.localize("ECOM_SHOPPING_CART_INSUFFICIENT_STOCK_ERR_DESC"))}},generateSettingsPanel:function(a){var b=this;a.addButtonField(b._localizer.localize("ECOM_SHOPPING_CART_PREVIEW_CART_LABEL_PANEL"),b._localizer.localize("ECOM_SHOPPING_CART_PREVIEW_CART_BTN_PANEL")).addEvent("click",function(){b._cartAPI.addRandomProducts()})},getDataEditingMetaInfo:function(){return{title:this._localizer.localize("ECOM_SHOPPING_CART_PART_NAME"),hasDataSelection:!1,dataSelectionLabel:this._localizer.localize("ECOM_CHOOSE_COLLECTION_FPP"),dataEditingLabel:this._localizer.localize("ECOM_MANAGE_STORE_FPP"),hasDataEdit:!1}},_updateProduct:function(a){var b=a.data.getParent();this._cartAPI.updateProduct(b),this._lastProductProcessed&&this._lastProductProcessed.getChildValue("id")!=b.getChildValue("id")&&this._cartAPI.sendRequestsToMagento(),this._lastProductProcessed=b},_removeProduct:function(a){a.cause.rightClick||(this._lastProductProcessed=null,this._cartAPI.removeProduct(a.data.getChildValue("id")))},_showLoadingCmd:function(){this._showLoading()},_hideLoadingCmd:function(){this._hideLoading(),this._lastProductProcessed=null}})}),define.Class("ecommerce.parts_logic.EcomCheckoutButtonLogic",function(a){var b=a;b.inherits("wixapps.core.logics.LogicBase"),b.binds(["_getCheckoutLink","_getBlockCheckout","_handleCheckout"]),b.resources(["W.Config","W.Viewer","W.Commands"]),b.utilize(["ecommerce.core.EcomDataProvider","wixapps.core.views.ViewContext","ecommerce.core.EcomCheckoutAPI","ecommerce.core.EcomLogger","ecommerce.core.EcomMessagesController","ecommerce.core.InfrastructureUtils"]),b.traits(["ecommerce.parts_logic.EcomStoreManageTrait","ecommerce.parts_logic.EcomCheckoutFlowTrait"]),b.fields({_linkData:{_type:"wix:Link",href:"",label:"CHECKOUT NOW",target:"_self",linkType:"WEBSITE",icon:""},_data:{_type:"CheckoutButton"}}),b.methods({initialize:function(a){this._environment=a,this._dataProvider=new this.imports.EcomDataProvider(a),this._localizer=this._environment.getAppInstance().getLocalizer(),this._checkoutAPI=new this.imports.EcomCheckoutAPI(this._localizer),this._logger=new this.imports.EcomLogger,this._msgCtrl=new this.imports.EcomMessagesController,this._utils=new this.imports.InfrastructureUtils,this._windowOptions=[{value:"_self",label:this._localizer.localize("ECOM_CHECKOUT_BUTTON_SAME_WINDOW_CHECKOUT_OPT_PANEL")},{value:"_blank",label:this._localizer.localize("ECOM_CHECKOUT_BUTTON_POPUP_WINDOW_CHECKOUT_OPT_PANEL")}],this._registerComputedFields(),this.resources.W.Commands.registerCommandAndListener("WPreviewCommands.WEditModeChanged",this,this._closeCheckoutPopup)},run:function(a,b,c){this._registerCommands(),this._initializeInnerData(b),this._transformParamsToCustomizations(b);var d=this._utils.createDataItem({_type:"CheckoutButton"},this._environment);c.showView(d,a,this._getEventsHandlers())},_initializeInnerData:function(a){this.resources.W.Config.env.$isEditorViewerFrame||(this._linkData.target=a.checkoutTarget||this._linkData.target),this.resources.W.Config.env.$isPublicViewerFrame&&this._environment.isMobile()&&(this._linkData.target="_blank")},setValidationCallBack:function(a){this._validationCallBack=a},_transformParamsToCustomizations:function(a){if(a.checkoutText){for(var b=this._environment.getAppPart(),c=b.getDataItem().get("appLogicCustomizations"),d=0;d<c.length;d++)if("checkoutButtonLink"==c[d].fieldId&&"comp.label"==c[d].key)return;var e={forType:"CheckoutButton",view:"Compact",fieldId:"checkoutButtonLink",mode:"*",key:"comp.label",value:a.checkoutText};b.getViewsCustomizer().addRule(e),b.applyCustomizationRule(e,!1)}},_registerComputedFields:function(){this._environment.getDataItemFactory().registerComputedFieldController("checkoutButtonLink","CheckoutButton",this._getCheckoutLink,null)},_registerCommands:function(){this.injects().Commands.registerCommandListenerByName("Apps.Ecommerce.NewCartCreated",this,this._reloadData)},_getEventsHandlers:function(){return{"click-checkout":this._handleCheckout.bind(this)}},_getCheckoutLink:function(){var a="";return this._getBlockCheckout()||(a=this._getCheckoutUrl()),this._linkData.href=a,this._linkData},_getCheckoutUrl:function(){var a="",b=this._dataProvider.getCartId(),c=this._dataProvider.getStoreId();return a=this._hasExternalCheckoutUrl()?this._checkoutAPI.getExternalCheckoutURL(b,c):this._checkoutAPI.getCheckoutURL(b,c)},_hasExternalCheckoutUrl:function(){var a=this._environment.getAppPart().getMainProxy().getViewContext(),b=a&&a.getData().getChildByRef("cart");if(b){var c=b.getChildByRef("hasExternalCheckoutUrl");return c&&c.getValue()}return!1},_proceedToCheckout:function(a){var b=!0,c=parseInt(this._dataProvider.getStoreId(),10),d=this._localizer.localize("ECOM_CHECKOUT_BUTTON_PAYMENT_METHOD_NOT_CONFIGURED_ERR_DESC");return c&&c!=this._dataProvider.DEFAULT_STORE_ID||(this._logger.sendEcomEvent(this._logger.ABSENT_STORE_ID_BLOCKED_CHECKOUT),this._msgCtrl.showError(this._localizer.localize("ECOM_CHECKOUT_BUTTON_PAYMENT_METHOD_NOT_CONFIGURED_ERR_TITLE"),d),b=!1),(b=b&&!this._dataProvider.isDirtyCartEmpty())?(this._logger.sendEcomEvent(this._logger.USER_PROCEEDED_TO_CHECKOUT,{c1:this._dataProvider.getCartId(),c2:"from same page"}),void 0):this._preventDefaultEvent(a)},_getBlockCheckout:function(){var a=!1;return this._checkoutAPI.isTemplateViewer()?a=!0:this.resources.W.Config.env.$isPublicViewerFrame&&(a=!this._checkoutAPI.isEcomPremium()),a},generateSettingsPanel:function(a,b){var c=b.get("appLogicParams"),d=this,e=c.checkoutTarget&&c.checkoutTarget.value||this._windowOptions[0].value;a.addComboBoxField(d._localizer.localize("ECOM_CHECKOUT_BUTTON_BUYERS_CHECKOUT_LABEL_PANEL"),this._windowOptions).setValue(e).addEvent("inputChanged",function(a){c.checkoutTarget={type:"AppPartParam",value:a.value},b.fireDataChangeEvent()})},getDataEditingMetaInfo:function(){return{title:this._localizer.localize("ECOM_CHECKOUT_BUTTON_PART_NAME"),hasDataSelection:!1,dataSelectionLabel:"",dataEditingLabel:this._localizer.localize("ECOM_MANAGE_STORE_FPP"),hasDataEdit:!1}}})}),define.Class("ecommerce.parts_logic.EcomCheckoutFlowTrait",function(a){var b=a;b.binds(["_onMessage","_continueCheckout","_onUpgradeToPremium"]),b.fields({_isPopupOpen:!1}),b.statics({UPGRADE_URL:"/wix/api/premiumStart"}),b.methods({_handleCheckout:function(a){return this._validationCallBack&&this._validationCallBack()===!1?this._preventDefaultCheckoutEvent(a):(this._canUserProceedToCheckout()?this._proceedToCheckoutInViewer(a):this.resources.W.Config.env.$isPublicViewerFrame?this._blockCheckoutInViewer():this._blockCheckoutInPreview(),void 0)},_preventDefaultEvent:function(a){return a.cause.preventDefault(),!1},_showCheckoutPopup:function(){var a=new Element("div",{id:"checkoutPage"}),b=new Element("div");b.setStyles({position:"fixed",top:"0",left:"0",right:"0",bottom:"0","background-color":"#333",opacity:"0.8",filter:"alpha(opacity=80)"});var c=new Element("iframe",{id:"checkoutPageIFrame"}),d=this._dataProvider.getCartId(),e=this._dataProvider.getStoreId();c.src=this._checkoutAPI.getExternalCheckoutURL(d,e),c.setStyles({width:"900px",height:"600px",position:"fixed",top:"50%",left:"50%",margin:"-300px 0 0 -450px"}),this._listenToCloseMessage(),this._logger.sendEcomEvent(this._logger.USER_PROCEEDED_TO_CHECKOUT,{c1:d,c2:"from popup"}),a.adopt(b),a.adopt(c),$$("body").adopt(a),this._isPopupOpen=!0},_listenToCloseMessage:function(){window.addListener("message",this._onMessage)},_canUserProceedToCheckout:function(){return this.resources.W.Config.env.$isPublicViewerFrame&&this._checkoutAPI.isEcomPremium()},_proceedToCheckoutInViewer:function(a){if(this._dataProvider.isDirtyCartEmpty())return this._preventDefaultCheckoutEvent(a);if(this._isCheckoutInPopup()&&!this._environment.isMobile())return this._showCheckoutPopup(),this._preventDefaultCheckoutEvent(a);var b="_blank"==this._linkData.target?"from popup":"from same page";this._logger.sendEcomEvent(this._logger.USER_PROCEEDED_TO_CHECKOUT,{c1:this._dataProvider.getCartId(),c2:b})},_preventDefaultCheckoutEvent:function(a){var b=a.cause||a;return b.preventDefault&&b.preventDefault(),!1},_blockCheckoutInViewer:function(){if(this._environment.isMobile())this._showFriendlyCheckoutError();else if(this._checkoutAPI.isTemplateViewer()){var a=this._logger.CHECKOUT_BLOCKED_FROM_TEMPLATE_VIEWER,b=this._localizer.localize("ECOM_OH_OH_ERR_TITLE"),c=this._localizer.localize("ECOM_CHECKOUT_BLOCKED_IN_TEMPLATE_VIEWER_ERR_DESC");this._logger.sendEcomEvent(a),this._msgCtrl.showError(b,c)}else this._checkoutAPI.isSiteOwnerOnWixDomain()?this._showDetailedCheckoutMessage():this._showFriendlyCheckoutError()},_showFriendlyCheckoutError:function(){var a="",b=null,c=this.resources.W.Config.getPremiumFeatures();c.length>0?(b=this._logger.CHECKOUT_BLOCKED_FOR_NON_ECOMMERCE_PREMIUM_USER,a="2034"):(b=this._logger.CHECKOUT_BLOCKED_FOR_NON_PREMIUM_USER,a="2026");var d=this._localizer.localize("ECOM_OOPS_ERR_TITLE"),e=this._getStyledErrorMessage(this._localizer.localize("ECOM_CHECKOUT_BLOCKED_FOR_NON_PREMIUM_USER_FRIENDLY_MSG"),a);this._logger.sendEcomEvent(b),this._msgCtrl.showError(d,e)},_showDetailedCheckoutMessage:function(){var a={};a.title=this._localizer.localize("ECOM_CHECKOUT_MESSAGE_TITLE"),a.subtitle=this._localizer.localize("ECOM_CHECKOUT_MESSAGE_SUB_TITLE"),a.description=this._localizer.localize("ECOM_CHECKOUT_MESSAGE_DESCRIPTION"),a.tryBtnLabel=this._localizer.localize("ECOM_CHECKOUT_MESSAGE_TRY_IT_OUT_BUTTON_TEXT"),a.upgradeBtnLabel=this._localizer.localize("ECOM_CHECKOUT_MESSAGE_UPGRADE_BUTTON_TEXT"),this._logger.sendEcomEvent(this._logger.CHECKOUT_MESSAGE_DISPLAYED),this._msgCtrl.showCheckoutMsgDialog(a,this._continueCheckout,this._onUpgradeToPremium)},_continueCheckout:function(a){if(this._logger.sendEcomEvent(this._logger.CHECKOUT_MESSAGE_TRY_CHECKOUT_BUTTON_CLICK),this._msgCtrl.hideCheckoutMsgDialog(),this._isCheckoutInPopup())return this._showCheckoutPopup(),this._preventDefaultCheckoutEvent(a);var b=this._getCheckoutUrl();window.open(b,this._linkData.target)},_onUpgradeToPremium:function(){if(this._logger.sendEcomEvent(this._logger.CHECKOUT_MESSAGE_UPGRADE_BUTTON_CLICK),this._isNewTemplateInPreview())this._handleUpgradeFromUnsavedSite();else{var a=window.serviceTopology.premiumServerUrl||window.serviceTopology.billingServerUrl,b=a+this.UPGRADE_URL,c=this.resources.W.Config.getMetaSiteId();b+="?referralAdditionalInfo=html_ECOM_CHECKOUT",b+="&siteGuid="+c,window.top.open(b,"_blank"),this._msgCtrl.hideCheckoutMsgDialog(),this.resources.W.Config.env.$isEditorViewerFrame&&this._msgCtrl.showMessage(this._localizer.localize("ECOM_REFRESH_WHEN_UPGRADE_COMPLETED_TITLE"),this._localizer.localize("ECOM_REFRESH_WHEN_UPGRADE_COMPLETED_DESCRIPTION"))}},_isNewTemplateInPreview:function(){return this.resources.W.Config.siteNeverSavedBefore()&&this.resources.W.Config.env.$isEditorViewerFrame},_handleUpgradeFromUnsavedSite:function(){window.top&&window.top.W&&window.top.W.Editor&&(window.top.W.Commands.executeCommand("WEditorCommands.WSetEditMode",{editMode:window.top.W.Editor.EDIT_MODE.CURRENT_PAGE}),window.top.W.Commands.executeCommand("WEditorCommands.UpgradeToPremium",{referralAdditionalInfo:"ECOM_CHECKOUT"}))},_getStyledErrorMessage:function(a,b){var c=new Element("span",{html:"(WOS"+b+")",styles:{color:"#909090","font-size":"11px"}});return a+" "+c.outerHTML},_isCheckoutInPopup:function(){return this._hasExternalCheckoutUrl()&&"_blank"==this._linkData.target},_blockCheckoutInPreview:function(){if(!this._checkoutAPI.isEcomPremium()&&!this._environment.isMobile()){if(this.resources.W.Config.env.$isEditorViewerFrame){var a=window.top.W.Commands;a.executeCommand("Tooltip.CloseTip")}this._showDetailedCheckoutMessage()}},_onMessage:function(a){var b=this.resources.W.Config.getServiceTopologyProperty("ecommerceCheckoutUrl");if(-1!=b.indexOf(a.origin)){var c=null;try{c=a.data}catch(d){}if("closeWindow"==c)this._closeCheckoutPopup();else switch(c=JSON.parse(c)||{},c.eventType){case"doSuccessCheckout":this._onCheckoutSuccess();break;case"doCancelCheckout":this._closeCheckoutPopup();break;case"goToCustomURL":this._navigateToUrl(c.newURL)}}},_closeCheckoutPopup:function(){this._isPopupOpen&&($$("body").getElementById("checkoutPage")[0].dispose(),window.removeListener("message",this._onMessage),this._isPopupOpen=!1)},_onCheckoutSuccess:function(){this._closeCheckoutPopup();var a=this._checkoutAPI.getCheckoutSuccessUrl();if(a){var b=a.split("#!")[1],c=b.split("/")[1];this.resources.W.Viewer.goToPage(c)}this._dataProvider.clearCartId(),this._dataProvider.reloadAllData()},_navigateToUrl:function(a){this._closeCheckoutPopup(),window.location.href=a}})}),define.Class("ecommerce.parts_logic.EcomCouponLogic",function(a){var b=a;b.inherits("wixapps.core.logics.LogicBase"),b.binds(["_setCoupon","_clearCoupon","_invalidateCoupon"]),b.resources(["W.Commands"]),b.utilize(["ecommerce.core.EcomDataProvider","ecommerce.core.EcomCouponAPI","ecommerce.core.InfrastructureUtils"]),b.methods({initialize:function(a){this._environment=a,this._dataProvider=new this.imports.EcomDataProvider(a),this._couponAPI=new this.imports.EcomCouponAPI(this._dataProvider,this._environment.getAppInstance().getLocalizer()),this.resources.W.Commands.registerCommandListenerByName("Apps.Ecommerce.CouponError",this,this._invalidateCoupon),this.isValid=!0},run:function(a,b,c){var d=this;this._dataProvider.getCart(function(b){c.showView(b,a,d._getEventsHandlers())})},_getEventsHandlers:function(){return{"set-coupon":this._setCoupon.bind(this),"clear-coupon":this._clearCoupon.bind(this),"clear-message":this._clearMessage.bind(this)}},_setCoupon:function(a){var b=a.data.getChildByRef("couponCode").getValue();""!==b&&void 0!==b&&this._couponAPI.setEcomCoupon(b)},_clearCoupon:function(){this._couponAPI.clearEcomCoupon()},_clearMessage:function(){if(!this.isValid){this.isValid=!0;var a={valid:!0,validationMessage:"none"},b=this._getCouponDataItem();b.getChildByRef("validationMessage").setValue(""),b.getChildByRef("couponCode").fireEvent(Constants.DataItemEvents.VALIDATION_PERFORMED,a)}},_invalidateCoupon:function(a){this.isValid=!1;var b={valid:!1,validationMessage:a},c=this._getCouponDataItem();c.getChildByRef("validationMessage").setValue(a),c.getChildByRef("couponCode").fireEvent(Constants.DataItemEvents.VALIDATION_PERFORMED,b)},_getCouponDataItem:function(){var a=this._environment.getAppPart().getMainProxy().getViewContext();return a.getData().getChildByRef("cart").getChildByRef("coupon")}})}),define.Class("ecommerce.parts_logic.EcomJoinedCartLogic",function(a){var b=a;b.inherits("wixapps.core.logics.LogicBase"),b.resources(["W.Commands","W.Config"]),b.utilize(["ecommerce.parts_logic.EcomCartLogic","ecommerce.parts_logic.EcomCouponLogic","ecommerce.parts_logic.EcomShippingLogic","ecommerce.parts_logic.EcomCheckoutButtonLogic","ecommerce.core.EcomCartAPI","ecommerce.core.InfrastructureUtils","ecommerce.core.EcomDataProvider","ecommerce.core.ThankYouPageController"]),b.traits(["ecommerce.parts_logic.EcomStoreManageTrait"]),b.methods({initialize:function(a){this._environment=a,this._migrateViewCustomizations(),this._dataProvider=new this.imports.EcomDataProvider(a),this._localizer=this._environment.getAppInstance().getLocalizer(),this._cartAPI=new this.imports.EcomCartAPI(this._dataProvider,this._localizer),this._cartLogic=new this.imports.EcomCartLogic(a),this._couponLogic=new this.imports.EcomCouponLogic(a),this._shippingLogic=new this.imports.EcomShippingLogic(a),this._chkBtnLogic=new this.imports.EcomCheckoutButtonLogic(a),this._pageController=new this.imports.ThankYouPageController(a),this._registerCommands(),this.resources.W.Config.siteNeverSavedBefore()&&this.resources.W.Commands.registerCommandAndListener("Apps.Ecommerce.ReloadApplication",this,function(){this._dataProvider.cleanDataCache(),this.run.apply(this,this._runArgs)}.bind(this))},run:function(a,b,c){var d=this;this._runArgs=[a,b,c];var e=this._environment.getAppPart();this.resources.W.Commands.executeCommand("ApplicationPerformanceSpy.logPhase",{step:"loadLogicData",appPart:e}),this._dataProvider.getCart(function(f){d.resources.W.Commands.executeCommand("ApplicationPerformanceSpy.logPhase",{step:"logicDataLoaded",appPart:e});var g=new d.imports.InfrastructureUtils,h=g.createDataItem({_type:"CheckoutButton"},d._environment);h.addEvent(Constants.DataItemEvents.CHANGE,function(){i.getChildByRef("checkout").setValue(h.getValue())}),d._cartDataChange=function(){i.getChildByRef("cart").setValue(f.getValue())},d._hasEvent(f,Constants.DataItemEvents.CHANGE,d._cartDataChange)||f.addEvent(Constants.DataItemEvents.CHANGE,d._cartDataChange);var i=g.createDataItem({_type:"JoinedCart",cart:f.getValue(),checkout:h.getValue()},d._environment);d._prepareInnerCompsLogic(b,c,f),c.showView(i,a,d._getEventsHandlers(),d._getViewVars()),f.getChildValue("preloadShipping")&&d._shippingLogic._initializeShippingData()})},_hasEvent:function(a,b,c){var d=a.$events;return d&&d[b]&&d[b].indexOf(c)>-1},_getViewVars:function(){return{useErasableTextInputComponent:!1}},_prepareInnerCompsLogic:function(a,b,c){if(this._cartLogic._addLoadingIndicatorEvents(b),this._chkBtnLogic._initializeInnerData(a),c.getChildValue("hasFees")===!0&&this._chkBtnLogic.setValidationCallBack(this._shippingLogic.validateShipping),this.resources.W.Config.env.$isPublicViewerFrame){var d=this._pageController.getThankYouPageUrl();d&&this._chkBtnLogic._checkoutAPI.setCheckoutSuccessUrl(d)}},_migrateViewCustomizations:function(){for(var a=this._environment.getAppPart(),b=a.getDataItem().get("appLogicCustomizations"),c=0,d=b.length;d>c;c++)"items"==b[c].fieldId&&"comp.style"==b[c].key&&"*"==b[c].format&&(b[c].format="")},_getEventsHandlers:function(){return _.merge(this._cartLogic._getEventsHandlers(),this._couponLogic._getEventsHandlers(),this._shippingLogic._getEventsHandlers(),this._chkBtnLogic._getEventsHandlers())},_registerCommands:function(){this.resources.W.Commands.registerCommandListenerByName("Apps.Ecommerce.ReloadAllData",this,this._reloadData),this.resources.W.Commands.registerCommandListenerByName("Apps.Ecommerce.NewCartCreated",this,this._reloadData),this.resources.W.Commands.registerCommandListenerByName("Apps.Ecommerce.ShowLoadingSign",this,this._startLoadingCmd),this.resources.W.Commands.registerCommandListenerByName("Apps.Ecommerce.HideLoadingSign",this,this._finishLoadingCmd)},generateSettingsPanel:function(a,b){this._cartLogic.generateSettingsPanel(a,b),this._environment.isMobile()||(this._chkBtnLogic.generateSettingsPanel(a,b),this._pageController.updateSettingsPanel(a))},getDataEditingMetaInfo:function(){return{title:this._localizer.localize("ECOM_SHOPPING_CART_PART_NAME"),hasDataSelection:!1,dataSelectionLabel:this._localizer.localize("ECOM_CHOOSE_COLLECTION_FPP"),dataEditingLabel:this._localizer.localize("ECOM_MANAGE_STORE_FPP"),hasDataEdit:!0}},_startLoadingCmd:function(){this._cartLogic._showLoadingCmd()},_finishLoadingCmd:function(a){a?this._reloadData():this._cartLogic._hideLoadingCmd()},dispose:function(){var a=this;this._dataProvider.getCart(function(b){b.removeEvent(Constants.DataItemEvents.CHANGE,a._cartDataChange),a.parent()})}})}),define.Class("ecommerce.parts_logic.EcomProductsListLogic",function(a){var b=a;b.inherits("wixapps.core.logics.LogicBase"),b.resources(["W.Commands","W.Config"]),b.utilize(["wixapps.core.views.ViewContext","ecommerce.core.EcomDataProvider","ecommerce.core.InfrastructureUtils","ecommerce.core.EcomLogger"]),b.traits(["ecommerce.parts_logic.EcomStoreManageTrait"]),b.statics({OUTER_DEFAULT_CATEGORY:"defaultCategory",INNER_DEFAULT_CATEGORY:"-1",MOBILE_PRODUCT_CHUNK:5,RELOAD_AFTER_SAVE_ATTEMPTS:4,RELOAD_AFTER_SAVE_INTERVAL:2e3}),b.fields({_reloadCounter:0,_appReloaded:!1,_hideZoomCustomization:!1}),b.methods({initialize:function(a){this._environment=a,this._dataProvider=new this.imports.EcomDataProvider(a),this._logger=new this.imports.EcomLogger,this._category=null,this._utils=new this.imports.InfrastructureUtils,this._localizer=this._environment.getAppInstance().getLocalizer(),this.resources.W.Commands.registerCommandListenerByName("Apps.Ecommerce.ReloadAllData",this,this._reloadData),this.resources.W.Config.siteNeverSavedBefore()&&this.resources.W.Commands.registerCommandAndListener("Apps.Ecommerce.ReloadApplication",this,function(){this._appReloaded=!0,this._dataProvider.cleanDataCache(),this.run.apply(this,this._runArgs)}.bind(this))},run:function(a,b,c){var d=this,e=this.getCategoryId(b);this._runArgs=[a,b,c];var f=this._environment.getAppPart();this.resources.W.Commands.executeCommand("ApplicationPerformanceSpy.logPhase",{step:"loadLogicData",appPart:f}),this._hideZoomCustomization=!1,this._dataProvider.getCategoryProducts(e,{success:function(b){d.resources.W.Commands.executeCommand("ApplicationPerformanceSpy.logPhase",{step:"logicDataLoaded",appPart:f}),d._category=b,0===d._category.getChildValue("items").length&&d.resources.W.Config.env.$isEditorViewerFrame&&(d._category.getChildByRef("emptyGalleryLabel").setValue(d._localizer.localize("ECOM_GALLERY_SEARCH_HAS_PROVIDED_NO_RESULTS_LABEL")),d._hideZoomCustomization=!0),c.showView(d._category,a,d._getEventsHandlers(),d._getViewVars(a))},fail:function(g){if(d._appReloaded&&d._reloadCounter<d.RELOAD_AFTER_SAVE_ATTEMPTS&&d.resources.W.Config.env.$isEditorViewerFrame&&1103==g.payload.code)return d._logger.sendEcomEvent(d._logger.GALLERY_RELOAD_ATTEMPT_AFTER_FIRST_SAVE,{c1:d._reloadCounter}),setTimeout(function(){d._reloadCounter++,d._dataProvider.clearRunningRequests(e),d.run(a,b,c)},d.RELOAD_AFTER_SAVE_INTERVAL),void 0;d.resources.W.Commands.executeCommand("ApplicationPerformanceSpy.logPhase",{step:"logicDataFailedToLoad",appPart:f});var h={_type:"ItemsList"};d.resources.W.Config.env.$isEditorViewerFrame&&1103==g.payload.code&&(h.emptyGalleryLabel=d._localizer.localize("ECOM_GALLERY_ASSIGN_NEW_CATEGORY_LABEL"));var i=d._utils.createDataItem(h,d._environment);c.showView(i,a)}})},getCategoryId:function(a){var b=a.categoryId;return b&&b!==this.INNER_DEFAULT_CATEGORY?b:this.OUTER_DEFAULT_CATEGORY},_getViewVars:function(a){return{originalViewName:a,expOutOfStockOpen:!1}},_getEventsHandlers:function(){return{"load-more":this._loadMoreProducts.bind(this)}},_loadMoreProducts:function(){var a=this._environment.getAppPart().getMainProxy().getViewContext().getEnvironment(),b=a.getVar("rows"),c=this._environment.getAppPart().getCustomization({key:"rows"}),d=c.length&&parseInt(c[0].value)||this.MOBILE_PRODUCT_CHUNK;a.setVar("rows",b.getValue()+d)},generateDataSelectorPanel:function(a,b){var c=b.get("appLogicParams"),d=this;this._dataProvider.getCategories(function(e){var f=e.getChildByRef("items").getValue();f.unshift({value:d.INNER_DEFAULT_CATEGORY,label:d._localizer.localize("ECOM_GALLERY_CHOOSE_COLLECTION_TITLE_DATA")}),a.addLabel(d._localizer.localize("ECOM_GALLERY_CHOOSE_COLLECTION_DESC_DATA"));var g=c.categoryId&&c.categoryId.value||d.INNER_DEFAULT_CATEGORY;a.addComboBoxField("",f).setValue(g).addEvent("inputChanged",function(a){d._logger.sendEcomEvent(d._logger.PRODUCTS_LIST_SELECTED_COLLECTION_CHANGED,{c1:a.value}),c.categoryId={type:"AppPartParam",value:a.value},b.fireDataChangeEvent()}),a.addInlineTextLinkField(null,d._localizer.localize("ECOM_GALLERY_CREATE_NEW_COLLECTION_TITLE_DATA"),d._localizer.localize("ECOM_GALLERY_GO_TO_MANAGE_STORE_LINK_DATA")).addEvent("click",function(){d._logger.sendEcomEvent(d._logger.DATA_SELECTION_DIALOG_GO_TO_MANAGE_STORE);var b=a.injects().Commands;b.executeCommand("WAppsEditorCommands.OpenEditDataDialog",{selectedComp:a._previewComponent}),a._dialogWindow.closeDialog()})})},getDataEditingModel:function(){return this},_getLastTenItems:function(a,b){b(this._category.getChildByRef("items").getChildren())},getLastTenItemsZoomParams:function(a,b){return this.parent(a,b,"id","title")},getTypeFriendlyName:function(){return"Product"},getZoomCustomizationExtraParams:function(){var a={hideNextPrevBtns:!0};return this._environment.isMobile()&&(a.enableScroll=!0),a},hideZoomCustomization:function(){return this._hideZoomCustomization},getDataEditingMetaInfo:function(){var a={title:this._localizer.localize("ECOM_GALLERY_PART_NAME"),hasDataSelection:!0,dataSelectionLabel:this._localizer.localize("ECOM_CHOOSE_COLLECTION_FPP"),dataEditingLabel:this._localizer.localize("ECOM_MANAGE_STORE_FPP"),zoomOpenerLabel:this._localizer.localize("ECOM_PRODUCT_PAGE_PART_NAME"),hasDataEdit:!0},b=this.resources.W.Config.getPremiumFeatures();if(!b.contains("HasECommerce")){a.partDescription=this._localizer.localize("ECOM_GALLERY_PART_DESCRIPTION")+"<br/><br/>";var c=this._localizer.localize("ECOM_GALLERY_PART_PREMIUM_PACKAGE_DESCRIPTION"),d="onclick=\"W.Commands.executeCommand('WEditorCommands.UpgradeToPremium', {'referralAdditionalInfo':'ECOM_GALLERY'}); return false;\"";c=c.replace("href=''","href='#' "+d),a.partDescription+=c}return a}})}),define.Class("ecommerce.parts_logic.EcomShippingLogic",function(a){var b=a;b.inherits("wixapps.core.logics.LogicBase"),b.binds(["_getShipping","_countrySelected","_regionSelected","validateShipping"]),b.utilize(["ecommerce.core.EcomDataProvider","ecommerce.core.EcomShippingAPI","ecommerce.core.InfrastructureUtils","ecommerce.core.EcomLogger"]),b.methods({initialize:function(a){this._environment=a,this._dataProvider=new this.imports.EcomDataProvider(a),this._shippingAPI=new this.imports.EcomShippingAPI(this._dataProvider,this._environment.getAppInstance().getLocalizer()),this._utils=new this.imports.InfrastructureUtils,this._logger=new this.imports.EcomLogger
},run:function(a,b,c){var d=this;this._dataProvider.getCart(function(b){c.showView(b,a,d._getEventsHandlers())})},_getEventsHandlers:function(){return{changeDestination:this._getShipping,countrySelected:this._countrySelected,regionSelected:this._regionSelected}},_getShipping:function(a){this._initializeShippingData();var b=a.context.getData().getChildValue("shippable")?this._logger.CHANGE_SHIPPING_FOR_PRESELECTED_DESTINATION:this._logger.CHANGE_SHIPPING_FOR_UNSUPPORTED_DESTINATION;this._logger.sendEcomEvent(b)},_initializeShippingData:function(){var a=this;this._shippingAPI.getShipping(function(b){var c=a._getShippingDataItem();c.setValue(b.getValue())})},_getShippingDataItem:function(){var a=this._environment.getAppPart().getMainProxy().getViewContext();return a.getData().getChildByRef("cart").getChildByRef("fees").getChildByRef("destination")},_countrySelected:function(a){var b=a.cause.getData().value,c=this._getRegions(b);return c.items&&c.items.length>0?(this._countryId=b,this._setRegions(c),void 0):(this._shippingAPI.setShipping(b),void 0)},_getRegions:function(a){for(var b=this._getShippingDataItem(),c=b.getChildValue("countries").items,d=0;d<c.length;d++)if(c[d].value===a)return c[d].regions;return[]},_setRegions:function(a){var b=this._getShippingDataItem();b.getChildByRef("regions").setValue(a)},_regionSelected:function(a){var b=a.cause.getData().value;this._shippingAPI.setShipping(this._countryId,b)},validateShipping:function(){var a=this._getShippingDataItem(),b=this._environment.getTypesManager();return a.getChildValue("shippable")&&b.validateDataItem(a)}})}),define.Class("ecommerce.parts_logic.EcomStoreManageTrait",function(a){var b=a;b.binds(["getDataEditDialogParams","_reloadData","_getStoreManageURL"]),b.resources(["W.Config","W.Commands","W.Utils"]),b.statics({addedPostMessageEvent:!1,DIALOG_MIN_HEIGHT:700,DIALOG_MARGIN:40}),b.methods({getDataEditDialogParams:function(){this._addPostMessageEvent(this._handleMessageFromManage);var a=window.innerHeight-this.DIALOG_MARGIN;return a=a<this.DIALOG_MIN_HEIGHT?this.DIALOG_MIN_HEIGHT:a,{url:this._getStoreManageURL(),params:{width:992,height:a,title:this._localizer.localize("ECOM_MANAGE_ONLINE_STORE_TITLE"),description:this._localizer.localize("ECOM_MANAGE_ONLINE_STORE_DESC"),dialogSkin:"wysiwyg.editor.skins.dialogs.JustWindowDialogSkin",dialogId:"econManage",nonModal:!1},onClosedCallback:function(){this._dataProvider.reloadAllData()}.bind(this)}},_getStoreManageURL:function(){var a=this.resources.W.Config.getServiceTopologyProperty("ecommerceStoreManagerUrl")+"/";if(a+=this._dataProvider.getStoreId(),a+="?siteId="+this.resources.W.Config.getSiteId(),a+="&metaSiteId="+this.resources.W.Config.getMetaSiteId(),this._isAppPartLoaded("adbeffec-c7df-4908-acd0-cdd23155a817")&&(a+="&cartType=basic"),this.resources.W.Config.isInDebugMode()&&(a+="&isDebug=true"),this.getCategoryId){var b=this._environment.getAppPart().getLogicParams();a+="&catId="+this.getCategoryId(b)}return a},_reloadData:function(){var a=this._environment.getAppPart().getDataItem();a&&a.fireDataChangeEvent()},_addPostMessageEvent:function(){if(!this.addedPostMessageEvent){var a="addEventListener",b="message";Browser.ie&&window.attachEvent&&(a="attachEvent",b="onmessage"),window.top[a](b,function(a){var b=a.data;"string"==typeof a.data&&(b=JSON.parse(a.data)),"econManage"==b.dialogId&&"closing"==b.eventType&&(W.Utils.isIE()&&(window.top.W.EditorDialogs.econManage.querySelector("iframe").src=""),window.top.W.EditorDialogs.econManage.getLogic().closeDialog(),b.isPremiumClick&&window.top.W.Commands.executeCommand("WEditorCommands.UpgradeToPremium",{referralAdditionalInfo:"ECOM_GALLERY"}))},!1),this.$class.prototype.addedPostMessageEvent=!0}},_isAppPartLoaded:function(a){for(var b=this._environment.getAppInstance().getAppParts(),c=0;c<b.length;c++){var d=b[c].getPartDef();if(d.id==a)return!0}return!1}})}),define.Class("ecommerce.parts_logic.EcomViewCartLogic",function(a){var b=a;b.inherits("wixapps.core.logics.LogicBase"),b.resources(["W.Viewer","W.Data","W.Commands","W.Config"]),b.utilize(["ecommerce.core.EcomDataProvider","wixapps.core.views.ViewContext","ecommerce.core.EcomLogger"]),b.traits(["ecommerce.parts_logic.EcomStoreManageTrait"]),b.fields({_linkData:{_type:"wix:Link",href:"",label:"",target:"_self",linkType:"FREE_LINK",icon:""}}),b.methods({initialize:function(a){this._environment=a,this._dataProvider=new this.imports.EcomDataProvider(a),this._logger=new this.imports.EcomLogger,this._localizer=this._environment.getAppInstance().getLocalizer(),this.resources.W.Commands.registerCommandListenerByName("Apps.Ecommerce.ReloadAllData",this,this._reloadData),this.resources.W.Commands.registerCommandListenerByName("Apps.Ecommerce.NewCartCreated",this,this._reloadData),this._environment.isMobile()&&(this.preventGeneratingSettingsPanel=!0),this.resources.W.Config.siteNeverSavedBefore()&&this.resources.W.Commands.registerCommandAndListener("Apps.Ecommerce.ReloadApplication",this,function(){this._dataProvider.cleanDataCache(),this.run.apply(this,this._runArgs)}.bind(this))},run:function(a,b,c){var d=this;this._runArgs=[a,b,c];var e=function(){return d._linkData.href=d._getLinkToPageHref(b.cartPageLink),d._linkData};this._environment.getDataItemFactory().registerComputedFieldController("viewCartLink","Cart",e,null);var f=this._environment.getAppPart();this.resources.W.Commands.executeCommand("ApplicationPerformanceSpy.logPhase",{step:"loadLogicData",appPart:f});var g=this._getViewVars(b,a);this._transformVarsToCustomizations(f,a,g),this._dataProvider.getCart(function(b){d.resources.W.Commands.executeCommand("ApplicationPerformanceSpy.logPhase",{step:"logicDataLoaded",appPart:f}),c.showView(b,a)})},_getViewVars:function(a,b){var c=this._getViewCustomization(b,"buttonType")||a.viewCartType||"itemsCount",d=this._getViewCustomization(b,"cartText")||a.viewCartText||this._localizer.localize("ECOM_VIEW_CART_BUTTON_DEFAULT_TEXT");return{buttonType:c,cartText:d}},_transformVarsToCustomizations:function(a,b,c){_.each(c,function(c,d){var e={forType:"Cart",view:b,fieldId:"vars",format:a.getFormatName(),key:d,value:c};a.getViewsCustomizer().addRule(e),a.applyCustomizationRule(e)})},_getViewCustomization:function(a,b){for(var c=this._environment.getAppPart(),d=c.getDataItem().get("appLogicCustomizations"),e=0;e<d.length;e++){var f=d[e];if(f.view==a&&"vars"==f.fieldId&&f.key==b)return f.value}},generateDataSelectorPanel:function(a,b){var c=b.get("appLogicParams"),d=this,e=this._getSitePages(),f=c.cartPageLink&&c.cartPageLink.value||"";f&&e.shift(),a.addLabel(this._localizer.localize("ECOM_VIEW_CART_BUTTON_CHOOSE_PAGE_DESC_DATA")),a.addComboBoxField("",e).setValue(f).addEvent("inputChanged",function(a){d._linkData.href!=a.value&&(d._logger.sendEcomEvent(d._logger.VIEW_CART_LINK_CHANGED,{c1:a.value}),d._linkData.href=a.value,c.cartPageLink={type:"AppPartParam",value:a.value},b.fireDataChangeEvent())})},getDataEditingMetaInfo:function(){return{title:this._localizer.localize("ECOM_VIEW_CART_PART_NAME"),hasDataSelection:!0,dataSelectionLabel:this._localizer.localize("ECOM_VIEW_CART_BUTTON_LINK_TO_CART_FPP"),dataEditingLabel:this._localizer.localize("ECOM_MANAGE_STORE_FPP"),hasDataEdit:!1}},_getSitePages:function(){var a,b=[{label:"",value:""}],c=this.resources.W.Viewer.getPagesData();if(c){for(a in c){var d=c[a],e=d.get("title");b.push({label:e,value:a})}return b}},_getLinkToPageHref:function(a){if(!a)return"";var b=this.resources.W.Data.getDataByQuery("#"+a);return b?"#!"+b.get("pageUriSEO")+"/"+a:""}})}),define.Class("ecommerce.parts_logic.FeedbackMessageLogic",function(a){var b=a;b.resources(["W.Commands","W.Viewer","W.Utils"]),b.utilize(["ecommerce.core.InfrastructureUtils","ecommerce.converters.EcomProductItemConverter"]),b.binds(["_gotoPageAfterHashChange"]),b.statics({CLOSE_PRODUCT:"closeProduct",SHOW_FEEDBACK:"showFeedback",VIEW_NAME:"FeedbackMessage"}),b.fields({_isVisible:!1}),b.methods({initialize:function(a,b,c){this._environment=a,this._utils=new this.imports.InfrastructureUtils,this._productItemConverter=new this.imports.EcomProductItemConverter,this._localizer=b,this._logger=c,this._behaviors=[{value:this.CLOSE_PRODUCT,label:this._localizer.localize("ECOM_FEEDBACK_MSG_CLOSE_ZOOM_OPT_LABEL")},{value:this.SHOW_FEEDBACK,label:this._localizer.localize("ECOM_FEEDBACK_MSG_SHOW_FEEDBACK_OPT_LABEL")}]},hasFeedbackMessage:function(){var a=this._environment.getAppPart().getLogicParams();return a&&a.afterAddProduct?a.afterAddProduct==this.SHOW_FEEDBACK:!1},showFeedbackMessage:function(a){this._isVisible=!0,this._productItem=this.getProductItem(a);var b=this._getEventsHandlers(),c=this._environment.getAppPart();c.$view.setStyle("opacity","0"),c.showView(this._productItem,this.VIEW_NAME,b)},_getEventsHandlers:function(){return{"continue-shopping":function(){this._logger.sendEcomEvent(this._logger.FEEDBACK_MSG_CONTINUE_SHOPPING_BTN_CLICKED,{c1:this._productItem.getChildValue("id")}),this.closeFeedbackMsg()}.bind(this),"goto-checkout":function(){this._logger.sendEcomEvent(this._logger.FEEDBACK_MSG_CHECKOUT_BTN_CLICKED,{c1:this._productItem.getChildValue("id")}),this._navigateToCartPage()}.bind(this)}},isVisible:function(){return this._isVisible},closeFeedbackMsg:function(){this._isVisible=!1,this.resources.W.Commands.executeCommand("WViewerCommands.MediaZoom.Close",null,this)},_navigateToCartPage:function(){var a=this._getCartPageId(),b=!!W.Data.getDataByQuery("#"+a);a&&b&&this.resources.W.Utils.hash.addEvent("change",this._gotoPageAfterHashChange),this.closeFeedbackMsg()},_gotoPageAfterHashChange:function(a){if(a.isForSureAfterChange){var b=this._getCartPageId();this.resources.W.Utils.hash.removeEvent("change",this._gotoPageAfterHashChange),this.resources.W.Viewer.goToPage(b)}},_getCartPageId:function(){var a=this._environment.getAppPart().getLogicParams(),b=a&&a.cartPageID;return b},generateSettingsPanel:function(a,b){var c=this._environment.getAppPart().getMainProxy().getViewContext(),d=c.getEnvironment().getViewName();d==this.VIEW_NAME?this._updateFeedbackSettingsPanel(a,b):this._updateProductSettingsPanel(a,b)},_updateProductSettingsPanel:function(a,b){var c=this,d=b.get("appLogicParams"),e=d.afterAddProduct&&d.afterAddProduct.value||this._behaviors[0].value;a.addComboBoxField(this._localizer.localize("ECOM_FEEDBACK_MSG_BEHAVIOR_PANEL_LABEL"),this._behaviors).setValue(e).addEvent("inputChanged",function(a){d.afterAddProduct={type:"AppPartParam",value:a.value},a.value==c.CLOSE_PRODUCT?f.collapse():f.uncollapse(),c._fireDataChangePreventRerender(b)});var f=a.addButtonField("",this._localizer.localize("ECOM_FEEDBACK_MSG_STYLE_FEEDBACK_PAGE_BTN_LABEL"));f.addEvent("click",function(){var a=c._environment.getAppPart().getMainProxy().getData();c.showFeedbackMessage(a)}),e==this.CLOSE_PRODUCT&&f.collapse()},_updateFeedbackSettingsPanel:function(a,b){var c=this,d=this._utils.getSitePages(),e=b.get("appLogicParams"),f=e.cartPageID&&e.cartPageID.value||"";a.addComboBoxField(this._localizer.localize("ECOM_FEEDBACK_MSG_CHOOSE_PAGE_DESC_LABEL"),d).setValue(f).addEvent("inputChanged",function(a){e.cartPageID={type:"AppPartParam",value:a.value},c._fireDataChangePreventRerender(b)}),this._listenToOrientationChange()},_fireDataChangePreventRerender:function(a){var b=this._environment.getAppPart();b.setPreventLogicRun(!0),a.fireDataChangeEvent(),b.setPreventLogicRun(!1)},_listenToOrientationChange:function(){var a=this._environment.getAppPart(),b=a.getMainProxy().getViewContext().getEnvironment(),c=b.getVar("msgOrientation");c&&c.addEvent(Constants.DataItemEvents.CHANGE,function(){a.invalidateAppPartSize()})},getProductItem:function(a){var b=this._productItemConverter.convertFromProductBundle(a.getValue());b.options=b.options?this._getSelectedOptions(b.options):[];var c=this._utils.createDataItem(b,this._environment);return c},_getSelectedOptions:function(a){var b=[];return a.forEach(function(a){if(a.isSelectableList&&a.items&&a.items.length){var c=a.selectedValue;if(c>-1){var d=_.find(a.items,function(a){return a.value==c});b.push(d.description||d.text)}else b.push(a.items[0].description||a.items[0].text)}else a.text&&b.push(a.text)}),b}})}),define.Class("ecommerce.parts_logic.ProductBundleLogic",function(a){var b=a;b.inherits("wixapps.core.logics.LogicBase"),b.resources(["W.Utils","W.Commands","W.Config","W.Viewer"]),b.utilize(["wixapps.core.views.ViewContext","ecommerce.core.EcomDataProvider","ecommerce.core.EcomCartAPI","ecommerce.core.EcomLogger","ecommerce.core.EcomOptionsItemsRelations","ecommerce.core.EcomMessagesController","wixapps.core.utils.SocialShareHandler","ecommerce.parts_logic.FeedbackMessageLogic"]),b.binds(["_handleBuyProductError"]),b.methods({initialize:function(a){this._environment=a,this._dataProvider=new this.imports.EcomDataProvider(a),this._localizer=this._environment.getAppInstance().getLocalizer(),this._cartAPI=new this.imports.EcomCartAPI(this._dataProvider,this._localizer),this._logger=new this.imports.EcomLogger,this._msgCtrl=new this.imports.EcomMessagesController,this._socialSharer=new this.imports.SocialShareHandler,this._optionsItemsRelations=new this.imports.EcomOptionsItemsRelations,this._feedbackLogic=new this.imports.FeedbackMessageLogic(this._environment,this._localizer,this._logger),this._environment.isMobile()&&(this.preventGeneratingSettingsPanel=!0),this._cartAPI.addEvent("EcomCartAPI.requestError",this._handleBuyProductError)},run:function(a,b,c){var d=this;this._transformParamsToCustomizations(b);var e=this._environment.getAppPart();this.resources.W.Commands.executeCommand("ApplicationPerformanceSpy.logPhase",{step:"loadLogicData",appPart:e}),this._dataProvider.getProductBundle(b.itemId,{success:function(b){d.resources.W.Commands.executeCommand("ApplicationPerformanceSpy.logPhase",{step:"logicDataLoaded",appPart:e}),d._optionsItemsRelations.initializeOptionsData(b),d._resetProductImage(b),d._autoSelectSingleOptionItems(b),d._sendBILog(b.getChildValue("id")),c.showView(b,a,d._getEventsHandlers(b),d._getViewVars(a))},fail:function(a,b){d.resources.W.Commands.executeCommand("ApplicationPerformanceSpy.logPhase",{step:"logicDataFailedToLoad",appPart:e});var c=a.payload.code,f="1202"==c?d._localizer.localize("ECOM_MAGENTO_REQUEST_FAILED_UNAVAILABLE_PRODUCT_ERR_DESC"):d._localizer.localize("ECOM_MAGENTO_REQUEST_FAILED_ERR_DESC")+b;d._msgCtrl.showError(d._localizer.localize("ECOM_SOMETHING_WENT_WRONG_ERR_TITLE"),f),d.resources.W.Commands.executeCommand("WViewerCommands.MediaZoom.Close",null,d)}})},_resetProductImage:function(a){var b=a.getChildByRef("mediaItems");b=b?b.getValue():[],b.length>0&&a.getChildByRef("productMedia").setValue(b[0])},_getEventsHandlers:function(a){return{textAreaOptionChanged:function(){this._handleTextAreaOptionChanged(a)}.bind(this),productOptionChanged:function(b){this._handleOptionSelectionChanged(a,b)}.bind(this),"buy-product":function(){this._handleBuyProduct(a)}.bind(this),"image-selected":function(b){this._handleImageSelected(a,b)}.bind(this),shareProductPage:function(b){this._handleShareRequest(a,b.params.service)}.bind(this)}},_transformParamsToCustomizations:function(a){if(a.addToCartTitle){for(var b=this._environment.getAppPart(),c=b.getDataItem().get("appLogicCustomizations"),d=0;d<c.length;d++)if("addToCartTitle"==c[d].fieldId&&"comp.label"==c[d].key)return;var e={forType:"ProductBundle",view:"ZoomDetails",fieldId:"addToCartTitle",mode:"*",key:"comp.label",value:a.addToCartTitle};b.getViewsCustomizer().addRule(e),b.applyCustomizationRule(e,!1)}},_sendBILog:function(a){if(this._logger.sendEcomEvent(this._logger.PRODUCT_PAGE_VIEWED_BY_USER,{c1:a}),this._logger.sendEcomPageEvent(window.location.href),this.resources.W.Config.env.$isPublicViewerFrame){var b=this.resources.W.Utils.getQueryParam("deeplink_referrer");b&&this._logger.sendEcomEvent(this._logger.PRODUCT_PAGE_VIEW_FROM_REFERRAL,{c1:a,c2:b})}},_handleImageSelected:function(a,b){if("wixapps.integration.proxies.SliderGalleryProxy"==b.sender.$className)this._handleImageSelectedFromSliderGallery(a,b);else{var c=b.data,d=b.data.getParent(),e=d.getChildIndex(c);if(e>-1){var f=a.getChildValue("mediaItems")[e],g=a.getChildByRef("productMedia");g.setValue(f),this._environment.getAppPart().getEventDispatcher().fireEvent(Constants.WixAppEvents.APP_PART_RESIZE)}}},_getViewVars:function(a){return{originalViewName:a,expOutOfStockOpen:!1}},_handleImageSelectedFromSliderGallery:function(a,b){var c=b.cause,d=b.sender.getCompLogic().getDataItem().get("items"),e=d.indexOf(c);if(e>-1){var f=a.getChildValue("mediaItems")[e],g=a.getChildByRef("productMedia");g.setValue(f)}},_handleOptionSelectionChanged:function(a,b){var c=b.cause.getData().value,d=a.getChildByRef("options"),e=b.data.getParent().getChildIndex(b.data),f=this._optionsItemsRelations.selectOption(a,e,c),g=this._validateProductOptions(d);f&&g&&a.getChildByRef("price").setValue(f.getChildValue("price"))},_handleTextAreaOptionChanged:function(a){if(this._validateProductOptions(a.getChildByRef("options"))){var b=this._optionsItemsRelations._selectedOptions.map(function(a){return a.selectedOptionId}),c=this._optionsItemsRelations.getProductItem(a,b);c&&a.getChildByRef("price").setValue(c.getChildValue("price"))}},_handleBuyProduct:function(a){var b=a.getChildByRef("options"),c=this._validateProductOptions(b),d=this._optionsItemsRelations._selectedOptions.map(function(a){return a.selectedOptionId}),e=this._optionsItemsRelations.getProductItem(a,d);if(e&&c){var f=this._getTextOptionsParams(b),g=e.getChildValue("id");this._cartAPI.addProduct(g,f),this._logger.sendEcomEvent(this._logger.PRODUCT_PAGE_ADD_PRODUCT_TO_CART,{c1:g}),this._feedbackLogic.hasFeedbackMessage()&&!this._environment.isMobile()?(this._feedbackLogic.showFeedbackMessage(a),this.resources.W.Viewer.getZoomHandler().hideNextPrevButtons()):this.resources.W.Commands.executeCommand("WViewerCommands.MediaZoom.Close",null,this)}},_handleBuyProductError:function(){this._feedbackLogic.isVisible()&&this._feedbackLogic.closeFeedbackMsg()},_validateProductOptions:function(a){var b=!0;return a.getChildren().forEach(function(a){a&&a.getChildValue("isMandatory")&&(b=this._environment.getTypesManager().validateDataItem(a)&&b)}.bind(this)),b},_getTextOptionsParams:function(a){for(var b=[],c=a.getValue(),d=0;d<c.length;d++){var e=c[d];"simpleText"==e.optionType&&b.push({optionId:e.id,value:e.text})}return b},_handleShareRequest:function(a,b){var c,d=window.location.href,e=a.getChildValue("title"),f="",g=a.getChildValue("mediaItems");if(g.length>0&&(f=a.getChildValue("imageList")[0].src,c="wix:Image"==g[0]._type),this._socialSharer.handleShareRequest(b,d,e,f,c),this.resources.W.Config.env.$isPublicViewerFrame){var h=a.getChildValue("id");this._logger.sendEcomEvent(this._logger.USER_SHARED_PRODUCT_PAGE,{c1:h,c2:b})}},_autoSelectSingleOptionItems:function(a){for(var b=a.getChildByRef("options"),c=0,d=b.getChildrenCount();d>c;c++){var e=b.getChildByIndex(c),f=e.getChildByRef("items");if(f){var g=0,h=0;if(f.getValue().map(function(a,b){a.enabled&&(g++,h=b)}),1==g){var i=f.getChildByIndex(h).getChildValue("value"),j=this._optionsItemsRelations.selectOption(a,c,i);e.getChildByRef("selectedValue").setValue(i),j&&a.getChildByRef("price").setValue(j.getChildValue("price"))}}}},generateSettingsPanel:function(a,b){this._feedbackLogic.generateSettingsPanel(a,b)}})}),define.skin("ecommerce.skins.mcom.LoadMoreButton",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.skinParams([{id:"txt",type:Constants.SkinParamTypes.COLOR,defaultValue:"#ffffff"},{id:"fnt",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_7"}]),b.html('<a skinPart="link"><span skinPart="label"></span></a>'),b.css(["{ padding: 15px 0; }","%link% { width:100%;  text-align: center; display: block; }","%label% { color:[txt]; [fnt]; display: block; }"])}),define.skin("ecommerce.skins.mcom.MobileAddButton",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.skinParams([{id:"bg",type:Constants.SkinParamTypes.BG_COLOR,defaultValue:"#ff0000"},{id:"bgh",type:Constants.SkinParamTypes.BG_COLOR,defaultValue:"#0071a9"},{id:"txt",type:Constants.SkinParamTypes.COLOR,defaultValue:"#737373"},{id:"fnt",type:Constants.SkinParamTypes.FONT,defaultTheme:"font_7"},{id:"shadow",type:Constants.SkinParamTypes.BOX_SHADOW,defaultValue:"inset 0px -13px 20px -10px 0 rgba(0, 0, 0, 0.20);",noshow:!0},{id:"rd",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"4px"},{id:"tdr",type:Constants.SkinParamTypes.URL,defaultTheme:"BASE_THEME_DIRECTORY"},{id:"pos",type:Constants.SkinParamTypes.OTHER,defaultValue:"position:absolute; top:0; bottom:0; left:0; right:0;"}]),b.html('<a skinPart="link"><span skinPart="label"></span></a>'),b.css([" { }","%link% {display:block; [pos] color:[txt]; border:1px solid [txt]; background:white; [rd] [shadow] }","%label% { font-size: 28px; font-weight: bold; line-height: 30px; }"])}),define.skin("ecommerce.skins.mcom.MobileAddCouponButton",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.skinParams([{id:"txt",type:Constants.SkinParamTypes.COLOR,defaultValue:"#222222"},{id:"rd",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"300px"},{id:"pos",type:Constants.SkinParamTypes.OTHER,defaultValue:"position:absolute; top:0; bottom:0; left:0; right:0;"}]),b.html('<a skinPart="link"><span skinPart="label"></span></a>'),b.css([" {  }","%link% {display:block; [pos] color:[txt]; border:7px solid [txt]; background:white; [rd]}",'%link%:before {display:block; content:""; position:absolute; right:35%; left:35%; top:0; bottom:50%; margin-bottom:-7px; border-bottom:14px solid [txt];}','%link%:after {display:block; content:""; position:absolute; top:35%; bottom:35%; left:0; right:50%; margin-right:-7px; border-right:14px solid [txt];}'])}),define.skin("ecommerce.skins.mcom.MobileColorOptionSkin",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.skinParams([{id:"tdr",type:Constants.SkinParamTypes.URL,defaultTheme:"BASE_THEME_DIRECTORY"}]),b.html('<p skinPart="description"></p><div skinPart="size" class="selectedFrame"></div>'),b.css([" { position:relative; margin:0 7px 7px 0; display:inline-block; width:47px; height:50px; border: solid 1px #8e8e8e;}","%.selectedFrame% { position:absolute; top:0; right:0; bottom:0; left:0;  }",'[state~="selected"] %.selectedFrame% { position:absolute; top:0; right:0; bottom:0; left:0; background:transparent url([tdr]wix_apps/smallcheck.png) no-repeat 50% 50%; background-size:22px 21px;}','[state~="disabled"] { display:none; }',"%description% { display:none; }"])}),define.skin("ecommerce.skins.mcom.MobileComboBoxSkin",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.skinParams([{id:"bg",type:Constants.SkinParamTypes.BG_COLOR,defaultValue:"#ffffff",enableEdit:!0},{id:"bg2",type:Constants.SkinParamTypes.BG_COLOR,defaultValue:"#aaaaaa",enableEdit:!0},{id:"brd",type:Constants.SkinParamTypes.COLOR,defaultValue:"#888888",enableEdit:!0},{id:"txt",type:Constants.SkinParamTypes.COLOR,defaultValue:"#888888",enableEdit:!0},{id:"brw",type:Constants.SkinParamTypes.SIZE,defaultValue:"2px"},{id:"rd",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"5px"},{id:"arb",type:Constants.SkinParamTypes.OTHER,defaultValue:'content:"";  position:absolute;'},{id:"app",type:Constants.SkinParamTypes.OTHER,defaultValue:"-webkit-appearance:none; -moz-appearance:button !important; -ms-appearance:none !important; appearance:none;"}]),b.html('<select skinpart="collection"></select><div class="err"></div>'),b.css(["{ position:relative; display:inline-block !important; }","%collection% { [rd][app][bg] color:[txt]; border:solid [brw] [brd]; padding:5px 18px 5px 5px; margin:0 !important; position:relative; min-width:100%; min-height:100%; font-size:60px; line-height:60px; text-align:center; text-align: -webkit-center; margin-left:60px}","%collection% option { min-width:100%; text-align:center; text-align: -webkit-center;}",":after {[arb][rd][bg2] top:1px; bottom:1px; right:1px; width:90px; pointer-events:none; color:#fff;text-align:center; font-size:40px; line-height:80px; border-bottom-left-radius:0; border-top-left-radius:0;}",".err { position:absolute; top:50%; left:0; height:1px;width:1px;}",'[state~="invalid"] .err:before { color:#fff; background:#d00; border:2px solid #fff; border-radius:50%; box-shadow:0 1px 3px rgba(0, 0, 0, 0.5); text-align:center; font-size:12px;content:"!"; position:absolute; top:5px; left:-15px; width:20px; height:20px; line-height:20px !important;}','[state~="invalid"] .err:after { color:#fff; font-size:10px; text-shadow:1px 1px 3px rgba(0, 0, 0, 0.5);content:""; position:absolute; top:10px; left:8px;}'])}),define.skin("ecommerce.skins.mcom.MobileDeleteItemButton",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.skinParams([{id:"tdr",type:Constants.SkinParamTypes.URL,defaultTheme:"BASE_THEME_DIRECTORY"},{id:"pos",type:Constants.SkinParamTypes.OTHER,defaultValue:"position:absolute; top:0; bottom:0; left:0; right:0;"}]),b.html('<a skinPart="link"><span skinPart="label"></span></a>'),b.css(["%link% { [pos] background-size:100%; background: transparent url([tdr]wix_apps/deletebutton.png) center top no-repeat; }","%label% { display:none }"])}),define.skin("ecommerce.skins.mcom.MobileDropDownInputSkin2",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.skinParams([]),b.html('<select skinpart="collection"></select>'),b.css(["{position:relative;}","%collection% { width:100%; height:100%; cursor:pointer; }","%collection% option { padding:2px; }"])}),define.skin("ecommerce.skins.mcom.MobileErasableTextInputSkin",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.skinParams([{id:"bg",type:Constants.SkinParamTypes.BG_COLOR,defaultValue:"#ffffff",enableEdit:!0},{id:"brd",type:Constants.SkinParamTypes.COLOR,defaultValue:"#aaa9a9",enableEdit:!0},{id:"txt",type:Constants.SkinParamTypes.COLOR,defaultValue:"#222222",enableEdit:!0},{id:"brw",type:Constants.SkinParamTypes.SIZE,defaultValue:"1px",enableEdit:!0},{id:"rd",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"2px"}]),b.html('<label skinpart="label"></label><input skinpart="input" type="text" /><span skinpart="erase"></span><p skinpart="message"></p>'),b.css(["{ position:relative; }","%input% { [bg][rd] color:[txt]; border:[brw] solid [brd]; padding:7px 3px; margin:0; font-size:20px; line-height:20px; width:100%; }","%erase% { position: absolute; font-size:20px; right: 3px; cursor: pointer; width:33px; height: auto; text-align: center; line-height:20px; color:[txt]; padding: 9px 0;}","%message% { display: none }",'[state~="showButton"] %erase% { display: inline-block; }','[state~="showButton"] %input% { padding-right: 38px; }','[state~="hideButton"] %erase% { display: none; }'])}),define.skin("ecommerce.skins.mcom.MobileOptionsListInputSkin",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.skinParams([]),b.html(),b.css([" { margin-right:-33px; }"])}),define.skin("ecommerce.skins.mcom.MobilePaginatedGridDefaultSkin",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.skinParams([]),b.html('<div skinPart="itemsContainer"></div><div skinPart="rolloverHolder"><h3 skinPart="title"></h3><p skinPart="description"></p><a skinPart="link">Go to link</a></div><div class="buttons"><a skinPart="buttonPrev"></a><a skinPart="buttonNext"></a></div><div class="hlp opc" skinPart="counter"></div><div class="hlp opc" skinPart="autoplay"><span></span></div>'),b.css(["%.opc%, %title%, %description%, %link%, %buttonPrev%, %buttonNext%, %.buttons%        { display:none; }"])}),define.skin("ecommerce.skins.mcom.MobileRemoveButton",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.skinParams([{id:"tdr",type:Constants.SkinParamTypes.URL,defaultTheme:"BASE_THEME_DIRECTORY"},{id:"txt",type:Constants.SkinParamTypes.COLOR,defaultValue:"#373737"},{id:"pos",type:Constants.SkinParamTypes.OTHER,defaultValue:"position:absolute; top:0; bottom:0; left:0; right:0;"}]),b.html('<a skinPart="link"><span skinPart="label"></span></a>'),b.css([" { cursor:pointer; }","%link% {display:block; [pos] color:[txt]; border:1px solid [txt]; background:#fff url([tdr]close.gif) no-repeat 50% 50%; font-size:23px; font-weight:bold; line-height:30px; text-align:center; }","%label% { width:100%; height:100%; }"])}),define.skin("ecommerce.skins.mcom.MobileSelectOptionsListSkin",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.skinParams([{id:"trans",type:Constants.SkinParamTypes.TRANSITION,defaultValue:"opacity 0.3s ease-out 0s"},{id:"trans1",type:Constants.SkinParamTypes.TRANSITION,defaultValue:"opacity 1.2s ease-out 0s"},{id:"bg",type:Constants.SkinParamTypes.BG_COLOR,mutators:["alpha",[66]],defaultValue:"#000000"},{id:"rd",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"2px"}]),b.html('<div class="tipContainer"><p skinPart="tooltip"></p></div><div skinPart="itemsContainer"></div>'),b.css([" { position:relative; }","%itemsContainer% { white-space: normal;}","%.tipContainer% { text-align:center; position:absolute; top:-57px; left:0; right:0; }","%tooltip% {display:inline-block; padding:12px 15px; min-width:33px; [bg] [rd] color:#ffffff; font-size:15px; margin:0 auto;}",'[state~="displayed"] %tooltip% { opacity:1; [trans]  }','[state~="hidden"]    %tooltip% { opacity:0; [trans1] }'])}),define.skin("ecommerce.skins.mcom.MobileSelectableSliderGalleryDefaultSkin",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.fields({widthDiff:0,heightDiff:0}),b.compParts({imageItem:{skin:"wysiwyg.viewer.skins.galleryselectableslider.SelectableSliderDisplayerDefaultSkin",styleGroup:"inherit"}}),b.skinParams([]),b.html('<div skinPart="itemsContainer"></div><div skinPart="swipeLeftHitArea" class="arr"></div><div skinPart="swipeRightHitArea" class="arr"></div><div skinPart="counter"></div><div skinPart="autoplay">AUTOPLAY</div>'),b.css(["{ position:absolute; }","%itemsContainer% { position:absolute; left:35px !important; right:35px !important; height:100%; }","%.arr%, &counter&, &autoplay&                      { display:none; }"])}),define.skin("ecommerce.skins.mcom.MobileTextAreaInputSkin",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.skinParams([{id:"box",type:Constants.SkinParamTypes.OTHER,defaultValue:"box-sizing:border-box; -webkit-box-sizing:border-box -moz-box-sizing:border-box;"},{id:"bg",type:Constants.SkinParamTypes.BG_COLOR,defaultValue:"#ffffff",enableEdit:!0},{id:"brd",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultValue:"#a3a0a1",enableEdit:!0},{id:"brw",type:Constants.SkinParamTypes.SIZE,defaultValue:"1px"},{id:"brdf",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultValue:"#19a0e9",enableEdit:!0},{id:"txt",type:Constants.SkinParamTypes.COLOR,defaultValue:"#000000",enableEdit:!0},{id:"rd",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"5px"}]),b.html('<textarea skinPart="textarea"></textarea><p skinPart="errorMessage"></p>'),b.css(["{ position:relative;}","%textarea% {text:[txt] [box] [bg] [rd] resize: none; width:100%  !important; min-height:33px; height:6.1em; overflow:auto; font-size:15px; line-height:1.4em; border:[brw] solid [brd]; padding:3px 7px; box-shadow: 0 1px 1px 0 rgba(0,0,0,.3) inset; }","%textarea%:focus {border-color: [brdf]; }"])}),define.skin("ecommerce.skins.mcom.MobileTextOptionSkin",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.skinParams([{id:"tdr",type:Constants.SkinParamTypes.URL,defaultTheme:"BASE_THEME_DIRECTORY"}]),b.html('<p skinPart="description"></p><p skinPart="size" class="txtOpt"></p><p class="selectedCheckmark"></p>'),b.css(["{ background:#ffffff; color:#000000; padding:0 7px; margin:0 7px 7px 0; min-width:33px; height:50px; font-size:13px; line-height:50px; display:inline-block; border:solid 1px #8e8e8e; text-align:center; position:relative; }",'[state~="selected"] %.selectedCheckmark% { position:absolute; top:0; right:0; bottom:0; left:0; background:rgba(30, 30, 30, 0.5) url([tdr]wix_apps/smallcheck.png) no-repeat 50% 50%; background-size:22px 21px;}','[state~="selected"] %size% { display:inline;}','[state~="disabled"] { display:none; }',"%description% { display:none; }","%size% { cursor: default; }"])
}),define.skin("ecommerce.skins.mcom.MobileVerticalRepeaterSkin",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.skinParams([{id:"brd",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultTheme:"color_15"},{id:"brw",type:Constants.SkinParamTypes.SIZE,defaultValue:"1px"},{id:"bg",type:Constants.SkinParamTypes.BG_COLOR,defaultTheme:"color_11"},{id:"pad",type:Constants.SkinParamTypes.SIZE,defaultValue:"10px 0"}]),b.css(["{ border-left:[brw] solid [brd]; border-top:[brw] solid [brd]; border-right:[brw] solid [brd];}","> div { border-bottom:[brw] solid [brd]; [bg]; padding:[pad] 0; }","> div[islast=true] { border-bottom:transparent solid 0; }"]),b.methods({_buildSkin:function(){this._renderCss();var a=this.getSkinClassData().skinCSSName.split(Constants.skinManager.STYLE_CSS_PLACEHOLDER).join("");return this._viewNode.addClass(a),{view:this._viewNode,inlineContent:this._viewNode}}})}),define.skin("ecommerce.skins.mcom.MobileZoomPartSkin",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.skinParams([{id:"bg",type:Constants.SkinParamTypes.BG_COLOR,mutators:["alpha",40],defaultValue:"#000"},{id:"rd",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"7px"},{id:"pos",type:Constants.SkinParamTypes.OTHER,defaultValue:"position:fixed; top:0; right:0; bottom:0; left:0; "},{id:"themeDir",type:"themeUrl",defaultTheme:"THEME_DIRECTORY",name:""}]),b.html('<div skinPart="inlineContent"></div><div skinPart="error">An error has occurred</div><div skinPart="loading"><p>Loading...</p></div>'),b.css(['[state="content"] %error% { display:none;}','[state="content"] %loading% { display:none;}','[state="error"] %inlineContent% { display:none;}','[state="error"] %loading% { display:none;}','[state="loading"] %loading% { [pos] [bg]  }','[state="rendering"] %loading% { [pos] [bg]  }','[state="loading"] %loading% p { color:#fff; font-size:14px; font-weight:bold; text-align:center; line-height:50px; letter-spacing:1px; height:100px; width:200px; position:absolute; top:50%; margin-top:-50px; left:50%; margin-left:-100px; [rd]background:transparent url([themeDir]gif_preloader.gif) center 42px no-repeat }','[state="loading"] %error% { display:none;}','[state="rendering"] %inlineContent%  { opacity: 0;}','[state="rendering"] %error% { display: none;}','[state="rendering"] %loading% p { display: none;}','[state="content"] %inlineContent% { opacity: 1;}',"%inlineContent% > div { width: 100%; }","%inlineContent% { box-sizing:border-box !important; -moz-box-sizing:border-box !important; -ms-box-sizing:border-box !important; -webkit-box-sizing:border-box !important; }"," .singleLine { white-space:nowrap; display:block; overflow:hidden; text-overflow:ellipsis; word-wrap:normal; }"])}),define.skin("ecommerce.skins.viewer.dialogs.EcomCheckoutMessageDialogSkin",function(a){var b=a;b.inherits("mobile.core.skins.BaseSkin"),b.skinParams([{id:"bg",type:Constants.SkinParamTypes.BG_COLOR,mutators:["alpha",75],defaultValue:"#000"},{id:"rd",type:Constants.SkinParamTypes.BORDER_RADIUS,defaultValue:"5px"},{id:"tdr",type:Constants.SkinParamTypes.URL,defaultTheme:"WEB_THEME_DIRECTORY"},{id:"tdr2",type:Constants.SkinParamTypes.URL,defaultTheme:"BASE_THEME_DIRECTORY"},{id:"shadowColor",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultValue:"0,0,0,.2"},{id:"shadowInsetColorOver",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultValue:"204,68,233,.7"},{id:"shadowInsetColor",type:Constants.SkinParamTypes.COLOR_ALPHA,defaultValue:"0,0,0,.7"},{id:"boxModel",type:Constants.SkinParamTypes.OTHER,defaultValue:"-moz-box-sizing:border-box; -webkit-box-sizing:border-box; box-sizing:border-box;"}]),b.html('<div skinPart="blockingLayer"><div skinPart="dialog"><div skinPart="closeButton"></div><p skinPart="title"></p><p skinPart="subtitle"></p><p skinPart="description"></p><div class="actionButtons"<div skinPart="tryButton"></div><div skinPart="upgradeButton"></div></div></div></div>'),b.css(["{ position:fixed; width:100%; height:100%; z-index:99; color: #373737; }","%blockingLayer% { [bg] position:fixed; top:0; bottom:0; left:0; right:0; visibility:visible; zoom:1; overflow: auto; }","%dialog% { [rd] position:absolute; top:30%; left:50%; margin-left:-340px; width: 680px; [boxModel] background: #fdfdfd; text-align: center; padding:34px 25px 28px 25px;}","%closeButton% { position: absolute;top: 12px; right: 12px; cursor:pointer; background:url([tdr]x.png) no-repeat; height:10px; width:10px;}",'%title% {font-size: 20px; margin-bottom: 5px; font-weight:bold; font-family: "HelveticaNeueW01-75Bold", "HelveticaNeueW02-75Bold", "HelveticaNeueW10-75Bold", Helvetica, Arial, sans-serif;}','%subtitle% {font-size: 17px; margin-bottom: 45px; font-family: "HelveticaNeueW01-55", "HelveticaNeueW02-55", "HelveticaNeueW10-55", Helvetica, Arial, sans-serif;}','%description% { max-height: 650px; min-height: 23px; height: auto; font-size: 15px; line-height: 18px; margin-bottom: 60px; font-family: "HelveticaNeueW01-55Roma", "HelveticaNeueW02-55Roma", "HelveticaNeueW10-55Roma", Helvetica, Arial, sans-serif;}',".actionButtons {display: inline-block;}","%tryButton% {cursor: pointer; color: #0099ff; float: left; margin-top: 8px; margin-left: -2px; font-size: 15px; padding-right:13px; background:transparent url([tdr2]wix_apps/rightarrowblue.png) 100% 3px no-repeat; background-size: 7px 11px}","%tryButton%:hover { border-bottom: 1px solid #0099ff; }",'%upgradeButton% {cursor: pointer;  display: inline; height: 36px; float: right; background-color: #9e199e; color: #FFFFFF; border-radius: 4px; padding: 0 20px; line-height: 36px;font-size: 14px; font-weight: bold; font-family: "HelveticaNeueW01-75Bold", "HelveticaNeueW02-75Bold", "HelveticaNeueW10-75Bold", Helvetica, Arial, sans-serif;}',"%upgradeButton%:hover { background-color: #8f178f; box-shadow: 0 2px 3px 0 [shadowColor], 0 1px 2px 0 [shadowInsetColorOver] inset}","%upgradeButton%:active { border-color: transparent; box-shadow: 0 1px 3px 0 [shadowInsetColor] inset }",'[state="preview"] %tryButton% { display:none;}','[state="preview"] %upgradeButton% { float: none; display: inline-block;}'])}),define.component("ecommerce.viewer.dialogs.EcomCheckoutMessageDialog",function(a){var b=a;b.inherits("mobile.core.components.base.BaseComponent"),b.resources(["W.Config","W.Commands"]),b.binds(["closeView"]),b.states(["preview","viewer"]),b.skinParts({blockingLayer:{type:"htmlElement"},dialog:{type:"htmlElement"},closeButton:{type:"htmlElement"},title:{type:"htmlElement"},subtitle:{type:"htmlElement"},description:{type:"htmlElement"},tryButton:{type:"htmlElement"},upgradeButton:{type:"htmlElement"}}),b.methods({initialize:function(a,b,c){this.parent(a,b,c),this.resources.W.Commands.registerCommandListenerByName("WPreviewCommands.ViewerStateChanged",this,this.closeView),this.resources.W.Commands.registerCommandListenerByName("WPreviewCommands.WEditModeChanged",this,this.closeView)},showMessage:function(a,b,c){this.uncollapse(),this._skinParts.title.set("html",a.title||""),this._skinParts.subtitle.set("html",a.subtitle||""),this._skinParts.description.set("html",a.description||""),this._skinParts.upgradeButton.set("html",a.upgradeBtnLabel||""),this._skinParts.closeButton.addEvent("click",this.closeView),this._skinParts.upgradeButton.addEvent("click",c),this.resources.W.Config.env.$isPublicViewerFrame?(this._skinParts.tryButton.set("html",a.tryBtnLabel||""),this._skinParts.tryButton.addEvent("click",b)):this.setState("preview"),this._visible=!0},visible:function(){return this._visible},closeView:function(){this.collapse(),this._visible=!1,this.fireEvent("complete")}})});