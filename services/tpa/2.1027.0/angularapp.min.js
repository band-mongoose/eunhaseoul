define.resource("deleteTpaAppDialogAngular",{App:function(a){var b=a.angular.module("DeleteTpaAppDialog",[]);b.controller("deleteTpaAppDialogCtl",["$scope",function(b){b.title=a.title,b.radio1Text=a.radio1Text,b.radio2Text=a.radio2Text,b.radio2SubText=a.radio2SubText,b.deleteText=a.deleteText,b.cancelText=a.cancelText,b.allApps=!1,b.cancelDelete=function(){a.dialogWindow.closeDialog()},b.deleteApp=function(){var c=b.allApps;a.dialogWindow.closeDialog(),a.deleteApp(c)}}]),b.directive("inner",["$sce",function(b){return{restrict:"E",templateUrl:b.trustAsResourceUrl(a.partialsTopology+"/partials/delete-tpa-dialog/delete-app-dialog.html")}}]),b.directive("buttons",["$sce",function(b){return{restrict:"E",templateUrl:b.trustAsResourceUrl(a.partialsTopology+"/partials/delete-tpa-dialog/buttons-container.html")}}]),a.angular.bootstrap(a.element,["DeleteTpaAppDialog"])}}),W.AngularManager.executeExperiment("NGCore",function(){function a(a){c=a,W.AngularLoader.compileElement(c.element)}function b(){W.TPAEditorManager.registerAngularLoader("tpaBillingModal",a)}var c,d=angular.module("TPABillingModal",["ngSanitize"]);d.controller("TPANewBillingModalCtl",["$scope","$window","$sce",function(a,b,d){a.firstPackage=c.data.packages[0],a.titleText=c.titleText,a.image=c.data.appIcon,a.appName=c.data.name,a.appVendorName=c.data.by,a.packageKey=a.firstPackage.id,a.features=c.data.features,a.premiumText=c.premiumText,a.basicText=c.basicText,a.freeText=c.freeText,a.upgradeText=c.upgradeText,a.yearlyPriceBenefitText=c.yearlyPriceBenefitText,a.yearlyPrice=d.trustAsHtml(c.data.price.currencySymbol)+c.data.price.yearlyPriceValue+"/month",a.monthlyPrice=d.trustAsHtml(c.data.price.currencySymbol)+c.data.price.priceValue+" per month",a.freeMonth=a.firstPackage.yearly&&a.firstPackage.yearly.freeMonth,a.savePrecent=Math.round((c.data.price.priceValue-c.data.price.yearlyPriceValue)/c.data.price.priceValue*100),a.saveTitle=" ("+c.saveTitle+" "+a.savePrecent+"%)",a.featureToggleSprite=c.topology+"/resources/billing-modal-sprite.png",a.yearly=!0,a.closeDialog=function(){c.dialogWindow.closeDialog()},a.buyPlan=function(){a.closeDialog(),c.buyPlan(a.packageKey,a.yearly?"YEARLY":"MONTHLY")},a.planToggle=function(){a.yearly=!a.yearly},a.getPremiumTextIfExists=function(a,b){var c="";return a&&a.packagesTexts&&a.packagesTexts[b]&&(c=a.packagesTexts[b].premiumText),c?c:""},a.isSafari=function(){return navigator.userAgent.indexOf("Safari")>-1&&-1==navigator.userAgent.indexOf("Chrome")};var e=/firefox/i,f=/msie[ ]9\.0/i,g=b.navigator.userAgent;a.tableLeftMargin=e.test(g)?"101px":"100px",a.premiumRightBorderThickness=f.test(g)?"2px":"1px"}]),d.directive("billingPackages",["$sce","$timeout",function(a,b){return{restrict:"E",templateUrl:a.trustAsResourceUrl(c.partialsTopology+"/partials/billing-modal/packages.html"),link:function(a){c.viewRendered(),a.getPremiumText=function(b){return a.getPremiumTextIfExists(b,a.packageKey)},a.showFeatureTooltip=function(a,d){c.hoverTimeout=b(function(){c.showFeatureTooltip(a,d)},500)},a.hideFeatureTooltip=function(){b.cancel(c.hoverTimeout),c.hideFeatureTooltip()}}}}]),d.dispose=function(){c.angular.element(c.element).remove()},function(a,b,c){"use strict";function d(a){var c=[];return i(c,b.noop).chars(a),c.join("")}function e(a){var b={};a=a.split(",");var c;for(c=0;c<a.length;c++)b[a[c]]=!0;return b}function f(a,c){function d(a,d,f,h){if(d=b.lowercase(d),w[d])for(;s.last()&&x[s.last()];)e("",s.last());v[d]&&s.last()==d&&e("",d),(h=u[d]||!!h)||s.push(d);var i={};f.replace(m,function(a,b,c,d,e){i[b]=g(c||d||e||"")}),c.start&&c.start(d,i,h)}function e(a,d){var e,f=0;if(d=b.lowercase(d))for(f=s.length-1;f>=0&&s[f]!=d;f--);if(f>=0){for(e=s.length-1;e>=f;e--)c.end&&c.end(s[e]);s.length=f}}var f,h,i,s=[],t=a;for(s.last=function(){return s[s.length-1]};a;){if(i="",h=!0,s.last()&&y[s.last()]?(a=a.replace(RegExp("(.*)<\\s*\\/\\s*"+s.last()+"[^>]*>","i"),function(a,b){return b=b.replace(p,"$1").replace(r,"$1"),c.chars&&c.chars(g(b)),""}),e("",s.last())):(0===a.indexOf("<!--")?(f=a.indexOf("--",4),f>=0&&a.lastIndexOf("-->",f)===f&&(c.comment&&c.comment(a.substring(4,f)),a=a.substring(f+3),h=!1)):q.test(a)?(f=a.match(q))&&(a=a.replace(f[0],""),h=!1):o.test(a)?(f=a.match(l))&&(a=a.substring(f[0].length),f[0].replace(l,e),h=!1):n.test(a)&&((f=a.match(k))?(f[4]&&(a=a.substring(f[0].length),f[0].replace(k,d)),h=!1):(i+="<",a=a.substring(1))),h&&(f=a.indexOf("<"),i+=0>f?a:a.substring(0,f),a=0>f?"":a.substring(f),c.chars&&c.chars(g(i)))),a==t)throw j("badparse",a);t=a}e()}function g(a){if(!a)return"";var b=D.exec(a);a=b[1];var c=b[3];return(b=b[2])&&(C.innerHTML=b.replace(/</g,"&lt;"),b="textContent"in C?C.textContent:C.innerText),a+b+c}function h(a){return a.replace(/&/g,"&amp;").replace(s,function(a){var b=a.charCodeAt(0);return a=a.charCodeAt(1),"&#"+(1024*(b-55296)+(a-56320)+65536)+";"}).replace(t,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function i(a,c){var d=!1,e=b.bind(a,a.push);return{start:function(a,f,g){a=b.lowercase(a),!d&&y[a]&&(d=a),d||!0!==z[a]||(e("<"),e(a),b.forEach(f,function(d,f){var g=b.lowercase(f),i="img"===a&&"src"===g||"background"===g;!0!==B[g]||!0===A[g]&&!c(d,i)||(e(" "),e(f),e('="'),e(h(d)),e('"'))}),e(g?"/>":">"))},end:function(a){a=b.lowercase(a),d||!0!==z[a]||(e("</"),e(a),e(">")),a==d&&(d=!1)},chars:function(a){d||e(h(a))}}}var j=b.$$minErr("$sanitize"),k=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,l=/^<\/\s*([\w:-]+)[^>]*>/,m=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,n=/^</,o=/^<\//,p=/\x3c!--(.*?)--\x3e/g,q=/<!DOCTYPE([^>]*?)>/i,r=/<!\[CDATA\[(.*?)]]\x3e/g,s=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,t=/([^\#-~| |!])/g,u=e("area,br,col,hr,img,wbr");a=e("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),c=e("rp,rt");var v=b.extend({},c,a),w=b.extend({},a,e("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),x=b.extend({},c,e("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),y=e("script,style"),z=b.extend({},u,w,x,v),A=e("background,cite,href,longdesc,src,usemap"),B=b.extend({},A,e("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width")),C=document.createElement("pre"),D=/^(\s*)([\s\S]*?)(\s*)$/;b.module("ngSanitize",[]).provider("$sanitize",function(){this.$get=["$$sanitizeUri",function(a){return function(b){var c=[];return f(b,i(c,function(b,c){return!/^unsafe/.test(a(b,c))})),c.join("")}}]}),b.module("ngSanitize").filter("linky",["$sanitize",function(a){var c=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>]/,e=/^mailto:/;return function(f,g){function h(a){a&&n.push(d(a))}function i(a,c){n.push("<a "),b.isDefined(g)&&(n.push('target="'),n.push(g),n.push('" ')),n.push('href="'),n.push(a),n.push('">'),h(c),n.push("</a>")}if(!f)return f;for(var j,k,l,m=f,n=[];j=m.match(c);)k=j[0],j[2]==j[3]&&(k="mailto:"+k),l=j.index,h(m.substr(0,l)),i(k,j[0].replace(e,"")),m=m.substring(l+j[0].length);return h(m),a(n.join(""))}}])}(window,window.angular),b()}),W.AngularManager.executeExperiment("NGCore",function(){function a(a){c=a,W.AngularLoader.compileElement(c.element)}function b(){W.TPAEditorManager.registerAngularLoader("tpaExtensions",a)}var c,d=angular.module("TPAExtensions");d.controller("TPAExtensionsCtl",["$scope",function(a){var b=c.data.widgets;b=_.filter(b,function(a){return _.isNull(a.appPage)||_.isUndefined(a.appPage)}),c.isDevMode||(b=_.filter(b,"published")),a.widgets=b,a.image=c.data.appIcon,a.pages=c.pages,a.description=c.description,a.footer=c.footerText,a.addButtonIcon=c.topology+"/resources/ADD-BUTT1sprite.png",a.togglePagesDropdown=function(b,c){c.stopPropagation(),b.showPages=!b.showPages,a.hidePagesExcept(b)},a.closeDialog=function(){c.dialogWindow.closeDialog()},a.addWidgetToPage=function(a,b){c.addWidgetToPage(a,c.appDefinitionId,b.widgetId)},a.addWidget=function(b){a.closeDialog(),c.addWidget(c.appDefinitionId,b.widgetId)},a.hidePagesExcept=function(b){_.each(a.widgets,function(a){(_.isUndefined(b)||b!==a)&&(a.showPages=!1)})},a.hideAllPages=function(){a.hidePagesExcept()},a.goToPageAndAddWidget=function(b,c){a.closeDialog(),a.addWidgetToPage(b,c)}}]),d.directive("widgets",["$sce",function(a){return{restrict:"E",templateUrl:a.trustAsResourceUrl(c.partialsTopology+"/partials/multi-widgets/multi-widgets.html"),link:function(a){c.viewRendered(),a.showHelp=function(a){c.showEssentialToolTip(a)},a.hideHelp=function(){c.hideEssentialToolTip()}}}}]),d.directive("backimg",function(){return function(a,b,c){var d=c.backimg;d&&d.length>0&&b.css({"background-image":"url("+d+")"})}}),d.dispose=function(){c.angular.element(c.element).remove()},b()}),define.resource("tpaExtensionsAngularTests",{App:function(a){var b=a.angular.module("TPAExtensions",[]);return b.controller("TPAExtensionsCtl",["$scope",function(b){var c=a.data.widgets;c=_.filter(c,function(a){return _.isNull(a.appPage)||_.isUndefined(a.appPage)}),a.isDevMode||(c=_.filter(c,"published")),b.widgets=c,b.image=a.data.appIcon,b.pages=a.pages,b.description=a.description,b.footer=a.footerText,b.addButtonIcon=a.topology+"/resources/ADD-BUTT1sprite.png",b.togglePagesDropdown=function(a,c){c.stopPropagation(),a.showPages=!a.showPages,b.hidePagesExcept(a)},b.closeDialog=function(){a.dialogWindow.closeDialog()},b.addWidgetToPage=function(b,c){a.addWidgetToPage(b,a.appDefinitionId,c.widgetId)},b.addWidget=function(c){b.closeDialog(),a.addWidget(a.appDefinitionId,c.widgetId)},b.hidePagesExcept=function(a){_.each(b.widgets,function(b){(_.isUndefined(a)||a!==b)&&(b.showPages=!1)})},b.hideAllPages=function(){b.hidePagesExcept()},b.goToPageAndAddWidget=function(a,c){b.closeDialog(),b.addWidgetToPage(a,c)}}]),b.directive("widgets",["$sce",function(b){return{restrict:"E",templateUrl:b.trustAsResourceUrl(a.partialsTopology+"/partials/multi-widgets/multi-widgets.html"),link:function(b){a.viewRendered(),b.showHelp=function(b){a.showEssentialToolTip(b)},b.hideHelp=function(){a.hideEssentialToolTip()}}}}]),b.directive("header",["$sce",function(b){return{restrict:"E",templateUrl:b.trustAsResourceUrl(a.partialsTopology+"/partials/multi-widgets/header.html")}}]),b.directive("footer",["$sce",function(b){return{restrict:"E",templateUrl:b.trustAsResourceUrl(a.partialsTopology+"/partials/multi-widgets/footer.html")}}]),b.directive("pages",["$sce",function(b){return{restrict:"E",templateUrl:b.trustAsResourceUrl(a.partialsTopology+"/partials/multi-widgets/pages.html"),link:function(b){b.isGluedWidget=function(b){return a.isGluedWidget(b.widgetId)}}}}]),b.directive("backimg",function(){return function(a,b,c){var d=c.backimg;d&&d.length>0&&b.css({"background-image":"url("+d+")"})}}),a.angular.bootstrap(a.element,["TPAExtensions"]),b.dispose=function(){a.angular.element(a.element).remove()},b}}),W.AngularManager.executeExperiment("NGCore",function(){function a(a,b){var c=b.packages[1].id;return a===c&&(c=b.packages[0].id),c}function b(a,c){if(_.isNumber(b.selected))return b.selected;a||(b.selected=3);for(var d=0;d<c.packages.length;d++)if(c.packages[d].id===a){b.selected=d;break}return b.selected}function c(a){var b={};return a.features.forEach(function(a){for(var c in a.packagesTexts)b[c]||(b[c]=[]),a.packagesTexts[c].premiumText&&b[c].push({full:a,relevant:a.packagesTexts[c]})}),b}function d(a){f=a,W.AngularLoader.compileElement(f.element)}function e(){W.TPAEditorManager.registerAngularLoader("tpaPackagePickerModal",d)}var f,g=angular.module("TPAPackagePickerModal",["ngSanitize"]);g.controller("TPAPackagePickerCtl",["$scope","$window","$sce",function(){f.reportPackagePickerOpened()}]),g.directive("popover",function(){return{restrict:"A",scope:{innerText:"="},link:function(a,b){function c(){var a=g.getSize()[0],c=g.getPosition()[0],h=f.getComputedSize()[0],i=f.getPosition()[0],j=e.measure(function(){return this.getComputedSize()});j=j[0];var k=a.y-(i.y-c.y+h.totalHeight),l={top:"auto",right:(h.totalWidth-j.totalWidth)/2+"px"};k<j.totalHeight+d?(l.top=-1*j.totalHeight,b.addClass("arrow-bottom"),b.removeClass("arrow-top")):(b.addClass("arrow-top"),b.removeClass("arrow-bottom"),l.top=h.totalHeight);for(var m in l)e.setStyle(m,l[m])}if(!_.isEmpty(a.innerText)){{var d=5,e=$$(b),f=e.getParent(),g=e.getParent(".popover-display-limit");$$(e.getChildren(".popover-content"))}a.close=function(a){a&&a.stopPropagation(),b.removeClass("show")},f.addEvent("mouseover",function(){c(),b.addClass("show")}).addEvent("mouseout",function(){a.close()})}},template:'<span class="popover-content" ng-mouseenter="close($event)">{{innerText}}</span>'}}),g.directive("multiPackages",["$sce",function(d){return{restrict:"E",templateUrl:d.trustAsResourceUrl(f.partialsTopology+"/partials/packagePicker/multi-packages.html"),transclude:!0,link:function(d){var e=f.component._appData,g=f.data;d.marketData=g,d.topology=f.topology||"",d.hasCycles=h(g),d.appLogoUrl=g.appIcon||"",d.appName=g.name||"",d.appOwner=g.by||"",d.currency=e.marketData.price.currencySymbol||"",d.monthlyOpen=!1,d.selectedPackageCycle=d.hasCycles?"YEARLY":"MONTHLY",d.selectedPackageId=a(e.vendorProductId,g),d.normalizedFeatures=c(g),d.lang=f.lang,d.isSelectable=function(a){return a<b(e.vendorProductId,g)},d.showMonthly=function(){d.monthlyOpen=!d.monthlyOpen,f.reportMonthlyOpened()},d.isSelectedPackage=function(a,b){return a===d.selectedPackageId&&b===d.selectedPackageCycle},d.selectPackage=function(a,b){d.selectedPackageId=a,d.selectedPackageCycle=b},d.getPackageText=function(a,b){return a.packagesTexts&&a.packagesTexts[b]&&a.packagesTexts[b].premiumText||""},d.isFeatureHighlighted=function(a,b){return a.packagesTexts&&a.packagesTexts[b]&&!!a.packagesTexts[b].highlighted},d.isFeatureInPackage=function(a,b){return _.isArray(a.packages)&&a.packages.indexOf(b)>-1},d.getPriceWholePart=function(a){return parseInt(a)},d.getPriceFragmentPart=function(a){for(var b=String(a).split(".")[1]||"";b.length<2;)b+="0";return b},d.closeDialog=function(){f.dialogWindow.closeDialog()},d.buyPlan=function(){d.closeDialog(),f.buyPlan(d.selectedPackageId,d.selectedPackageCycle)}}}}]);var h=function(a){return _.isArray(a.packages)&&_.isObject(a.packages[0])&&_.isObject(a.packages[0].yearly)&&!_.isUndefined(a.packages[0].yearly.price)};g.dispose=function(){f.angular.element(f.element).remove()},function(a,b,c){"use strict";function d(a){var c=[];return i(c,b.noop).chars(a),c.join("")}function e(a){var b={};a=a.split(",");var c;for(c=0;c<a.length;c++)b[a[c]]=!0;return b}function f(a,c){function d(a,d,f,h){if(d=b.lowercase(d),w[d])for(;s.last()&&x[s.last()];)e("",s.last());v[d]&&s.last()==d&&e("",d),(h=u[d]||!!h)||s.push(d);var i={};f.replace(m,function(a,b,c,d,e){i[b]=g(c||d||e||"")}),c.start&&c.start(d,i,h)}function e(a,d){var e,f=0;if(d=b.lowercase(d))for(f=s.length-1;f>=0&&s[f]!=d;f--);if(f>=0){for(e=s.length-1;e>=f;e--)c.end&&c.end(s[e]);s.length=f}}var f,h,i,s=[],t=a;for(s.last=function(){return s[s.length-1]};a;){if(i="",h=!0,s.last()&&y[s.last()]?(a=a.replace(RegExp("(.*)<\\s*\\/\\s*"+s.last()+"[^>]*>","i"),function(a,b){return b=b.replace(p,"$1").replace(r,"$1"),c.chars&&c.chars(g(b)),""}),e("",s.last())):(0===a.indexOf("<!--")?(f=a.indexOf("--",4),f>=0&&a.lastIndexOf("-->",f)===f&&(c.comment&&c.comment(a.substring(4,f)),a=a.substring(f+3),h=!1)):q.test(a)?(f=a.match(q))&&(a=a.replace(f[0],""),h=!1):o.test(a)?(f=a.match(l))&&(a=a.substring(f[0].length),f[0].replace(l,e),h=!1):n.test(a)&&((f=a.match(k))?(f[4]&&(a=a.substring(f[0].length),f[0].replace(k,d)),h=!1):(i+="<",a=a.substring(1))),h&&(f=a.indexOf("<"),i+=0>f?a:a.substring(0,f),a=0>f?"":a.substring(f),c.chars&&c.chars(g(i)))),a==t)throw j("badparse",a);t=a}e()}function g(a){if(!a)return"";var b=D.exec(a);a=b[1];var c=b[3];return(b=b[2])&&(C.innerHTML=b.replace(/</g,"&lt;"),b="textContent"in C?C.textContent:C.innerText),a+b+c}function h(a){return a.replace(/&/g,"&amp;").replace(s,function(a){var b=a.charCodeAt(0);return a=a.charCodeAt(1),"&#"+(1024*(b-55296)+(a-56320)+65536)+";"}).replace(t,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function i(a,c){var d=!1,e=b.bind(a,a.push);return{start:function(a,f,g){a=b.lowercase(a),!d&&y[a]&&(d=a),d||!0!==z[a]||(e("<"),e(a),b.forEach(f,function(d,f){var g=b.lowercase(f),i="img"===a&&"src"===g||"background"===g;!0!==B[g]||!0===A[g]&&!c(d,i)||(e(" "),e(f),e('="'),e(h(d)),e('"'))}),e(g?"/>":">"))},end:function(a){a=b.lowercase(a),d||!0!==z[a]||(e("</"),e(a),e(">")),a==d&&(d=!1)},chars:function(a){d||e(h(a))}}}var j=b.$$minErr("$sanitize"),k=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,l=/^<\/\s*([\w:-]+)[^>]*>/,m=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,n=/^</,o=/^<\//,p=/\x3c!--(.*?)--\x3e/g,q=/<!DOCTYPE([^>]*?)>/i,r=/<!\[CDATA\[(.*?)]]\x3e/g,s=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,t=/([^\#-~| |!])/g,u=e("area,br,col,hr,img,wbr");a=e("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),c=e("rp,rt");var v=b.extend({},c,a),w=b.extend({},a,e("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),x=b.extend({},c,e("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),y=e("script,style"),z=b.extend({},u,w,x,v),A=e("background,cite,href,longdesc,src,usemap"),B=b.extend({},A,e("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width")),C=document.createElement("pre"),D=/^(\s*)([\s\S]*?)(\s*)$/;b.module("ngSanitize",[]).provider("$sanitize",function(){this.$get=["$$sanitizeUri",function(a){return function(b){var c=[];return f(b,i(c,function(b,c){return!/^unsafe/.test(a(b,c))})),c.join("")}}]}),b.module("ngSanitize").filter("linky",["$sanitize",function(a){var c=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>]/,e=/^mailto:/;return function(f,g){function h(a){a&&n.push(d(a))}function i(a,c){n.push("<a "),b.isDefined(g)&&(n.push('target="'),n.push(g),n.push('" ')),n.push('href="'),n.push(a),n.push('">'),h(c),n.push("</a>")}if(!f)return f;for(var j,k,l,m=f,n=[];j=m.match(c);)k=j[0],j[2]==j[3]&&(k="mailto:"+k),l=j.index,h(m.substr(0,l)),i(k,j[0].replace(e,"")),m=m.substring(l+j[0].length);return h(m),a(n.join(""))}}])}(window,window.angular),e()});