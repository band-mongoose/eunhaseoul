define.component("Editor.tpa.viewer.components.TPASection",function(a,b){a.resources(b.merge(["W.Viewer"])),a.methods({_onAllSkinPartsReady:function(){this.parent(),this._isDefaultSection()&&this._hasSectionExtensions()&&!this.resources.W.TPA._appsPages[this._data.get("applicationId")]&&(this._loadHiddenPages(this),this.resources.W.TPA._appsPages[this._data.get("applicationId")]=!0)},_loadHiddenPages:function(a){var b=this;this.resources.W.Viewer.getSiteDataHandlerPromise().done(function(c){var d=b._getHiddenSections(a,c);b._saflyLoadPages(d)})},_getHiddenSections:function(a,b){var c=b.getComponentsOfType("tpa.viewer.components.TPASection");return c=_.union(c,b.getComponentsOfType("wysiwyg.viewer.components.tpapps.TPASection")),c=_.union(c,b.getComponentsOfType("wysiwyg.viewer.components.tpapps.TPAMultiSection")),_.filter(c,function(b){return b.pageId&&b.pageId!==a.getPageId()&&a.getApplicationId()===b.applicationId})},_saflyLoadPages:function(a){for(var b=this,c=0;c<_.size(a);c++)!function(d){_.delay(function(){var c=a[d],e=W.Viewer.getSiteView("DESKTOP").getPageNode(c.pageId);b.resources.W.Viewer.loadPageById(c.pageId,e,function(a){b.resources.W.Commands.executeCommand("WPreviewCommands.BundledPageLoaded",a.pageId)},this)},1e3*c)}(c)}})});